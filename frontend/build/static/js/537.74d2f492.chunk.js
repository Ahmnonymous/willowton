(self.webpackChunkfrontends=self.webpackChunkfrontends||[]).push([[537],{45517:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ce});var s=n(65043),a=n(26462),r=n(7353),o=n(94496),l=n(11906),i=n(71806),d=n(84882),c=n(28076),u=n(10039),p=n(73460),h=n(68903),_=n(61596),m=n(97654),x=n(12110),y=n(26494),f=n(83625),A=n(24056),b=n(83560),C=n(70141),j=n(27108),v=n(94109),w=n(81637),g=n(39336),F=n(83462),E=n(4219),I=n(35316),k=n(29347),S=n(85442),B=n(33438),P=n(37141),D=n(51387),M=n(3632);const L=["Asian","Black","Caucasian","Multiracial"],z=["Eastern Cape","Free State","Gauteng","KwaZulu-Natal","Limpopo","Mpumalanga","Northern Cape","North West","Western Cape"],T=["Divorced","Married","Single","Widowed"],W=["Yes","No"],R=["Disabled Grant","Full Time Employed","Part-Time Employed","Pensioner","Self Employed","Student","Unemployed"],N=["NQF 5 - Matric/Higher Certificate","NQF 6 - Diploma","NQF 7 - Degree","NQF 8 - Honors/Postgraduate","NQF 9 - Masters","NQF 10 - PhD/Doctorate"],O=["1st Semester (January-June)","2nd Semester (July-Decemeber)"],$=["Staff Bursary","Student Loan","Zakah"],Q=["African beliefs","Christianity","Hinduism","Islam","Judaism"],U=["Currently in matric","Currently in university"],Y=["Angola","Congo","Equatorial Quinea","Kenya","Mozambique","Nigeria","Uganda","India","Botswana","Central African Republic","Ghana","Malawi","Pakistan","South African","Bangladesh","Somalian","Lesotho","Ivory Coast","Burundi"],q=["Mother","Father"];var H=n(27415),G=n(13916),V=n(58390),J=n(2820),K=n(97696),Z=n(39993),X=n(70579);const ee=e=>{let{open:t,onClose:n,studentId:a,onSave:i,onDelete:d}=e;const{isDarkMode:c}=(0,s.useContext)(H.D),[u,p]=(0,s.useState)(null),[_,x]=(0,s.useState)(""),[y,f]=(0,s.useState)(""),[A,b]=(0,s.useState)(""),[O,q]=(0,s.useState)(""),[ee,te]=(0,s.useState)(""),[ne,se]=(0,s.useState)(!1),[ae,re]=(0,s.useState)(!1),[oe,le]=(0,s.useState)(""),[ie,de]=(0,s.useState)(!1),ce=(0,S.A)("(min-width:600px)")?500:330,ue=JSON.parse(localStorage.getItem("user")),pe="admin"===(null===ue||void 0===ue?void 0:ue.user_type),he=["Staff","Dependent of Staff","Family","Referral","Director/Board Member or stakeholder"],[_e,me]=(0,s.useState)({student_name:"",student_surname:"",student_nationality:"",student_id_passport_number:"",student_type:"",student_religion:"",student_finance_type:"",student_whatsapp_number:"",student_alternative_number:"",student_email_address:"",student_highest_education:"",student_home_address:"",student_suburb:"",student_area_code:"",student_province:"",student_date_of_birth:"",student_race:"",student_marital_status:"",student_employment_status:"",student_job_title:"",student_company_of_employment:"",student_current_salary:"",student_number_of_siblings:"",student_siblings_bursary:"",student_willow_relationship:"",relation_type:"",relation_hr_contact:"",relation_branch:"",relation_name:"",relation_surname:"",relation_employee_code:"",relation_reference:"",student_emergency_contact_name:"",student_emergency_contact_number:"",student_emergency_contact_relationship:"",student_emergency_contact_address:"",student_status:"Pending",student_status_comment:"",employment_status_attachment:null,employment_status_attachment_name:""}),xe=["Received","Pending","Approved","Declined"],ye=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),fe=e=>/^\d{10}$/.test(e);(0,s.useEffect)((()=>{if(t)if(a){(async()=>{de(!0);try{const e=await fetch(`https://willowtonbursary.co.za/api/student-details/${a}`);if(!e.ok)throw new Error(`Failed to fetch student data: ${e.statusText}`);const t=await e.json(),n=t.student_date_of_birth?(0,K.A)(t.student_date_of_birth,"MM/dd/yyyy",new Date):null;p(n),me((e=>({...e,...t,student_date_of_birth:n,student_status:t.student_status||"Pending",student_status_comment:t.student_status_comment||"",relation_type:t.relation_type||"",relation_hr_contact:t.relation_hr_contact||"",relation_branch:t.relation_branch||"",relation_name:t.relation_name||"",relation_surname:t.relation_surname||"",relation_employee_code:t.relation_employee_code||"",relation_reference:t.relation_reference||"",employment_status_attachment:null,employment_status_attachment_name:t.employment_status_attachment_name||""}))),te(t.student_emergency_contact_name?"Add new":""),x(t.student_email_address&&!ye(t.student_email_address)?"Please enter a valid email address":""),f(t.student_whatsapp_number&&!fe(t.student_whatsapp_number)?"WhatsApp number must be exactly 10 digits":""),b(t.student_alternative_number&&!fe(t.student_alternative_number)?"Alternative number must be exactly 10 digits":""),q(t.student_emergency_contact_number&&!fe(t.student_emergency_contact_number)?"Emergency contact number must be exactly 10 digits":"")}catch(e){console.error("Error fetching student data:",e),le("Failed to load student data. Please try again.")}finally{de(!1)}})()}else p(null),me({student_name:"",student_surname:"",student_nationality:"",student_id_passport_number:"",student_type:"",student_religion:"",student_finance_type:"",student_whatsapp_number:"",student_alternative_number:"",student_email_address:"",student_highest_education:"",student_home_address:"",student_suburb:"",student_area_code:"",student_province:"",student_date_of_birth:"",student_race:"",student_marital_status:"",student_employment_status:"",student_job_title:"",student_company_of_employment:"",student_current_salary:"",student_number_of_siblings:"",student_siblings_bursary:"",student_willow_relationship:"",relation_type:"",relation_hr_contact:"",relation_branch:"",relation_name:"",relation_surname:"",relation_employee_code:"",relation_reference:"",student_emergency_contact_name:"",student_emergency_contact_number:"",student_emergency_contact_relationship:"",student_emergency_contact_address:"",student_status:"Pending",student_status_comment:"",employment_status_attachment:null,employment_status_attachment_name:""}),te(""),x(""),f(""),b(""),q(""),le("")}),[t,a]);const Ae=e=>{p(e);const t=e?(0,Z.A)(e,"MM/dd/yyyy"):"";me((e=>({...e,student_date_of_birth:t})))},be=e=>{const{name:t,value:n}=e.target;let s=n;["student_whatsapp_number","student_alternative_number","student_emergency_contact_number"].includes(t)&&(s=n.replace(/\D/g,"").slice(0,10)),me((e=>({...e,[t]:s}))),"student_email_address"===t&&x(n&&!ye(n)?"Please enter a valid email address":""),"student_whatsapp_number"===t&&f(s&&!fe(s)?"WhatsApp number must be exactly 10 digits":""),"student_alternative_number"===t&&b(s&&!fe(s)?"Alternative number must be exactly 10 digits":""),"student_emergency_contact_number"===t&&q(s&&!fe(s)?"Emergency contact number must be exactly 10 digits":""),"student_willow_relationship"===t&&"No"===n&&me((e=>({...e,relation_type:"",relation_hr_contact:"",relation_branch:"",relation_name:"",relation_surname:"",relation_employee_code:"",relation_reference:""}))),"relation_type"===t&&"Yes"===_e.student_willow_relationship&&me((e=>({...e,relation_hr_contact:"",relation_branch:"",relation_name:"",relation_surname:"",relation_employee_code:"",relation_reference:""})))},Ce=e=>{const t=e.target.files[0];if(t){const e=t.name;me((n=>({...n,employment_status_attachment_name:e,employment_status_attachment:t})))}},je=()=>{a&&window.open(`https://willowtonbursary.co.za/api/student-details/view-attachment/${a}`,"_blank")},ve=()=>{re(!0)},we=()=>{re(!1)},ge=(e,t)=>{te(t),"Same as above"===t?(me((e=>({...e,student_emergency_contact_name:_e.student_name,student_emergency_contact_number:_e.student_whatsapp_number,student_emergency_contact_relationship:"Self",student_emergency_contact_address:_e.student_home_address}))),q(_e.student_whatsapp_number&&!fe(_e.student_whatsapp_number)?"Emergency contact number must be exactly 10 digits":"")):(me((e=>({...e,student_emergency_contact_name:"",student_emergency_contact_number:"",student_emergency_contact_relationship:"",student_emergency_contact_address:""}))),q(""))},Fe=async()=>{if(_e.student_email_address&&!ye(_e.student_email_address))return void x("Please enter a valid email address");if(_e.student_whatsapp_number&&!fe(_e.student_whatsapp_number))return void f("WhatsApp number must be exactly 10 digits");if(_e.student_alternative_number&&!fe(_e.student_alternative_number))return void b("Alternative number must be exactly 10 digits");if(_e.student_emergency_contact_number&&!fe(_e.student_emergency_contact_number))return void q("Emergency contact number must be exactly 10 digits");const e=null===ue||void 0===ue?void 0:ue.user_id,t=a?`https://willowtonbursary.co.za/api/student-details/update/${a}`:"https://willowtonbursary.co.za/api/student-details/insert",s=a?"PUT":"POST",r=new FormData;Object.keys(_e).forEach((e=>{"employment_status_attachment"!==e&&null!==_e[e]&&void 0!==_e[e]&&r.append(e,_e[e])})),_e.employment_status_attachment&&r.append("employment_status_attachment",_e.employment_status_attachment),a||r.append("user_id",e);try{const e=await fetch(t,{method:s,body:r});if(e.ok){const t=await e.json(),s={...t,employment_status_attachment:null,employment_status_attachment_name:t.employment_status_attachment_name||""};i(s),n()}else console.error("Failed to save data:",e.statusText)}catch(o){console.error("Error saving student data:",o),n()}},Ee=()=>{se(!1)},Ie="Islam"===_e.student_religion?$:$.filter((e=>"Zakah"!==e));return(0,X.jsx)(v.Ay,{anchor:"right",open:t,onClose:n,children:(0,X.jsxs)(r.A,{sx:{width:ce,height:"100%",display:"flex",flexDirection:"column",backgroundColor:c?"#2D3748":"#fff"},children:[(0,X.jsxs)(r.A,{sx:{padding:2,borderBottom:"1px solid #ccc",backgroundColor:c?"#1E293B":"#e1f5fe"},children:[(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:c?"#F7FAFC":"#1E293B"},children:"Student Details"}),oe&&(0,X.jsx)(o.A,{variant:"body2",color:"error.main",sx:{mt:1},children:oe})]}),(0,X.jsx)(r.A,{sx:{flex:1,overflowY:"auto",padding:2},children:ie?(0,X.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,X.jsx)(w.A,{})}):(0,X.jsx)(h.Ay,{container:!0,spacing:2,children:Object.keys(_e).map(((e,t)=>((e,t)=>{const n={backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"},"& .MuiFormLabel-root":{color:c?"#F7FAFC":"#1E293B"}},s={style:{color:c?"#F7FAFC":"#1E293B"}};if(["relation_type","relation_hr_contact","relation_branch","relation_name","relation_surname","relation_employee_code","relation_reference"].includes(e)){if("Yes"!==_e.student_willow_relationship)return null;if("relation_type"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:_e[e]||"",onChange:(t,n)=>be({target:{name:e,value:n}}),options:he,renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Relationship Type",sx:n,InputLabelProps:s})})},t);if(!_e.relation_type)return null;if("Staff"===_e.relation_type||"Dependent of Staff"===_e.relation_type){if(["relation_hr_contact","relation_branch","relation_name","relation_surname","relation_employee_code"].includes(e)){const a={relation_hr_contact:"HR Contact",relation_branch:"Branch",relation_name:"Name",relation_surname:"Surname",relation_employee_code:"Employee Code"};return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:a[e],name:e,fullWidth:!0,value:_e[e]||"",onChange:be,sx:n,InputLabelProps:s})},t)}return null}if("Family"===_e.relation_type)return"relation_name"===e?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Who are you related to",name:e,fullWidth:!0,value:_e[e]||"",onChange:be,sx:n,InputLabelProps:s})},t):"relation_reference"===e?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"How are you related",name:e,fullWidth:!0,value:_e[e]||"",onChange:be,sx:n,InputLabelProps:s})},t):null;if("Director/Board Member or stakeholder"===_e.relation_type)return"relation_name"===e?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Please provide the person's name",name:e,fullWidth:!0,value:_e[e]||"",onChange:be,sx:n,InputLabelProps:s})},t):null;if("Referral"===_e.relation_type)return"relation_reference"===e?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Reference Relation",name:e,fullWidth:!0,value:_e[e]||"",onChange:be,sx:n,InputLabelProps:s})},t):"relation_name"===e?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Please provide the person's name",name:e,fullWidth:!0,value:_e[e]||"",onChange:be,sx:n,InputLabelProps:s})},t):null}if("student_date_of_birth"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(V.$,{dateAdapter:J.h,children:(0,X.jsx)(G.l,{wrapperClassName:"datepicker",className:"datepicker",label:"Student Date of Birth",name:"student_date_of_birth",value:u,onChange:Ae,format:"MM/dd/yyyy",sx:n,InputLabelProps:s})})},t);if("student_number_of_siblings"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Number of Siblings",name:"student_number_of_siblings",type:"number",fullWidth:!0,value:_e.student_number_of_siblings||"",onChange:be,sx:n,InputLabelProps:s})},t);if("student_id_passport_number"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Student ID/Passport Number",name:"student_id_passport_number",type:"text",fullWidth:!0,value:_e.student_id_passport_number||"",onChange:be,sx:n,InputLabelProps:s})},t);if("student_email_address"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Student Email Address",name:"student_email_address",type:"email",fullWidth:!0,value:_e.student_email_address||"",onChange:be,error:!!_,helperText:_,sx:n,InputLabelProps:s})},t);if("student_whatsapp_number"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Student WhatsApp Number",name:"student_whatsapp_number",type:"tel",fullWidth:!0,value:_e.student_whatsapp_number||"",onChange:be,error:!!y,helperText:y,inputProps:{maxLength:10,pattern:"[0-9]*"},sx:n,InputLabelProps:s})},t);if("student_alternative_number"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Student Alternative Number",name:"student_alternative_number",type:"tel",fullWidth:!0,value:_e.student_alternative_number||"",onChange:be,error:!!A,helperText:A,inputProps:{maxLength:10,pattern:"[0-9]*"},sx:n,InputLabelProps:s})},t);if("student_emergency_contact_name"===e)return(0,X.jsxs)(h.Ay,{item:!0,xs:12,children:[(0,X.jsx)(j.A,{value:ee,onChange:ge,options:["Same as above","Add new"],renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Emergency Contact",sx:n,InputLabelProps:s})}),"Add new"===ee&&(0,X.jsx)(m.A,{label:"Student Emergency Contact Name",name:"student_emergency_contact_name",fullWidth:!0,value:_e.student_emergency_contact_name||"",onChange:be,sx:{...n,marginTop:2},InputLabelProps:s})]},t);if("student_emergency_contact_number"===e&&"Add new"===ee)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Student Emergency Contact Number",name:"student_emergency_contact_number",type:"tel",fullWidth:!0,value:_e.student_emergency_contact_number||"",onChange:be,error:!!O,helperText:O,inputProps:{maxLength:10,pattern:"[0-9]*"},sx:n,InputLabelProps:s})},t);if("student_emergency_contact_relationship"===e&&"Add new"===ee)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Student Emergency Contact Relationship",name:"student_emergency_contact_relationship",fullWidth:!0,value:_e.student_emergency_contact_relationship||"",onChange:be,sx:n,InputLabelProps:s})},t);if("student_emergency_contact_address"===e&&"Add new"===ee)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Student Emergency Contact Address",name:"student_emergency_contact_address",fullWidth:!0,value:_e.student_emergency_contact_address||"",onChange:be,sx:n,InputLabelProps:s})},t);if("student_status"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:_e[e]||"Pending",onChange:(t,n)=>be({target:{name:e,value:n}}),options:xe,renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Student Status",sx:n,InputLabelProps:s}),disabled:!pe})},t);if("student_status_comment"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Status Comment",name:"student_status_comment",fullWidth:!0,multiline:!0,rows:4,value:_e.student_status_comment||"",onChange:be,sx:n,InputLabelProps:s,disabled:!pe})},t);if("student_willow_relationship"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:_e[e]||"",onChange:(t,n)=>be({target:{name:e,value:n}}),options:W,renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Does the student have any relationship to the Willowton Group?",sx:n,InputLabelProps:s})})},t);if("student_nationality"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:_e[e]||"",onChange:(t,n)=>be({target:{name:e,value:n}}),options:Y,renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Student Nationality",sx:n,InputLabelProps:s})})},t);if("student_province"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:_e[e]||"",onChange:(t,n)=>be({target:{name:e,value:n}}),options:z,renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Student Province",sx:n,InputLabelProps:s})})},t);if("student_type"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:_e[e]||"",onChange:(t,n)=>be({target:{name:e,value:n}}),options:U,renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Student Type",sx:n,InputLabelProps:s})})},t);if("student_religion"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:_e[e]||"",onChange:(t,n)=>be({target:{name:e,value:n}}),options:Q,renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Student Religion",sx:n,InputLabelProps:s})})},t);if("student_finance_type"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:_e[e]||"",onChange:(t,n)=>be({target:{name:e,value:n}}),options:Ie,renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Student Finance Type",sx:n,InputLabelProps:s})})},t);if("student_race"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:_e[e]||"",onChange:(t,n)=>be({target:{name:e,value:n}}),options:L,renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Student Race",sx:n,InputLabelProps:s})})},t);if("student_marital_status"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:_e[e]||"",onChange:(t,n)=>be({target:{name:e,value:n}}),options:T,renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Student Marital Status",sx:n,InputLabelProps:s})})},t);if("student_employment_status"===e)return(0,X.jsxs)(h.Ay,{item:!0,xs:12,children:[(0,X.jsx)(j.A,{value:_e[e]||"",onChange:(t,n)=>be({target:{name:e,value:n}}),options:R,renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Student Employment Status",sx:n,InputLabelProps:s})}),(0,X.jsx)(m.A,{label:"Employment Status Attachment Name",name:"employment_status_attachment_name",fullWidth:!0,disabled:!0,value:_e.employment_status_attachment_name||"",sx:{...n,marginTop:2,"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:c?"#F7FAFC":"#1E293B"}},InputLabelProps:s}),(0,X.jsxs)(l.A,{variant:"outlined",component:"label",sx:{...n,width:"100%",marginTop:1,borderColor:c?"#F7FAFC":"#1E293B"},children:["Upload Employment Status Attachment",(0,X.jsx)("input",{type:"file",hidden:!0,onChange:Ce})]}),_e.employment_status_attachment_name&&a&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(l.A,{variant:"text",color:"primary",onClick:je,startIcon:(0,X.jsx)(M.A,{}),sx:{width:"100%",marginTop:1,color:c?"#F7FAFC":"#1E293B"},children:"View/Download Attachment"}),(0,X.jsx)(l.A,{variant:"outlined",color:"error",onClick:ve,startIcon:(0,X.jsx)(D.A,{}),sx:{width:"100%",marginTop:1,borderColor:c?"#F7FAFC":"#1E293B",color:"red"},children:"Delete Attachment"})]})]},t);if("student_highest_education"===e)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:_e[e]||"",onChange:(t,n)=>be({target:{name:e,value:n}}),options:N,renderInput:e=>(0,X.jsx)(m.A,{...e,label:"Student Highest Education",sx:n,InputLabelProps:s})})},t);if("student_date_stamp"===e||"id"===e||"user_id"===e||"student_industry"===e||"employment_status_attachment"===e||"employment_status_attachment_name"===e)return null;let r=e.replace(/_/g," ").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:r,name:e,fullWidth:!0,value:_e[e]||"",onChange:be,sx:n,InputLabelProps:s})},t)})(e,t)))})}),(0,X.jsx)(g.A,{}),(0,X.jsxs)(r.A,{sx:{padding:2,borderTop:"1px solid #ccc",display:"flex",justifyContent:"space-between"},children:[(0,X.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,X.jsx)(l.A,{onClick:n,variant:"outlined",size:"small",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:c?"#F7FAFC":"#1E293B"},startIcon:(0,X.jsx)(B.A,{}),disabled:ie,children:"Close"}),a&&(0,X.jsx)(l.A,{onClick:()=>{se(!0)},variant:"outlined",size:"small",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:"red"},startIcon:(0,X.jsx)(D.A,{}),disabled:ie,children:"Delete"})]}),(0,X.jsx)(r.A,{sx:{display:"flex",gap:1},children:a?(0,X.jsx)(l.A,{onClick:Fe,variant:"contained",size:"small",color:"primary",startIcon:(0,X.jsx)(P.A,{}),disabled:ie,children:ie?(0,X.jsx)(w.A,{size:20}):"Save"}):(0,X.jsx)(l.A,{onClick:Fe,variant:"contained",size:"small",color:"primary",startIcon:(0,X.jsx)(C.A,{}),disabled:ie,children:ie?(0,X.jsx)(w.A,{size:20}):"Create"})})]}),(0,X.jsxs)(F.A,{open:ne,onClose:Ee,children:[(0,X.jsx)(E.A,{children:"Confirm Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete this record?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:Ee,color:"primary",disabled:ie,children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(a){de(!0);try{const e=await fetch(`https://willowtonbursary.co.za/api/student-details/delete/${a}`,{method:"DELETE"});if(!e.ok)throw new Error(`Failed to delete student: ${e.statusText}`);d(a),n(),se(!1)}catch(e){console.error("Error deleting student:",e),le("Failed to delete student. Please try again.")}finally{de(!1)}}},color:"error",disabled:ie,children:ie?(0,X.jsx)(w.A,{size:20}):"Delete"})]})]}),(0,X.jsxs)(F.A,{open:ae,onClose:we,children:[(0,X.jsx)(E.A,{children:"Confirm Attachment Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete the employment status attachment?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:we,color:"primary",disabled:ie,children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(a){de(!0);try{(await fetch(`https://willowtonbursary.co.za/api/student-details/delete-attachment/${a}`,{method:"PUT"})).ok?(me((e=>({...e,employment_status_attachment:null,employment_status_attachment_name:""}))),re(!1)):le("Failed to delete attachment. Please try again.")}catch(e){console.error("Error deleting attachment:",e),le("Error deleting attachment. Please try again.")}finally{de(!1)}}},color:"error",disabled:ie,children:ie?(0,X.jsx)(w.A,{size:20}):"Delete"})]})]})]})})},te=e=>{let{open:t,onClose:n,studentId:a,aboutMeId:i,onSave:d}=e;const{isDarkMode:c}=(0,s.useContext)(H.D),[u,p]=(0,s.useState)(!1),[_,x]=(0,s.useState)({}),y=(0,S.A)("(min-width:600px)")?500:330;(0,s.useEffect)((()=>{if(t)if(i)fetch(`https://willowtonbursary.co.za/api/about-me/id/${i}`).then((e=>e.json())).then((e=>{x(e)}));else{const e={student_details_portal_id:a};for(let t=1;t<=21;t++)e[`about_me_q${t.toString().padStart(2,"0")}`]="";x(e)}else x({})}),[t,a,i]);const f=e=>{const{name:t,value:n}=e.target;x((e=>({...e,[t]:n})))},A=()=>{p(!1)};return(0,X.jsxs)(v.Ay,{anchor:"right",open:t,onClose:n,children:[(0,X.jsxs)(r.A,{sx:{width:y,height:"100%",display:"flex",flexDirection:"column",backgroundColor:c?"#2D3748":"#fff"},children:[(0,X.jsx)(r.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:c?"#1E293B":"#e1f5fe"},children:(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:c?"#F7FAFC":"#1E293B"},children:"About Me"})}),(0,X.jsx)(r.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,X.jsx)(h.Ay,{container:!0,spacing:2,children:["What inspired you to pursue your chosen field of study?*","How do you plan to use your education and skills to make a significant impact in this field?*","What special projects or initiatives have you undertaken in your academic life?*","Can you tell me about any academic awards or scholarships you have received?*","Provide examples or specific skills you have developed that demonstrates your commitment.*","What extracurricular activities have you participated in, and how have they contributed to your personal and academic growth?*","Once you have completed your studies, how will others benefit from it?*","Can you describe any financial challenges you have faced that have affected your ability to pursue your education, and how these challenges have impacted your current financial situation?*","Have you previously been awarded a bursary?*","What do you think has been your most notable contribution to society thus far?*","Why do you think serving the community is important?*","Will you be doing any volunteer work during your studies?*","Are you willing to assist someone in need?*","Describe yourself in three words.*","What is your greatest strength?*","Describe your biggest mistake and what steps you have taken to rectify it.*","What personal achievement makes you proud?*","Are you self-motivated? Explain*","1st choice of study.*","2nd choice of study*","3rd choice of study.*"].map(((e,t)=>{const n=`about_me_q${(t+1).toString().padStart(2,"0")}`;return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:e,name:n,fullWidth:!0,multiline:!0,value:_[n]||"",onChange:f,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"},"& .MuiOutlinedInput-root":{borderRadius:"8px"},"& .MuiFormLabel-root":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})},n)}))})}),(0,X.jsx)(g.A,{}),(0,X.jsxs)(r.A,{sx:{p:2,borderTop:"1px solid #ccc",display:"flex",justifyContent:"space-between"},children:[(0,X.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,X.jsx)(l.A,{onClick:n,startIcon:(0,X.jsx)(B.A,{}),size:"small",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:c?"#F7FAFC":"#1E293B"},children:"Close"}),_.id&&(0,X.jsx)(l.A,{onClick:()=>{p(!0)},startIcon:(0,X.jsx)(D.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,X.jsx)(l.A,{onClick:async()=>{const e=!!_.id,t=e?`https://willowtonbursary.co.za/api/about-me/update/${_.id}`:"https://willowtonbursary.co.za/api/about-me/insert",s=e?"PUT":"POST",a={..._};e||delete a.id;try{const e=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(e.ok){const t=await e.json();d(t),n()}else console.error("Failed to save About Me data")}catch(r){console.error("Error saving About Me data:",r)}},startIcon:_.id?(0,X.jsx)(P.A,{}):(0,X.jsx)(C.A,{}),variant:"contained",size:"small",children:_.id?"Save":"Create"})]})]}),(0,X.jsxs)(F.A,{open:u,onClose:A,children:[(0,X.jsx)(E.A,{children:"Confirm Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete this entry?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:A,color:"primary",children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(_.id)try{(await fetch(`https://willowtonbursary.co.za/api/about-me/delete/${_.id}`,{method:"DELETE"})).ok?(d(null),n(),p(!1)):console.error("Failed to delete About Me entry")}catch(e){console.error("Error deleting About Me entry:",e)}},color:"error",children:"Delete"})]})]})]})},ne=e=>{let{open:t,onClose:n,studentId:a,parentId:i,onSave:d}=e;const{isDarkMode:c}=(0,s.useContext)(H.D),[u,p]=(0,s.useState)({}),[_,x]=(0,s.useState)(!1),[y,f]=(0,s.useState)(""),[A,b]=(0,s.useState)(""),w=(0,S.A)("(min-width:600px)")?500:330,M=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),L=e=>/^\d{10}$/.test(e);(0,s.useEffect)((()=>{t?i?fetch(`https://willowtonbursary.co.za/api/parents-details/id/${i}`).then((e=>e.json())).then((e=>{p(e),e.parent_email_address?f(M(e.parent_email_address)?"":"Please enter a valid email address"):f(""),e.parent_cell_number?b(L(e.parent_cell_number)?"":"Cell number must be exactly 10 digits"):b("")})):(p({student_details_portal_id:a,parent_relationship:"",parent_name:"",parent_surname:"",parent_cell_number:"",parent_email_address:"",parent_employment_status:"",parent_industry:"",parent_highest_education:"",parent_salary:"",parent_grant:"",parent_other_income:""}),f(""),b("")):(p({}),f(""),b(""))}),[t,i,a]);const z=e=>{const{name:t,value:n}=e.target;if(p((e=>({...e,[t]:n}))),"parent_email_address"===t&&f(n&&!M(n)?"Please enter a valid email address":""),"parent_cell_number"===t){const e=n.replace(/\D/g,"").slice(0,10);p((n=>({...n,[t]:e}))),b(e&&!L(e)?"Cell number must be exactly 10 digits":"")}};return(0,X.jsx)(v.Ay,{anchor:"right",open:t,onClose:n,children:(0,X.jsxs)(r.A,{sx:{width:w,height:"100%",display:"flex",flexDirection:"column",backgroundColor:c?"#2D3748":"#fff"},children:[(0,X.jsx)(r.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:c?"#1E293B":"#e1f5fe"},children:(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:c?"#F7FAFC":"#1E293B"},children:"Parent Details"})}),(0,X.jsx)(r.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,X.jsx)(h.Ay,{container:!0,spacing:2,children:Object.entries(u).map((e=>{let[t,n]=e;if("id"===t||"student_details_portal_id"===t||"parent_date_stamp"===t)return null;let s=t.replace(/_/g," ");return s=s.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),"parent_relationship"===t?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:n||"",onChange:(e,n)=>z({target:{name:t,value:n}}),options:q,renderInput:e=>(0,X.jsx)(m.A,{...e,label:s,sx:{backgroundColor:c?"#1A202C":"#ffffff",borderRadius:"8px",color:c?"#F7FAFC":"#1E293B","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#ffffff":"#000000"}}})})},t):"parent_employment_status"===t?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:n||"",onChange:(e,n)=>z({target:{name:t,value:n}}),options:R,renderInput:e=>(0,X.jsx)(m.A,{...e,label:s,sx:{backgroundColor:c?"#1A202C":"#ffffff",borderRadius:"8px",color:c?"#F7FAFC":"#1E293B","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#ffffff":"#000000"}}})})},t):"parent_highest_education"===t?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:n||"",onChange:(e,n)=>z({target:{name:t,value:n}}),options:N,renderInput:e=>(0,X.jsx)(m.A,{...e,label:s,sx:{backgroundColor:c?"#1A202C":"#ffffff",borderRadius:"8px",color:c?"#F7FAFC":"#1E293B","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#ffffff":"#000000"}}})})},t):"parent_email_address"===t?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{name:t,label:s,type:"email",fullWidth:!0,value:n||"",onChange:z,error:!!y,helperText:y,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#ffffff":"#000000"}}})},t):"parent_cell_number"===t?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{name:t,label:s,type:"tel",fullWidth:!0,value:n||"",onChange:z,error:!!A,helperText:A,inputProps:{maxLength:10,pattern:"[0-9]*"},sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#ffffff":"#000000"}}})},t):(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{name:t,label:s,fullWidth:!0,value:n||"",onChange:z,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#ffffff":"#000000"}}})},t)}))})}),(0,X.jsx)(g.A,{}),(0,X.jsxs)(r.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,X.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,X.jsx)(l.A,{onClick:n,startIcon:(0,X.jsx)(B.A,{}),size:"small",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:c?"#F7FAFC":"#1E293B"},children:"Close"}),u.id&&(0,X.jsx)(l.A,{onClick:()=>x(!0),startIcon:(0,X.jsx)(D.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,X.jsx)(l.A,{onClick:async()=>{if(u.parent_email_address&&!M(u.parent_email_address))return void f("Please enter a valid email address");if(u.parent_cell_number&&!L(u.parent_cell_number))return void b("Cell number must be exactly 10 digits");const e=!!u.id,t=e?`https://willowtonbursary.co.za/api/parents-details/update/${u.id}`:"https://willowtonbursary.co.za/api/parents-details/insert",s=e?"PUT":"POST",a={...u};e||delete a.id;const r=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){const e=await r.json();d(e),n()}else console.error("Failed to save parent data")},startIcon:u.id?(0,X.jsx)(P.A,{}):(0,X.jsx)(C.A,{}),variant:"contained",size:"small",children:u.id?"Save":"Create"})]}),(0,X.jsxs)(F.A,{open:_,onClose:()=>x(!1),children:[(0,X.jsx)(E.A,{children:"Confirm Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete this record?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:()=>x(!1),color:"primary",children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(!u.id)return;x(!1);(await fetch(`https://willowtonbursary.co.za/api/parents-details/delete/${u.id}`,{method:"DELETE"})).ok&&(d(null),n())},color:"error",children:"Delete"})]})]})]})})},se=e=>{let{open:t,onClose:n,studentId:a,universityDetailsId:i,onSave:d}=e;const{isDarkMode:c}=(0,s.useContext)(H.D),u=(0,S.A)("(min-width:600px)")?500:330,[p,_]=(0,s.useState)(!1),[x,y]=(0,s.useState)({});(0,s.useEffect)((()=>{if(t)if(i)fetch(`https://willowtonbursary.co.za/api/university-details/id/${i}`).then((e=>e.json())).then((e=>{const t={...e};y(t)}));else{y({student_details_portal_id:a,Institution_Name:"",Name_of_Course:"",Intake_Year:"",Semester:"",NQF_Level:"",Current_Year:"",Student_Number:"",previously_funded:"",previously_funded_amount:"",tuition:"",tuition_amount:"",accommodation:"",accommodation_fee:"",textbooks:"",textbooks_fee:"",travel:"",travel_fee:"",Total_University_Expense:"",Other_Bursary_Org_1:"",Other_Bursary_Org_1_Contact:"",Other_Bursary_Org_2:"",Other_Bursary_Org_2_Contact:"",Other_Bursary_Org_3:"",Other_Bursary_Org_3_Contact:"",Previous_Bursary_Org_1:"",Previous_Bursary_Org_1_Amount:"",Previous_Bursary_Org_1_Contact:"",Previous_Bursary_Org_2:"",Previous_Bursary_Org_2_Amount:"",Previous_Bursary_Org_2_Contact:"",Previous_Bursary_Org_3:"",Previous_Bursary_Org_3_Amount:"",Previous_Bursary_Org_3_Contact:"",Application_Process_Status:""})}else y({})}),[t,a,i]);const f=e=>{const{name:t,value:n}=e.target;y((e=>({...e,[t]:n})))},A=(e,t)=>{y((n=>{const s={...n,[e]:t},a=M.find((t=>t.select===e));return a&&"No"===t&&(s[a.amount]=""),s}))},b=()=>{_(!1)},w=["Yes","No"],M=[{select:"previously_funded",amount:"previously_funded_amount"},{select:"tuition",amount:"tuition_amount"},{select:"accommodation",amount:"accommodation_fee"},{select:"textbooks",amount:"textbooks_fee"},{select:"travel",amount:"travel_fee"}],L={backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"},"& .MuiFormLabel-root":{color:c?"#F7FAFC":"#1E293B"}},z={style:{color:c?"#F7FAFC":"#1E293B"}};return(0,X.jsx)(v.Ay,{anchor:"right",open:t,onClose:n,children:(0,X.jsxs)(r.A,{sx:{width:u,height:"100%",display:"flex",flexDirection:"column",backgroundColor:c?"#2D3748":"#fff"},children:[(0,X.jsx)(r.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:c?"#1E293B":"#e1f5fe"},children:(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:c?"#F7FAFC":"#1E293B"},children:"University Details"})}),(0,X.jsx)(r.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,X.jsx)(h.Ay,{container:!0,spacing:2,children:Object.keys(x).map(((e,t)=>((e,t)=>{if("id"===e||"student_details_portal_id"===e||"university_details_date_stamp"===e)return null;let n=e.replace(/_/g," ");n=n.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");const s=M.some((t=>t.select===e)),a=M.some((t=>t.amount===e));if(s)return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:x[e]||"",onChange:(t,n)=>A(e,n),options:w,renderInput:e=>(0,X.jsx)(m.A,{...e,label:n,sx:L,InputLabelProps:z})})},t);if(a){const t=M.find((t=>t.amount===e)).select;if("Yes"!==x[t])return null}return"Semester"===e||"semester"===e?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:x[e]||"",onChange:(t,n)=>A(e,n),options:O,renderInput:e=>(0,X.jsx)(m.A,{...e,label:n,sx:L,InputLabelProps:z})})},t):"NQF_Level"===e||"nqf_level"===e?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:x[e]||"",onChange:(t,n)=>A(e,n),options:N,renderInput:e=>(0,X.jsx)(m.A,{...e,label:n,sx:L,InputLabelProps:z})})},t):(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{name:e,label:n,fullWidth:!0,value:x[e]||"",onChange:f,sx:L,InputLabelProps:z})},t)})(e,t)))})}),(0,X.jsx)(g.A,{}),(0,X.jsxs)(r.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,X.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,X.jsx)(l.A,{onClick:n,startIcon:(0,X.jsx)(B.A,{}),size:"small",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:c?"#F7FAFC":"#1E293B"},children:"Close"}),x.id&&(0,X.jsx)(l.A,{onClick:()=>{_(!0)},startIcon:(0,X.jsx)(D.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,X.jsx)(l.A,{onClick:async()=>{const e=!!x.id,t=e?`https://willowtonbursary.co.za/api/university-details/update/${x.id}`:"https://willowtonbursary.co.za/api/university-details/insert",s=e?"PUT":"POST",a={...x};e||delete a.id;const r=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){const e=await r.json();d(e),n()}else console.error("Failed to save University Details")},startIcon:x.id?(0,X.jsx)(P.A,{}):(0,X.jsx)(C.A,{}),variant:"contained",size:"small",children:x.id?"Save":"Create"})]}),(0,X.jsxs)(F.A,{open:p,onClose:b,children:[(0,X.jsx)(E.A,{children:"Confirm Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete this record?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:b,color:"primary",children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(x.id)try{(await fetch(`https://willowtonbursary.co.za/api/university-details/delete/${x.id}`,{method:"DELETE"})).ok?(d(null),n(),_(!1)):console.error("Failed to delete University Details")}catch(e){console.error("Error deleting University Details",e)}},color:"error",children:"Delete"})]})]})]})})},ae=e=>{let{open:t,onClose:n,studentId:a,attachmentId:i,onSave:d}=e;const{isDarkMode:c}=(0,s.useContext)(H.D),[u,p]=(0,s.useState)({}),[_,x]=(0,s.useState)(!1),y=(0,S.A)("(min-width:600px)")?500:330;(0,s.useEffect)((()=>{t?i?fetch(`https://willowtonbursary.co.za/api/attachments/id/${i}`).then((e=>e.json())).then((e=>{p({Attachments_Name:e.attachments_name||"",Attachments_Description:e.attachments_description||"",Attachment:null,id:e.id,Student_Details_Portal_id:e.student_details_portal_id||a})})):p({Attachments_Name:"",Attachments_Description:"",Attachment:null,Student_Details_Portal_id:a}):p({})}),[t,i,a]);const f=e=>{const{name:t,value:n}=e.target;p((e=>({...e,[t]:n})))},A=()=>{x(!1)};return(0,X.jsxs)(v.Ay,{anchor:"right",open:t,onClose:n,children:[(0,X.jsxs)(r.A,{sx:{width:y,height:"100%",display:"flex",flexDirection:"column",backgroundColor:c?"#2D3748":"#fff"},children:[(0,X.jsx)(r.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:c?"#1E293B":"#e1f5fe"},children:(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:c?"#F7FAFC":"#1E293B"},children:"Attachment Details"})}),(0,X.jsx)(r.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,X.jsxs)(h.Ay,{container:!0,spacing:2,children:[(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Description",name:"Attachments_Description",fullWidth:!0,value:u.Attachments_Description||"",onChange:f,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"},"& .MuiFormLabel-root":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Attachment Name",name:"Attachments_Name",fullWidth:!0,disabled:!0,value:u.Attachments_Name||"",onChange:f,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"},"& .MuiFormLabel-root":{color:c?"#F7FAFC":"#1E293B"},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:c?"white":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsxs)(l.A,{variant:"outlined",component:"label",sx:{width:"100%",borderColor:c?"#F7FAFC":"#1E293B"},children:["Upload File",(0,X.jsx)("input",{type:"file",hidden:!0,onChange:e=>{const t=e.target.files[0];if(t){const e=t.name;p((n=>({...n,Attachments_Name:e,Attachment:t})))}}})]})}),u.id&&(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(l.A,{variant:"text",color:"primary",onClick:()=>{u.id&&window.open(`https://willowtonbursary.co.za/api/attachments/view/${u.id}`,"_blank")},startIcon:(0,X.jsx)(M.A,{}),sx:{width:"100%",color:c?"#F7FAFC":"#1E293B"},children:"View/Download File"})})]})}),(0,X.jsx)(g.A,{}),(0,X.jsxs)(r.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,X.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,X.jsx)(l.A,{onClick:n,startIcon:(0,X.jsx)(B.A,{}),size:"small",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:c?"#F7FAFC":"#1E293B"},children:"Close"}),u.id&&(0,X.jsx)(l.A,{onClick:()=>{x(!0)},startIcon:(0,X.jsx)(D.A,{}),color:"error",size:"small",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,X.jsx)(l.A,{onClick:async()=>{const e=!!u.id,t=e?`https://willowtonbursary.co.za/api/attachments/update/${u.id}`:"https://willowtonbursary.co.za/api/attachments/insert",s=e?"PUT":"POST",a=new FormData;a.append("Attachments_Name",u.Attachments_Name),a.append("Attachments_Description",u.Attachments_Description),a.append("Student_Details_Portal_id",u.Student_Details_Portal_id),u.Attachment&&a.append("Attachment",u.Attachment);const r=await fetch(t,{method:s,body:a});if(r.ok){const e=await r.json();d(e),n()}else console.error("Failed to save attachment")},startIcon:u.id?(0,X.jsx)(P.A,{}):(0,X.jsx)(C.A,{}),variant:"contained",size:"small",children:u.id?"Save":"Create"})]})]}),(0,X.jsxs)(F.A,{open:_,onClose:A,children:[(0,X.jsx)(E.A,{children:"Confirm Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete this record?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:A,color:"primary",children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(u.id)try{await fetch(`https://willowtonbursary.co.za/api/attachments/delete/${u.id}`,{method:"DELETE"}),d(null),n(),x(!1)}catch(e){console.error("Failed to delete attachment",e)}},color:"error",children:"Delete"})]})]})]})},re=e=>{let{open:t,onClose:n,studentId:a,expenseDetailsId:i,onSave:d}=e;const{isDarkMode:c}=(0,s.useContext)(H.D),u=(0,S.A)("(min-width:600px)")?500:330,[p,_]=(0,s.useState)({Father_Monthly_Salary:"",Mother_Monthly_Salary:"",Spouse_Monthly_Salary:"",Applicant_Monthly_Salary:"",Rent_Income:"",Grants:"",Other_Income:"",Rent_Bond_Expense:"",Rates_Expense:"",Utilities_Expense:"",Groceries_Expense:"",Transport_Petrol_Expense:"",Telephone_Expense:"",Medical_Aid_Expense:"",Insurance_Expense:"",Other_Expense:"",total_income:0,total_expenses:0}),[x,y]=(0,s.useState)(!1);(0,s.useEffect)((()=>{t&&i?fetch(`https://willowtonbursary.co.za/api/expense-details/id/${i}`).then((e=>e.json())).then((e=>{e&&_({Father_Monthly_Salary:e.father_monthly_salary||"",Mother_Monthly_Salary:e.mother_monthly_salary||"",Spouse_Monthly_Salary:e.spouse_monthly_salary||"",Applicant_Monthly_Salary:e.applicant_monthly_salary||"",Rent_Income:e.rent_income||"",Grants:e.grants||"",Other_Income:e.other_income||"",Rent_Bond_Expense:e.rent_bond_expense||"",Rates_Expense:e.rates_expense||"",Utilities_Expense:e.utilities_expense||"",Groceries_Expense:e.groceries_expense||"",Transport_Petrol_Expense:e.transport_petrol_expense||"",Telephone_Expense:e.telephone_expense||"",Medical_Aid_Expense:e.medical_aid_expense||"",Insurance_Expense:e.insurance_expense||"",Other_Expense:e.other_expense||"",total_income:Number(e.total_income)||0,total_expenses:Number(e.total_expenses)||0})})).catch((e=>console.error("Error fetching expense details:",e))):_({Father_Monthly_Salary:"",Mother_Monthly_Salary:"",Spouse_Monthly_Salary:"",Applicant_Monthly_Salary:"",Rent_Income:"",Grants:"",Other_Income:"",Rent_Bond_Expense:"",Rates_Expense:"",Utilities_Expense:"",Groceries_Expense:"",Transport_Petrol_Expense:"",Telephone_Expense:"",Medical_Aid_Expense:"",Insurance_Expense:"",Other_Expense:"",total_income:0,total_expenses:0})}),[t,i]);const f=e=>{const{name:t,value:n}=e.target;_((e=>{const s={...e,[t]:n},a=["Father_Monthly_Salary","Mother_Monthly_Salary","Spouse_Monthly_Salary","Applicant_Monthly_Salary","Rent_Income","Grants","Other_Income"].reduce(((e,t)=>e+(parseFloat(s[t])||0)),0),r=["Rent_Bond_Expense","Rates_Expense","Utilities_Expense","Groceries_Expense","Transport_Petrol_Expense","Telephone_Expense","Medical_Aid_Expense","Insurance_Expense","Other_Expense"].reduce(((e,t)=>e+(parseFloat(s[t])||0)),0);return s.total_income=a,s.total_expenses=r,s}))},A=()=>{y(!1)};return(0,X.jsxs)(v.Ay,{anchor:"right",open:t,onClose:n,children:[(0,X.jsxs)(r.A,{sx:{width:u,height:"100%",display:"flex",flexDirection:"column",backgroundColor:c?"#2D3748":"#fff"},children:[(0,X.jsx)(r.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:c?"#1E293B":"#e1f5fe"},children:(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:c?"#F7FAFC":"#1E293B"},children:"Financial Details"})}),(0,X.jsx)(r.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,X.jsxs)(h.Ay,{container:!0,spacing:2,children:[["Applicant_Monthly_Salary","Father_Monthly_Salary","Mother_Monthly_Salary","Spouse_Monthly_Salary","Rent_Income","Grants","Other_Income"].map(((e,t)=>{const n=e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()));return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:n,name:e,type:"number",value:p[e],onChange:f,fullWidth:!0,variant:"outlined",InputProps:{inputMode:"decimal"},sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})},t)})),["Rent_Bond_Expense","Rates_Expense","Utilities_Expense","Groceries_Expense","Transport_Petrol_Expense","Telephone_Expense","Medical_Aid_Expense","Insurance_Expense","Other_Expense"].map(((e,t)=>{const n=e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()));return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:n,name:e,type:"number",value:p[e],onChange:f,fullWidth:!0,variant:"outlined",InputProps:{inputMode:"decimal"},sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})},t)})),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Total Income",value:p.total_income.toFixed(2),fullWidth:!0,variant:"outlined",sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputProps:{readOnly:!0},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Total Expenses",value:p.total_expenses.toFixed(2),fullWidth:!0,variant:"outlined",sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputProps:{readOnly:!0},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})})]})}),(0,X.jsx)(g.A,{}),(0,X.jsxs)(r.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,X.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,X.jsx)(l.A,{onClick:n,startIcon:(0,X.jsx)(B.A,{}),size:"small",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:c?"#F7FAFC":"#1E293B"},children:"Close"}),i&&(0,X.jsx)(l.A,{onClick:()=>{y(!0)},startIcon:(0,X.jsx)(D.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,X.jsx)(l.A,{onClick:()=>{const e=Object.keys(p).filter((e=>e.includes("Salary")||e.includes("Income"))).reduce(((e,t)=>e+(parseFloat(p[t])||0)),0),t=Object.keys(p).filter((e=>e.includes("Expense"))).reduce(((e,t)=>e+(parseFloat(p[t])||0)),0),s={...p,total_income:e.toString(),total_expenses:t.toString()},r=Object.keys(s).reduce(((e,t)=>{const n=s[t];return e[t]=""!==n?n.toString():n,e}),{});fetch(i?`https://willowtonbursary.co.za/api/expense-details/update/${i}`:"https://willowtonbursary.co.za/api/expense-details/insert",{method:i?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,student_details_portal_id:a})}).then((e=>e.json())).then((e=>{d(e),n()})).catch((e=>{console.error("Error saving expense details:",e)}))},startIcon:i?(0,X.jsx)(P.A,{}):(0,X.jsx)(C.A,{}),variant:"contained",size:"small",children:i?"Save":"Create"})]})]}),(0,X.jsxs)(F.A,{open:x,onClose:A,children:[(0,X.jsx)(E.A,{children:"Confirm Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete this record?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:A,color:"primary",children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(i)try{await fetch(`https://willowtonbursary.co.za/api/expense-details/delete/${i}`,{method:"DELETE"}),d(null),n(),y(!1)}catch(e){console.error("Error deleting expense details:",e)}},color:"error",children:"Delete"})]})]})]})},oe=e=>{let{open:t,onClose:n,studentId:a,assetLiabilityId:i,onSave:d}=e;const{isDarkMode:c}=(0,s.useContext)(H.D),u=(0,S.A)("(min-width:600px)")?500:330,[p,_]=(0,s.useState)({Gold_Silver:"",Cash_in_Bank:"",Investments:"",Liabilities:""}),[x,y]=(0,s.useState)(!1);(0,s.useEffect)((()=>{t&&i?fetch(`https://willowtonbursary.co.za/api/assets-liabilities/id/${i}`).then((e=>e.json())).then((e=>{e&&_({Gold_Silver:e.gold_silver||"",Cash_in_Bank:e.cash_in_bank||"",Investments:e.investments||"",Liabilities:e.liabilities||""})})).catch(console.error):_({Gold_Silver:"",Cash_in_Bank:"",Investments:"",Liabilities:""})}),[t,i]);const f=e=>{const{name:t,value:n}=e.target;_((e=>({...e,[t]:n})))},A=()=>{y(!1)};return(0,X.jsxs)(v.Ay,{anchor:"right",open:t,onClose:n,children:[(0,X.jsxs)(r.A,{sx:{width:u,height:"100%",display:"flex",flexDirection:"column",backgroundColor:c?"#2D3748":"#fff"},children:[(0,X.jsx)(r.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:c?"#1E293B":"#e1f5fe"},children:(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:c?"#F7FAFC":"#1E293B"},children:"Assets & Liabilities"})}),(0,X.jsx)(r.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,X.jsx)(h.Ay,{container:!0,spacing:2,children:Object.keys(p).map(((e,t)=>{const n=e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()));return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:n,name:e,value:p[e],onChange:f,fullWidth:!0,type:"number",variant:"outlined",InputProps:{inputMode:"decimal"},sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})},t)}))})}),(0,X.jsx)(g.A,{}),(0,X.jsxs)(r.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,X.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,X.jsx)(l.A,{onClick:n,startIcon:(0,X.jsx)(B.A,{}),size:"small",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:c?"#F7FAFC":"#1E293B"},children:"Close"}),i&&(0,X.jsx)(l.A,{onClick:()=>{y(!0)},startIcon:(0,X.jsx)(D.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,X.jsx)(l.A,{onClick:()=>{fetch(i?`https://willowtonbursary.co.za/api/assets-liabilities/update/${i}`:"https://willowtonbursary.co.za/api/assets-liabilities/insert",{method:i?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...p,student_details_portal_id:a})}).then((e=>e.json())).then((e=>{d(e),n()})).catch(console.error)},startIcon:i?(0,X.jsx)(P.A,{}):(0,X.jsx)(C.A,{}),variant:"contained",size:"small",children:i?"Save":"Create"})]})]}),(0,X.jsxs)(F.A,{open:x,onClose:A,children:[(0,X.jsx)(E.A,{children:"Confirm Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete this record?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:A,color:"primary",children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(i)try{await fetch(`https://willowtonbursary.co.za/api/assets-liabilities/delete/${i}`,{method:"DELETE"}),d(null),n(),y(!1)}catch(e){console.error("Error deleting asset/liability:",e)}},color:"error",children:"Delete"})]})]})]})},le=e=>{let{open:t,onClose:n,studentId:a,resultId:i,onSave:d}=e;const{isDarkMode:c}=(0,s.useContext)(H.D),[u,p]=(0,s.useState)({}),[_,x]=(0,s.useState)(!1),y=(0,S.A)("(min-width:600px)")?500:330;(0,s.useEffect)((()=>{t?i?fetch(`https://willowtonbursary.co.za/api/academic-results/id/${i}`).then((e=>e.json())).then((e=>{p({Results_Module:e.results_module||"",Results_Percentage:e.results_percentage||"",Results_Attachment:null,Results_Attachment_Name:e.results_attachment_name||"",id:e.id,Student_Details_Portal_id:e.student_details_portal_id||a})})):p({Results_Module:"",Results_Percentage:"",Results_Attachment:null,Results_Attachment_Name:"",Student_Details_Portal_id:a}):p({})}),[t,i,a]);const f=e=>{const{name:t,value:n}=e.target;p((e=>({...e,[t]:n})))},A=()=>{x(!1)};return(0,X.jsxs)(v.Ay,{anchor:"right",open:t,onClose:n,children:[(0,X.jsxs)(r.A,{sx:{width:y,height:"100%",display:"flex",flexDirection:"column",backgroundColor:c?"#2D3748":"#fff"},children:[(0,X.jsx)(r.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:c?"#1E293B":"#e1f5fe"},children:(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:c?"#F7FAFC":"#1E293B"},children:"Academic Result Details"})}),(0,X.jsx)(r.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,X.jsxs)(h.Ay,{container:!0,spacing:2,children:[(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Module Name",name:"Results_Module",fullWidth:!0,value:u.Results_Module||"",onChange:f,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Percentage",name:"Results_Percentage",fullWidth:!0,value:u.Results_Percentage||"",onChange:f,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Attachment Name",name:"Results_Attachment_Name",fullWidth:!0,value:u.Results_Attachment_Name||"",onChange:f,disabled:!0,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:c?"white":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsxs)(l.A,{variant:"outlined",component:"label",sx:{width:"100%"},children:["Upload File",(0,X.jsx)("input",{type:"file",hidden:!0,onChange:e=>{const t=e.target.files[0];t&&p((e=>({...e,Results_Attachment:t,Results_Attachment_Name:t.name})))}})]})}),u.id&&u.Results_Attachment_Name&&(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(l.A,{variant:"text",color:"primary",onClick:()=>{u.id&&window.open(`https://willowtonbursary.co.za/api/academic-results/view/${u.id}`,"_blank")},startIcon:(0,X.jsx)(M.A,{}),sx:{width:"100%"},children:"View/Download File"})})]})}),(0,X.jsx)(g.A,{}),(0,X.jsxs)(r.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,X.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,X.jsx)(l.A,{onClick:n,startIcon:(0,X.jsx)(B.A,{}),size:"small",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:c?"#F7FAFC":"#1E293B"},children:"Close"}),u.id&&(0,X.jsx)(l.A,{onClick:()=>{x(!0)},startIcon:(0,X.jsx)(D.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,X.jsx)(l.A,{onClick:async()=>{const e=!!u.id,t=e?`https://willowtonbursary.co.za/api/academic-results/update/${u.id}`:"https://willowtonbursary.co.za/api/academic-results/insert",s=e?"PUT":"POST",a=new FormData;a.append("Results_Module",u.Results_Module),a.append("Results_Percentage",u.Results_Percentage),a.append("Student_Details_Portal_id",u.Student_Details_Portal_id),u.Results_Attachment&&a.append("Results_Attachment",u.Results_Attachment);const r=await fetch(t,{method:s,body:a});if(r.ok){const e=await r.json();d(e),n()}else console.error("Failed to save academic result")},startIcon:u.id?(0,X.jsx)(P.A,{}):(0,X.jsx)(C.A,{}),variant:"contained",size:"small",children:u.id?"Save":"Create"})]})]}),(0,X.jsxs)(F.A,{open:_,onClose:A,children:[(0,X.jsx)(E.A,{children:"Confirm Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete this record?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:A,color:"primary",children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(u.id)try{await fetch(`https://willowtonbursary.co.za/api/academic-results/delete/${u.id}`,{method:"DELETE"}),d(null),n(),x(!1)}catch(e){console.error("Failed to delete academic result",e)}},color:"error",children:"Delete"})]})]})]})},ie=e=>{let{open:t,onClose:n,studentId:a,recordId:i,onSave:d}=e;const{isDarkMode:c}=(0,s.useContext)(H.D),[u,p]=(0,s.useState)({}),[_,x]=(0,s.useState)(!1),y=(0,S.A)("(min-width:600px)")?500:330;(0,s.useEffect)((()=>{t&&(i?fetch(`https://willowtonbursary.co.za/api/voluntary-service/id/${i}`).then((e=>e.json())).then((e=>{p({Organisation:e.organisation||"",Contact_Person:e.contact_person||"",Contact_Person_Number:e.contact_person_number||"",Hours_Contributed:e.hours_contributed||"",Proof_of_Service:null,Service_Attachment_Name:e.service_attachment_name||"",id:e.id,Student_Details_Portal_id:e.student_details_portal_id||a})})):p({Organisation:"",Contact_Person:"",Contact_Person_Number:"",Hours_Contributed:"",Proof_of_Service:null,Service_Attachment_Name:"",Student_Details_Portal_id:a}))}),[t,i,a]);const f=e=>{const{name:t,value:n}=e.target;p((e=>({...e,[t]:n})))},A=()=>{x(!1)};return(0,X.jsxs)(v.Ay,{anchor:"right",open:t,onClose:n,children:[(0,X.jsxs)(r.A,{sx:{width:y,height:"100%",display:"flex",flexDirection:"column",backgroundColor:c?"#2D3748":"#fff"},children:[(0,X.jsx)(r.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:c?"#1E293B":"#e1f5fe"},children:(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:c?"#F7FAFC":"#1E293B"},children:"Voluntary Service"})}),(0,X.jsx)(r.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,X.jsxs)(h.Ay,{container:!0,spacing:2,children:[(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Organisation",name:"Organisation",fullWidth:!0,value:u.Organisation||"",onChange:f,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Contact Person",name:"Contact_Person",fullWidth:!0,value:u.Contact_Person||"",onChange:f,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Contact Number",name:"Contact_Person_Number",fullWidth:!0,value:u.Contact_Person_Number||"",onChange:f,inputProps:{type:"tel",maxLength:10,pattern:"[0-9]{10}"},sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Hours Contributed",name:"Hours_Contributed",fullWidth:!0,value:u.Hours_Contributed||"",onChange:f,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Attachment Name",name:"Service_Attachment_Name",fullWidth:!0,value:u.Service_Attachment_Name||"",onChange:f,disabled:!0,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:c?"white":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsxs)(l.A,{variant:"outlined",component:"label",sx:{width:"100%"},children:["Upload Proof",(0,X.jsx)("input",{type:"file",hidden:!0,onChange:e=>{const t=e.target.files[0];t&&p((e=>({...e,Proof_of_Service:t,Service_Attachment_Name:t.name})))}})]})}),u.id&&u.Service_Attachment_Name&&(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(l.A,{variant:"text",color:"primary",onClick:()=>{u.id&&window.open(`https://willowtonbursary.co.za/api/voluntary-service/view/${u.id}`,"_blank")},startIcon:(0,X.jsx)(M.A,{}),sx:{width:"100%"},children:"View/Download File"})})]})}),(0,X.jsx)(g.A,{}),(0,X.jsxs)(r.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,X.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,X.jsx)(l.A,{onClick:n,startIcon:(0,X.jsx)(B.A,{}),size:"small",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:c?"#F7FAFC":"#1E293B"},children:"Close"}),u.id&&(0,X.jsx)(l.A,{onClick:()=>{x(!0)},startIcon:(0,X.jsx)(D.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,X.jsx)(l.A,{onClick:async()=>{const e=!!u.id,t=e?`https://willowtonbursary.co.za/api/voluntary-service/update/${u.id}`:"https://willowtonbursary.co.za/api/voluntary-service/insert",s=e?"PUT":"POST",a=new FormData;a.append("Organisation",u.Organisation),a.append("Contact_Person",u.Contact_Person),a.append("Contact_Person_Number",u.Contact_Person_Number),a.append("Hours_Contributed",u.Hours_Contributed),a.append("Student_Details_Portal_id",u.Student_Details_Portal_id),u.Proof_of_Service&&a.append("Proof_of_Service",u.Proof_of_Service);const r=await fetch(t,{method:s,body:a});if(r.ok){const e=await r.json();d(e),n()}else console.error("Failed to save voluntary service")},startIcon:u.id?(0,X.jsx)(P.A,{}):(0,X.jsx)(C.A,{}),variant:"contained",size:"small",children:u.id?"Save":"Create"})]})]}),(0,X.jsxs)(F.A,{open:_,onClose:A,children:[(0,X.jsx)(E.A,{children:"Confirm Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete this record?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:A,color:"primary",children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(u.id)try{await fetch(`https://willowtonbursary.co.za/api/voluntary-service/delete/${u.id}`,{method:"DELETE"}),d(null),n(),x(!1)}catch(e){console.error("Failed to delete voluntary service",e)}},color:"error",children:"Delete"})]})]})]})},de=e=>{let{open:t,onClose:n,studentId:a,recordId:i,onSave:d}=e;const{isDarkMode:c}=(0,s.useContext)(H.D),[u,p]=(0,s.useState)({}),[_,x]=(0,s.useState)(!1),[y,f]=(0,s.useState)(null),A=(0,S.A)("(min-width:600px)")?500:330,b=JSON.parse(localStorage.getItem("user")),j=`${null===b||void 0===b?void 0:b.first_name} ${null===b||void 0===b?void 0:b.last_name}`;(0,s.useEffect)((()=>{t&&(i?fetch(`https://willowtonbursary.co.za/api/payments/id/${i}`).then((e=>e.json())).then((e=>{const t=e.payments_date?(0,K.A)(e.payments_date,"MM/dd/yyyy",new Date):null;f(t),p({Payments_Expense_Type:e.payments_expense_type||"",Payments_Vendor:e.payments_vendor||"",Payments_Expense_Amount:e.payments_expense_amount||"",Payments_Date:e.payments_date||"",Payments_ET_Number:e.payments_et_number||"",Payments_Attachment_Name:e.payments_attachment_name||"",Proof_of_Payment:null,Payment_Created_By:e.payment_created_by||j,id:e.id,Student_Details_Portal_id:e.student_details_portal_id||a})})):(p({Payments_Expense_Type:"",Payments_Vendor:"",Payments_Expense_Amount:"",Payments_Date:"",Payments_ET_Number:"",Payments_Attachment_Name:"",Proof_of_Payment:null,Payment_Created_By:j,Student_Details_Portal_id:a}),f(null)))}),[t,i,a,j]);const w=e=>{const{name:t,value:n}=e.target;p((e=>({...e,[t]:n})))},L=()=>{x(!1)};return(0,X.jsx)(v.Ay,{anchor:"right",open:t,onClose:n,children:(0,X.jsxs)(r.A,{sx:{width:A,height:"100%",display:"flex",flexDirection:"column",backgroundColor:c?"#2D3748":"#fff"},children:[(0,X.jsx)(r.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:c?"#1E293B":"#e1f5fe"},children:(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:c?"#F7FAFC":"#1E293B"},children:"Payment Details"})}),(0,X.jsx)(r.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,X.jsxs)(h.Ay,{container:!0,spacing:2,children:[(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Expense Type",name:"Payments_Expense_Type",fullWidth:!0,value:u.Payments_Expense_Type||"",onChange:w,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Vendor",name:"Payments_Vendor",fullWidth:!0,value:u.Payments_Vendor||"",onChange:w,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Amount",name:"Payments_Expense_Amount",fullWidth:!0,value:u.Payments_Expense_Amount||"",onChange:w,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(V.$,{dateAdapter:J.h,children:(0,X.jsx)(G.l,{wrapperClassName:"datepicker",className:"datepicker",label:"Payments Date",value:y,onChange:e=>{f(e);const t=e?(0,Z.A)(e,"MM/dd/yyyy"):"";p((e=>({...e,Payments_Date:t})))},format:"MM/dd/yyyy"})})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"ET Number",name:"Payments_ET_Number",fullWidth:!0,value:u.Payments_ET_Number||"",onChange:w,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Attachment Name",name:"Payments_Attachment_Name",fullWidth:!0,value:u.Payments_Attachment_Name||"",disabled:!0,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:c?"white":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsxs)(l.A,{variant:"outlined",component:"label",sx:{width:"100%"},children:["Upload Proof",(0,X.jsx)("input",{type:"file",hidden:!0,onChange:e=>{const t=e.target.files[0];t&&p((e=>({...e,Proof_of_Payment:t,Payments_Attachment_Name:t.name})))}})]})}),u.id&&u.Payments_Attachment_Name&&(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(l.A,{variant:"text",color:"primary",onClick:()=>{u.id&&window.open(`https://willowtonbursary.co.za/api/payments/view/${u.id}`,"_blank")},startIcon:(0,X.jsx)(M.A,{}),sx:{width:"100%"},children:"View/Download File"})})]})}),(0,X.jsx)(g.A,{}),(0,X.jsxs)(r.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,X.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,X.jsx)(l.A,{onClick:n,startIcon:(0,X.jsx)(B.A,{}),size:"small",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:c?"#F7FAFC":"#1E293B"},children:"Close"}),u.id&&(0,X.jsx)(l.A,{onClick:()=>{x(!0)},startIcon:(0,X.jsx)(D.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,X.jsx)(l.A,{onClick:async()=>{const e=!!u.id,t=e?`https://willowtonbursary.co.za/api/payments/update/${u.id}`:"https://willowtonbursary.co.za/api/payments/insert",s=e?"PUT":"POST",a=new FormData;a.append("Payments_Expense_Type",u.Payments_Expense_Type),a.append("Payments_Vendor",u.Payments_Vendor),a.append("Payments_Expense_Amount",u.Payments_Expense_Amount),a.append("Payments_Date",u.Payments_Date),a.append("Payments_ET_Number",u.Payments_ET_Number),a.append("Payments_Attachment_Name",u.Payments_Attachment_Name),a.append("Payment_Created_By",u.Payment_Created_By),a.append("Student_Details_Portal_id",u.Student_Details_Portal_id),u.Proof_of_Payment&&a.append("Proof_of_Payment",u.Proof_of_Payment);const r=await fetch(t,{method:s,body:a});if(r.ok){const e=await r.json();d(e),n()}else console.error("Failed to save payment")},startIcon:u.id?(0,X.jsx)(P.A,{}):(0,X.jsx)(C.A,{}),variant:"contained",size:"small",children:u.id?"Save":"Create"})]}),(0,X.jsxs)(F.A,{open:_,onClose:L,children:[(0,X.jsx)(E.A,{children:"Confirm Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete this record?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:L,color:"primary",children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(u.id)try{await fetch(`https://willowtonbursary.co.za/api/payments/delete/${u.id}`,{method:"DELETE"}),d(null),n(),x(!1)}catch(e){console.error("Failed to delete payment",e)}},color:"error",children:"Delete"})]})]})]})})},ce=e=>{let{open:t,onClose:n,studentId:a,recordId:i,onSave:d}=e;const{isDarkMode:c}=(0,s.useContext)(H.D),[u,p]=(0,s.useState)({}),[_,x]=(0,s.useState)(!1),y=(0,S.A)("(min-width:600px)")?500:330,f=JSON.parse(localStorage.getItem("user")),A=`${null===f||void 0===f?void 0:f.first_name} ${null===f||void 0===f?void 0:f.last_name}`;(0,s.useEffect)((()=>{t&&(i?fetch(`https://willowtonbursary.co.za/api/interviews/id/${i}`).then((e=>e.json())).then((e=>{p({Interviewer_Name:e.interviewer_name||"",Year_of_Interview:e.year_of_interview||"",Interview_Q01:e.interview_q01||"",Interview_Q02:e.interview_q02||"",Interview_Q03:e.interview_q03||"",Interview_Q04:e.interview_q04||"",Interview_Q05:e.interview_q05||"",Interview_Q06:e.interview_q06||"",Interview_Q07:e.interview_q07||"",Interview_Q08:e.interview_q08||"",Interview_Q09:e.interview_q09||"",Interview_Q10:e.interview_q10||"",Interview_Q11:e.interview_q11||"",Interview_Q12:e.interview_q12||"",Interview_Q13:e.interview_q13||"",Interview_Q14:e.interview_q14||"",Interview_Q15:e.interview_q15||"",Interview_Q16:e.interview_q16||"",Interview_Q17:e.interview_q17||"",Interview_Q18:e.interview_q18||"",Interview_Q19:e.interview_q19||"",Interview_Q20:e.interview_q20||"",Interview_Q21:e.interview_q21||"",Interview_Q22:e.interview_q22||"",Interview_Q23:e.interview_q23||"",Interview_Q24:e.interview_q24||"",Interview_Created_By:e.interview_created_by||A,Date_Stamp:e.date_stamp||"",id:e.id,Student_Details_Portal_id:e.student_details_portal_id||a})})):p({Interviewer_Name:"",Year_of_Interview:"",Interview_Q01:"",Interview_Q02:"",Interview_Q03:"",Interview_Q04:"",Interview_Q05:"",Interview_Q06:"",Interview_Q07:"",Interview_Q08:"",Interview_Q09:"",Interview_Q10:"",Interview_Q11:"",Interview_Q12:"",Interview_Q13:"",Interview_Q14:"",Interview_Q15:"",Interview_Q16:"",Interview_Q17:"",Interview_Q18:"",Interview_Q19:"",Interview_Q20:"",Interview_Q21:"",Interview_Q22:"",Interview_Q23:"",Interview_Q24:"",Interview_Created_By:A,Date_Stamp:"",Student_Details_Portal_id:a}))}),[t,i,a,A]);const b=e=>{const{name:t,value:n}=e.target;p((e=>({...e,[t]:n})))},j=()=>{x(!1)};return(0,X.jsxs)(v.Ay,{anchor:"right",open:t,onClose:n,children:[(0,X.jsxs)(r.A,{sx:{width:y,height:"100%",display:"flex",flexDirection:"column",backgroundColor:c?"#2D3748":"#fff"},children:[(0,X.jsx)(r.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:c?"#1E293B":"#e1f5fe"},children:(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:c?"#F7FAFC":"#1E293B"},children:"Interview Details"})}),(0,X.jsx)(r.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,X.jsxs)(h.Ay,{container:!0,spacing:2,children:[(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Interviewer Name",name:"Interviewer_Name",fullWidth:!0,value:u.Interviewer_Name||"",onChange:b,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:"Year of Interview",name:"Year_of_Interview",fullWidth:!0,value:u.Year_of_Interview||"",onChange:b,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})}),["Briefly describe the applicant's family & social financial conditions?","Employment Status Score","Year of Study","Degree/Diploma Name","Number of Years to Qualify","Reason for Choosing the Course","Field of Study Score","APS Score (Matric) or University Average","Number of Failed Modules","Academic Results Score","Have you worked on any special projects or initiatives?","What extracurricular activities have you participated in?","How do you plan to contribute to your community post-graduation?","How would you inspire others to make an impact?","Community Work Involvement Score","How will you use your education and skills to make an impact?","Can you share academic awards or scholarships received?","Describe a role model and why they inspire you?","Why do you believe you deserve this bursary?","If not awarded this bursary, what are your plans?","Motivation Score","Total Score","Comments Section","Overall Impression"].map(((e,t)=>{const n=(t+1).toString().padStart(2,"0");return(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{label:e,name:`Interview_Q${n}`,fullWidth:!0,value:u[`Interview_Q${n}`]||"",onChange:b,sx:{backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:c?"#F7FAFC":"#1E293B"}}})},t)}))]})}),(0,X.jsx)(g.A,{}),(0,X.jsxs)(r.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,X.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,X.jsx)(l.A,{onClick:n,startIcon:(0,X.jsx)(B.A,{}),size:"small",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:c?"#F7FAFC":"#1E293B"},children:"Close"}),u.id&&(0,X.jsx)(l.A,{onClick:()=>{x(!0)},startIcon:(0,X.jsx)(D.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,X.jsx)(l.A,{onClick:async()=>{const e=!!u.id,t=e?`https://willowtonbursary.co.za/api/interviews/update/${u.id}`:"https://willowtonbursary.co.za/api/interviews/insert",s=e?"PUT":"POST",a=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(a.ok){const e=await a.json();d(e),n()}else console.error("Failed to save interview")},startIcon:u.id?(0,X.jsx)(P.A,{}):(0,X.jsx)(C.A,{}),variant:"contained",size:"small",children:u.id?"Save":"Create"})]})]}),(0,X.jsxs)(F.A,{open:_,onClose:j,children:[(0,X.jsx)(E.A,{children:"Confirm Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete this record?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:j,color:"primary",children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(u.id)try{await fetch(`https://willowtonbursary.co.za/api/interviews/delete/${u.id}`,{method:"DELETE"}),d(null),n(),x(!1)}catch(e){console.error("Failed to delete interview",e)}},color:"error",children:"Delete"})]})]})]})},ue=e=>{let{open:t,onClose:n,studentId:a,taskId:i,onSave:d}=e;const{isDarkMode:c}=(0,s.useContext)(H.D),u=(0,S.A)("(min-width:600px)")?500:330,p=JSON.parse(localStorage.getItem("user")),_="admin"===(null===p||void 0===p?void 0:p.user_type),x="student"===(null===p||void 0===p?void 0:p.user_type),[y,f]=(0,s.useState)(!1),[A,b]=(0,s.useState)({});(0,s.useEffect)((()=>{if(t)if(i)fetch(`https://willowtonbursary.co.za/api/tasks/id/${i}`).then((e=>e.json())).then((e=>{b(e)}));else{const e={student_details_portal_id:a,created_by:_&&(null===p||void 0===p?void 0:p.first_name)||"",task_description:"",task_status:"",task_comment:""};b(e)}else b({})}),[t,a,i,_,p]);const w=e=>{const{name:t,value:n}=e.target;b((e=>({...e,[t]:n})))},M=()=>{f(!1)},L={backgroundColor:c?"#1A202C":"#ffffff",color:c?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:c?"#F7FAFC":"#1E293B"},"& .MuiFormLabel-root":{color:c?"#F7FAFC":"#1E293B"}},z={style:{color:c?"#F7FAFC":"#1E293B"}},T=["Pending","Completed"],W=(e,t)=>{if("id"===e||"student_details_portal_id"===e||"task_date_stamp"===e||"created_by"===e)return null;let n=e.replace(/_/g," ");return n=n.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),"task_status"===e&&_?(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(j.A,{value:A[e]||"",onChange:(t,n)=>{return s=e,a=n,void b((e=>({...e,[s]:a})));var s,a},options:T,renderInput:t=>(0,X.jsx)(m.A,{...t,label:n,name:e,sx:L,InputLabelProps:z})})},t):(0,X.jsx)(h.Ay,{item:!0,xs:12,children:(0,X.jsx)(m.A,{name:e,label:n,fullWidth:!0,value:A[e]||"",onChange:w,sx:L,InputLabelProps:z,disabled:x||"task_status"===e&&!_,InputProps:{readOnly:"task_status"===e&&!_}})},t)};return(0,X.jsx)(v.Ay,{anchor:"right",open:t,onClose:n,children:(0,X.jsxs)(r.A,{sx:{width:u,height:"100%",display:"flex",flexDirection:"column",backgroundColor:c?"#2D3748":"#fff"},children:[(0,X.jsx)(r.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:c?"#1E293B":"#e1f5fe"},children:(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:c?"#F7FAFC":"#1E293B"},children:"Task Details"})}),(0,X.jsx)(r.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,X.jsx)(h.Ay,{container:!0,spacing:2,children:["task_description","task_status","task_comment"].map(((e,t)=>W(e,t)))})}),(0,X.jsx)(g.A,{}),(0,X.jsxs)(r.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,X.jsxs)(r.A,{sx:{display:"flex",gap:1},children:[(0,X.jsx)(l.A,{onClick:n,startIcon:(0,X.jsx)(B.A,{}),size:"small",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:c?"#F7FAFC":"#1E293B"},children:"Close"}),A.id&&_&&(0,X.jsx)(l.A,{onClick:()=>{f(!0)},startIcon:(0,X.jsx)(D.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:c?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),_&&(0,X.jsx)(l.A,{onClick:async()=>{if(!_)return;const e=!!A.id,t=e?`https://willowtonbursary.co.za/api/tasks/update/${A.id}`:"https://willowtonbursary.co.za/api/tasks/insert",s=e?"PUT":"POST",a={...A};e||delete a.id;try{const e=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(e.ok){const t=await e.json();d(t),n()}else console.error("Failed to save Task Details")}catch(r){console.error("Error saving Task Details",r)}},startIcon:A.id?(0,X.jsx)(P.A,{}):(0,X.jsx)(C.A,{}),variant:"contained",size:"small",children:A.id?"Save":"Create"})]}),(0,X.jsxs)(F.A,{open:y,onClose:M,children:[(0,X.jsx)(E.A,{children:"Confirm Deletion"}),(0,X.jsx)(I.A,{children:"Are you sure you want to delete this task?"}),(0,X.jsxs)(k.A,{children:[(0,X.jsx)(l.A,{onClick:M,color:"primary",children:"Cancel"}),(0,X.jsx)(l.A,{onClick:async()=>{if(A.id&&_)try{(await fetch(`https://willowtonbursary.co.za/api/tasks/delete/${A.id}`,{method:"DELETE"})).ok?(d(null),n(),f(!1)):console.error("Failed to delete Task Details")}catch(e){console.error("Error deleting Task Details",e)}},color:"error",children:"Delete"})]})]})]})})};var pe=n(47968),he=n(7549),_e=n(70258);const me=he.vv.create({page:{padding:30,fontSize:8,fontFamily:"Helvetica",lineHeight:1.5},header:{flexDirection:"row",alignItems:"center",borderBottom:"1 solid #ccc",marginBottom:15,paddingBottom:8},logo:{width:60,height:60,marginRight:10,objectFit:"contain"},title:{fontSize:14,fontWeight:"bold"},sectionTitle:{fontSize:10,fontWeight:"bold",backgroundColor:"#E1F5FE",padding:4,marginTop:12,marginBottom:4,textTransform:"uppercase"},fieldRow:{flexDirection:"row",flexWrap:"wrap",marginBottom:4},fieldBox:{width:"50%",flexDirection:"row",marginBottom:2,paddingRight:5},fieldLabel:{backgroundColor:"#e0e0e0",paddingHorizontal:4,fontWeight:"bold",minWidth:80},fieldValue:{paddingHorizontal:4},lineSeparator:{borderBottom:"0.5 solid #ccc",marginVertical:4}}),xe=e=>{let{label:t,value:n}=e;return(0,X.jsxs)(he.Ss,{style:me.fieldBox,children:[(0,X.jsxs)(he.EY,{style:me.fieldLabel,children:[(s=t,s.replace(/_/g," ").split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ")),":"]}),(0,X.jsx)(he.EY,{style:me.fieldValue,children:n||"\u2014"})]});var s},ye=e=>{let{title:t,data:n}=e;const s=Object.entries(n||{}).filter((e=>{let[t,n]=e;return null!==n&&""!==n}));return(0,X.jsxs)(he.Ss,{children:[(0,X.jsx)(he.EY,{style:me.sectionTitle,children:t}),(0,X.jsx)(he.Ss,{style:me.fieldRow,children:s.map(((e,t)=>{let[n,s]=e;return(0,X.jsx)(xe,{label:n,value:s},t)}))})]})},fe=e=>{let{title:t,data:n}=e;return n&&0!==n.length?(0,X.jsxs)(he.Ss,{children:[(0,X.jsx)(he.EY,{style:me.sectionTitle,children:t}),n.map(((e,t)=>(0,X.jsxs)(he.Ss,{wrap:!1,children:[(0,X.jsx)(he.Ss,{style:me.fieldRow,children:Object.entries(e).map(((e,t)=>{let[n,s]=e;return(0,X.jsx)(xe,{label:n,value:s},t)}))}),(0,X.jsx)(he.Ss,{style:me.lineSeparator})]},t)))]}):null},Ae=e=>{let{studentData:t}=e;return(0,X.jsx)(he.yo,{children:(0,X.jsxs)(he.YW,{size:"A4",style:me.page,children:[(0,X.jsxs)(he.Ss,{style:me.header,children:[(0,X.jsx)(he._V,{src:_e,style:me.logo}),(0,X.jsx)(he.EY,{style:me.title,children:"Student Information Report"})]}),(0,X.jsx)(ye,{title:"Student Details",data:t.student_details}),(0,X.jsx)(fe,{title:"About Me",data:[t.about_me]}),(0,X.jsx)(fe,{title:"Assets & Liabilities",data:[t.assets_liabilities]}),(0,X.jsx)(fe,{title:"Expense Details",data:[t.expense_details]}),(0,X.jsx)(fe,{title:"Interview",data:[t.interview]}),(0,X.jsx)(fe,{title:"University Details",data:[t.university_details]}),(0,X.jsx)(fe,{title:"Parents Details",data:t.parents_details}),(0,X.jsx)(fe,{title:"Attachments",data:t.attachments}),(0,X.jsx)(fe,{title:"Payments",data:t.payments}),(0,X.jsx)(fe,{title:"Results",data:t.results}),(0,X.jsx)(fe,{title:"Tasks",data:t.tasks}),(0,X.jsx)(fe,{title:"Voluntary Service",data:t.voluntary_service})]})})};var be=n(86213);const Ce=()=>{(0,a.Zp)();const[e,t]=(0,s.useState)(""),[n,j]=(0,s.useState)([]),[v,w]=(0,s.useState)(null),[g,F]=(0,s.useState)(null),[E,I]=(0,s.useState)(0),[k,S]=(0,s.useState)(!1),[B,P]=(0,s.useState)(!1),[D,M]=(0,s.useState)(null),[L,z]=(0,s.useState)(!1),[T,W]=(0,s.useState)(null),[R,N]=(0,s.useState)(!1),[O,$]=(0,s.useState)(null),[Q,U]=(0,s.useState)(!1),[Y,q]=(0,s.useState)(null),[G,V]=(0,s.useState)(!1),[J,K]=(0,s.useState)(null),[Z,_e]=(0,s.useState)(!1),[me,xe]=(0,s.useState)(null),[ye,fe]=(0,s.useState)(!1),[Ce,je]=(0,s.useState)(null),[ve,we]=(0,s.useState)(!1),[ge,Fe]=(0,s.useState)(null),[Ee,Ie]=(0,s.useState)(!1),[ke,Se]=(0,s.useState)(null),[Be,Pe]=(0,s.useState)(!1),[De,Me]=(0,s.useState)(null),[Le,ze]=(0,s.useState)(!1),[Te,We]=(0,s.useState)(null),[Re,Ne]=(0,s.useState)(null),[Oe,$e]=(0,s.useState)(null),[Qe,Ue]=(0,s.useState)(null),[Ye,qe]=(0,s.useState)(null),[He,Ge]=(0,s.useState)(null),[Ve,Je]=(0,s.useState)(null),[Ke,Ze]=(0,s.useState)(null),[Xe,et]=(0,s.useState)(null),[tt,nt]=(0,s.useState)(null),[st,at]=(0,s.useState)(null),[rt,ot]=(0,s.useState)(null),[lt,it]=(0,s.useState)(null),[dt,ct]=(0,s.useState)(!0),{isDarkMode:ut}=(0,s.useContext)(H.D),pt=JSON.parse(localStorage.getItem("user")),ht="admin"===(null===pt||void 0===pt?void 0:pt.user_type),_t="student"===(null===pt||void 0===pt?void 0:pt.user_type),mt={backgroundColor:ut?"#1e293b":"#e1f5fe",color:ut?"#ffffff":"#000000"},xt=e=>new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").replace(/\//g,"/"),yt=(0,s.useCallback)((async()=>{try{const e=JSON.parse(localStorage.getItem("user")),t=e.user_id;let n;if("admin"===e.user_type)n=await fetch("https://willowtonbursary.co.za/api/student-details");else{if("student"!==e.user_type||!t)return console.error("User type is neither admin nor student or user ID is missing"),{};n=await fetch(`https://willowtonbursary.co.za/api/student-detail/${t}`)}const s=await n.json();if(s){const e=Array.isArray(s)?s[0]:s;Object.keys(e).forEach((t=>{t.toLowerCase().includes("date_stamp")&&(e[t]=xt(e[t]))})),j(Array.isArray(s)?s:[e]),w(e),F(e.id)}return s}catch(e){return console.error("Error fetching student details:",e),{}}}),[]);(0,s.useEffect)((()=>{let e=!0;return ct(!0),g?be.A.get(`https://willowtonbursary.co.za/api/student-data/${g}`).then((t=>{e&&Ne(t.data)})).catch((e=>console.error("API error:",e))).finally((()=>{e&&ct(!1)})):ct(!1),()=>{e=!1}}),[g]),(0,s.useEffect)((()=>{let e=!0;return yt().then((t=>{e&&t.length>0&&(w(t[0]),F(t[0].id))})),()=>{e=!1}}),[yt]),(0,s.useEffect)((()=>{let e=!0;if(v){ct(!0);(async()=>{try{const t=await Promise.all(["about-me","parents-details","university-details","attachments","expenses-summary","assets-liabilities","academic-results","voluntary-services","payments","interviews","tasks"].map((e=>fetch(`https://willowtonbursary.co.za/api/${e}/${v.id}`).then((e=>e.json())).catch((()=>[]))))),n=e=>Array.isArray(e)?e.map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&t[e]&&(t[e]=xt(t[e]))})),t})):[];e&&($e(n(t[0])),Ue(n(t[1])),qe(n(t[2])),Ge(n(t[3])),Je(n(t[4])),Ze(n(t[5])),et(n(t[6])),nt(n(t[7])),at(n(t[8])),ot(n(t[9])),it(n(t[10])))}catch(t){console.error("Error fetching section data:",t)}finally{e&&ct(!1)}})()}return()=>{e=!1}}),[v]);const ft=async e=>{if(_t)w(null),F(null);else if(ht){const t=n.filter((t=>t.id!==e));if(t.length>0){const e=t[0];w(e),F(e.id)}else w(null),F(null);yt()}},At=_t&&!v,bt=(ht||_t)&&v,Ct=v,jt=[{label:"Show all",key:"show_all"},{label:"About Me",key:"about-me"},{label:"Parents Details",key:"parents-details"},{label:"University Details",key:"university-details"},{label:"Attachments",key:"attachments"},{label:"Financial Details",key:"expenses-summary"},{label:"Assets & Liabilities",key:"assets-liabilities"},{label:"Academic Results",key:"academic-results"},{label:"Voluntary Services",key:"voluntary-services"},{label:"Tasks",key:"tasks"}];ht&&jt.splice(9,0,{label:"Payments",key:"payments"},{label:"Interviews",key:"interviews"});const vt=e=>{if("student id passport number"===e.toLowerCase())return"ID/Passport Number";if("student willow relationship"===e.toLowerCase())return"Willowton Group Relationship";return e.replace(/^student /i,"").replace(/_/g,"").replace(/\b\w/g,(e=>e.toUpperCase()))},wt=e=>({"about-me":Oe,"parents-details":Qe,"university-details":Ye,attachments:He,"expenses-summary":Ve,"assets-liabilities":Ke,"academic-results":Xe,"voluntary-services":tt,payments:st,interviews:rt,tasks:lt}[e]||[]),gt=e=>{let{sectionKey:t,data:n}=e;return((e,t)=>{if(!t)return null;const n="about-me"===e,s="parents-details"===e,a="university-details"===e,h="attachments"===e,_="expenses-summary"===e,m="assets-liabilities"===e,x="academic-results"===e,y="voluntary-services"===e,f="payments"===e,A="interviews"===e,j="tasks"===e;return!f&&!A||ht?(0,X.jsxs)(r.A,{sx:{padding:0,border:"1px solid #ccc",marginBottom:2,backgroundColor:ut?"#1e293b":"white",color:mt.color},children:[(0,X.jsxs)(r.A,{sx:{padding:1,display:"flex",alignItems:"center",marginBottom:.5,borderBottom:1,borderBottomColor:"#ccc",height:40,backgroundColor:ut?"#1e293b":"#e1f5fe"},children:[(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",marginLeft:1},children:vt("expenses-summary"===e?"financial-details":e)}),Ct&&(n||s||a||h||_||m||x||y||f||A||j)&&(0,X.jsx)(l.A,{sx:{marginLeft:"auto",color:ut?"white":"black"},onClick:()=>{n&&(M(null),P(!0)),s&&(W(null),z(!0)),a&&($(null),N(!0)),h&&(q(null),U(!0)),_&&(K(null),V(!0)),m&&(xe(null),_e(!0)),x&&(je(null),fe(!0)),y&&(Fe(null),we(!0)),f&&(Se(null),Ie(!0)),A&&(Me(null),Pe(!0)),j&&(We(null),ze(!0))},children:(0,X.jsx)(C.A,{fontSize:"small"})})]}),t.length>0&&(0,X.jsxs)(i.A,{sx:{maxHeight:400,overflowY:"auto",display:"block"},children:[(0,X.jsx)(d.A,{children:(0,X.jsxs)(c.A,{children:[(0,X.jsx)(u.A,{sx:{fontWeight:"bold",width:"50px"}}),Object.keys(t[0]).filter((e=>"id"!==e&&"student_details_portal_id"!==e)).map(((e,t)=>(0,X.jsx)(u.A,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:300,fontWeight:"bold",textTransform:"capitalize",color:ut?"white":"black"},children:vt(e.replace(/_/g," "))},t)))]})}),(0,X.jsx)(p.A,{children:t.map(((e,t)=>(0,X.jsxs)(c.A,{children:[(0,X.jsx)(u.A,{sx:{width:"50px"},children:(n||s||a||h||_||m||x||y||f||A||j)&&(0,X.jsx)(b.A,{sx:{cursor:"pointer",fontSize:"large",color:ut?"white":"black"},onClick:()=>{n&&(M(e.id),P(!0)),s&&(W(e.id),z(!0)),a&&($(e.id),N(!0)),h&&(q(e.id),U(!0)),_&&(K(e.id),V(!0)),m&&(xe(e.id),_e(!0)),x&&(je(e.id),fe(!0)),y&&(Fe(e.id),we(!0)),f&&(Se(e.id),Ie(!0)),A&&(Me(e.id),Pe(!0)),j&&(We(e.id),ze(!0))}})}),Object.entries(e).map(((e,t)=>{let[n,s]=e;return"id"!==n&&"student_details_portal_id"!==n&&(0,X.jsx)(u.A,{sx:{color:ut?"white":"black"},children:"object"===typeof s&&null!==s?n.toLowerCase().includes("attachment")||n.toLowerCase().includes("proof_of_service")||n.toLowerCase().includes("proof_of_payment")?"\ud83d\udcce File attached":JSON.stringify(s):s},t)}))]},t)))})]})]}):null})(t,n)};return(0,X.jsxs)("div",{children:[(0,X.jsxs)(r.A,{sx:{padding:"12px",backgroundColor:ut?"#1e293b":"#e1f5fe",borderRadius:"8px",marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #ccc"},children:[(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:ut?"white":"black"},children:"Student Details"}),At&&(0,X.jsxs)(l.A,{variant:"contained",onClick:()=>{F(null),S(!0)},sx:{display:"flex",alignItems:"center",backgroundColor:ut?"white":"black",color:ut?"black":"white",padding:"2px 6px",textTransform:"none"},children:[(0,X.jsx)(C.A,{sx:{marginRight:1,fontSize:"small"}}),"Start Application"]})]}),(0,X.jsxs)(h.Ay,{container:!0,spacing:3,children:[ht&&(0,X.jsx)(h.Ay,{item:!0,xs:12,sm:3,md:2,children:(0,X.jsxs)(_.A,{sx:{border:"1px solid #ccc",backgroundColor:ut?"#1e293b":"white",color:mt.color},children:[(0,X.jsx)(r.A,{sx:{backgroundColor:ut?"#1e293b":"#e1f5fe",padding:"6px",borderBottom:ut?"1px solid white":"1px solid #ccc"},children:(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:ut?"white":"#1e293b",marginLeft:1},children:"Search"})}),(0,X.jsxs)(r.A,{sx:{padding:2},children:[(0,X.jsx)(m.A,{label:"Search",variant:"outlined",fullWidth:!0,value:e,onChange:e=>t(e.target.value),sx:{mb:1,borderRadius:1,"& .MuiOutlinedInput-root":{backgroundColor:ut?"#1e293b":"white","& fieldset":{borderColor:ut?"white":"#1e293b"},"&:hover fieldset":{borderColor:ut?"white":"#1e293b"},"&.Mui-focused fieldset":{borderColor:ut?"white":"#1e293b"}},"& .MuiInputBase-input":{color:ut?"white":"#1e293b"},"& .MuiInputBase-input::placeholder":{color:ut?"#B0B0B0":"#666"}},placeholder:"Search",InputLabelProps:{style:{color:ut?"#ffffff":"#000000"}}}),(0,X.jsx)("div",{style:{maxHeight:"300px",overflowY:"auto"},children:n.filter((t=>t.student_name.toLowerCase().includes(e.toLowerCase())||t.student_surname.toLowerCase().includes(e.toLowerCase()))).map(((e,t)=>(0,X.jsx)(x.A,{sx:{mb:.5,boxShadow:0,height:55,cursor:"pointer",backgroundColor:(null===v||void 0===v?void 0:v.id)===e.id?ut?"white":"#1e293b":"transparent",color:(null===v||void 0===v?void 0:v.id)===e.id?ut?"#1e293b":"white":"inherit","&:hover":{backgroundColor:ut?"white":"#1e293b",color:ut?"#1e293b":"white"}},onClick:()=>{w(e),F(e.id)},children:(0,X.jsxs)(y.A,{sx:{padding:"10px"},children:[(0,X.jsx)(o.A,{variant:"body1",sx:{fontWeight:"bold"},children:e.student_name}),(0,X.jsx)(o.A,{variant:"body2",children:e.student_surname})]})},t)))})]})]})}),(0,X.jsx)(h.Ay,{item:!0,xs:12,sm:9,md:_t?12:10,children:(0,X.jsxs)(_.A,{sx:{border:"1px solid #ccc",backgroundColor:ut?"#1e293b":"white",color:mt.color},children:[(0,X.jsxs)(r.A,{sx:{backgroundColor:ut?"#1e293b":"#e1f5fe",borderBottom:ut?"1px solid white":"1px solid #ccc",padding:"6px",display:"flex",justifyContent:"space-between"},children:[(0,X.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold",color:ut?"white":"#1e293b",marginLeft:1},children:"Student Details Portal"}),bt&&(0,X.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:0,margin:0,padding:0},children:[(0,X.jsxs)(l.A,{variant:"contained",onClick:()=>{S(!1),setTimeout((()=>S(!0)),50),F(null===v||void 0===v?void 0:v.id)},sx:{display:"flex",alignItems:"center",backgroundColor:ut?"white":"black",color:ut?"black":"white",padding:"2px 6px",margin:0,textTransform:"none"},children:[(0,X.jsx)(b.A,{sx:{marginRight:1,fontSize:"small"}}),"Edit"]}),(0,X.jsxs)(l.A,{variant:"contained",onClick:async()=>{if(v&&Re)try{const e=await(0,he.x8)((0,X.jsx)(Ae,{studentData:Re})).toBlob(),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t;const s=v.student_name||"Unknown",a=v.student_surname||"User";n.download=`${s} ${a} - Student Details PDF.pdf`,n.click(),URL.revokeObjectURL(t)}catch(e){console.error("Failed to generate PDF:",e)}else console.error("No selected student or student data available for PDF generation")},sx:{display:"flex",alignItems:"center",backgroundColor:ut?"white":"black",color:ut?"black":"white",padding:"2px 6px",margin:0,textTransform:"none",marginLeft:1},children:[(0,X.jsx)(pe.A,{sx:{marginRight:1,fontSize:"small"}}),"Download PDF"]})]})]}),dt?(0,X.jsx)(r.A,{sx:{padding:2},children:(0,X.jsx)(o.A,{variant:"body1",sx:{textAlign:"center"},children:"Loading..."})}):v?(0,X.jsx)(r.A,{sx:{padding:1.5},children:(0,X.jsx)(h.Ay,{container:!0,spacing:1,children:Object.entries(v).map(((e,t)=>{let[n,a]=e;return"id"!==n&&"user_id"!==n&&"employment_status_attachment"!==n&&(0,X.jsxs)(s.Fragment,{children:[(0,X.jsx)(h.Ay,{item:!0,xs:6,sx:{borderBottom:"1px solid #ccc",pb:"6px"},children:(0,X.jsx)(o.A,{variant:"body1",children:(0,X.jsx)("strong",{children:vt(n.replace(/_/g," "))})})}),(0,X.jsx)(h.Ay,{item:!0,xs:6,sx:{borderBottom:"1px solid #ccc",pb:"6px"},children:(0,X.jsx)(o.A,{variant:"body1",children:a})})]},t)}))})}):(0,X.jsx)(o.A,{variant:"body1",sx:{m:2,fontWeight:"bold"},children:"No Record Selected"}),(0,X.jsx)(r.A,{sx:{p:1,overflowX:"auto"},children:(0,X.jsx)(f.A,{value:E,onChange:(e,t)=>I(t),"aria-label":"tabs",sx:{"& .MuiTab-root":{fontWeight:"600",textTransform:"capitalize",mr:-2,color:ut?"white":"black"}},children:jt.map(((e,t)=>(0,X.jsx)(A.A,{label:e.label},t)))})}),(0,X.jsx)(r.A,{sx:{p:2},children:(e=>{const t=jt[e];return"show_all"===t.key?jt.filter((e=>"show_all"!==e.key)).map(((e,t)=>(ht||"payments"!==e.key&&"interviews"!==e.key)&&(0,X.jsx)(gt,{sectionKey:e.key,data:wt(e.key)},t))):(0,X.jsx)(gt,{sectionKey:t.key,data:wt(t.key)})})(E)})]})})]}),(0,X.jsx)(ee,{open:k,onClose:()=>S(!1),studentId:g,onSave:e=>{if(e&&"object"===typeof e&&e.id){const t={...e,...Object.keys(e).reduce(((t,n)=>(n.toLowerCase().includes("date")&&e[n]?t[n]=xt(e[n]):t[n]=e[n],t)),{})};j((n=>{const s=n.findIndex((t=>t.id===e.id));if(s>=0){const e=[...n];return e[s]=t,e}return[...n,t]})),w(t),F(t.id)}else console.error("Invalid savedStudent data:",e);S(!1),yt()},onDelete:ft}),(0,X.jsx)(te,{open:B,onClose:()=>{P(!1),M(null)},studentId:g,aboutMeId:D,onSave:()=>{g&&(async e=>{try{const t=await fetch(`https://willowtonbursary.co.za/api/about-me/${e}`),n=await t.json();if(Array.isArray(n)){const e=n.map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&(t[e]=xt(t[e]))})),t}));$e(e)}else $e([])}catch(t){console.error("Error refetching About Me:",t)}})(g),P(!1),M(null)}}),(0,X.jsx)(ne,{open:L,onClose:()=>{z(!1),W(null)},studentId:g,parentId:T,onSave:()=>{g&&(async e=>{try{const t=await fetch(`https://willowtonbursary.co.za/api/parents-details/${e}`),n=(await t.json()).map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&(t[e]=xt(t[e]))})),t}));Ue(n)}catch(t){console.error("Error fetching parent details:",t)}})(g),z(!1),W(null)}}),(0,X.jsx)(se,{open:R,onClose:()=>{N(!1),$(null)},studentId:g,universityDetailsId:O,onSave:()=>{g&&(async e=>{try{const t=await fetch(`https://willowtonbursary.co.za/api/university-details/${e}`),n=(await t.json()).map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&(t[e]=xt(t[e]))})),t}));qe(n)}catch(t){console.error("Error fetching university details:",t)}})(g),N(!1),$(null)}}),(0,X.jsx)(ae,{open:Q,onClose:()=>{U(!1),q(null)},studentId:g,attachmentId:Y,onSave:()=>{g&&(async e=>{try{const t=await fetch(`https://willowtonbursary.co.za/api/attachments/${e}`),n=(await t.json()).map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&(t[e]=xt(t[e]))})),t}));Ge(n)}catch(t){console.error("Error fetching attachments:",t)}})(g),U(!1),q(null)}}),(0,X.jsx)(re,{open:G,onClose:()=>{V(!1),K(null)},studentId:g,expenseDetailsId:J,onSave:()=>{g&&(async e=>{try{const t=await fetch(`https://willowtonbursary.co.za/api/expense-details/${e}`),n=(await t.json()).map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&(t[e]=xt(t[e]))})),t}));Je(n)}catch(t){console.error("Error fetching expense details:",t)}})(g),V(!1),K(null)}}),(0,X.jsx)(oe,{open:Z,onClose:()=>{_e(!1),xe(null)},studentId:g,assetLiabilityId:me,onSave:()=>{g&&(async e=>{try{const t=await fetch(`https://willowtonbursary.co.za/api/assets-liabilities/${e}`),n=(await t.json()).map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&(t[e]=xt(t[e]))})),t}));Ze(n)}catch(t){console.error("Error fetching assets & liabilities:",t)}})(g),_e(!1),xe(null)}}),(0,X.jsx)(le,{open:ye,onClose:()=>{fe(!1),je(null)},studentId:g,resultId:Ce,onSave:()=>{g&&(async e=>{try{const t=await fetch(`https://willowtonbursary.co.za/api/academic-results/${e}`),n=(await t.json()).map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&(t[e]=xt(t[e]))})),t}));et(n)}catch(t){console.error("Error fetching academic results:",t)}})(g),fe(!1),je(null)}}),(0,X.jsx)(ie,{open:ve,onClose:()=>{we(!1),Fe(null)},studentId:g,recordId:ge,onSave:()=>{g&&(async e=>{try{const t=await fetch(`https://willowtonbursary.co.za/api/voluntary-service/${e}`),n=(await t.json()).map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&(t[e]=xt(t[e]))})),t}));nt(n)}catch(t){console.error("Error fetching voluntary services:",t)}})(g),we(!1),Fe(null)}}),(0,X.jsx)(de,{open:Ee,onClose:()=>Ie(!1),studentId:g,recordId:ke,onSave:()=>{g&&(async e=>{try{const t=await fetch(`https://willowtonbursary.co.za/api/payments/${e}`),n=(await t.json()).map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&(t[e]=xt(t[e]))})),t}));at(n)}catch(t){console.error("Error fetching payments details:",t)}})(g),Ie(!1),Se(null)}}),(0,X.jsx)(ce,{open:Be,onClose:()=>Pe(!1),studentId:g,recordId:De,onSave:()=>{g&&(async e=>{try{const t=await fetch(`https://willowtonbursary.co.za/api/interviews/${e}`),n=(await t.json()).map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&(t[e]=xt(t[e]))})),t}));ot(n)}catch(t){console.error("Error fetching interview details:",t)}})(g),Pe(!1),Me(null)}}),(0,X.jsx)(ue,{open:Le,onClose:()=>{ze(!1),We(null)},studentId:g,taskId:Te,onSave:()=>{g&&(async e=>{try{const t=await fetch(`https://willowtonbursary.co.za/api/tasks/${e}`),n=(await t.json()).map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&(t[e]=xt(t[e]))})),t}));it(n)}catch(t){console.error("Error fetching tasks:",t)}})(g),ze(!1),We(null)}})]})}},50477:()=>{}}]);
//# sourceMappingURL=537.74d2f492.chunk.js.map