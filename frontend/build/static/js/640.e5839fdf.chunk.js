"use strict";(self.webpackChunkfrontends=self.webpackChunkfrontends||[]).push([[640],{59540:(e,t,s)=>{s.d(t,{A:()=>l});var n=s(59662),o=s(70579);const l=(0,n.A)((0,o.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward")},83640:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var n=s(65043),o=s(7353),l=s(94496),r=s(62559),i=s(17392),a=s(77739),c=s(70378),d=s(32143),u=s(74605),x=s(23217),h=s(39336),p=s(2050),m=s(48734),f=s(72221),b=s(79484),A=s(52879),g=s(47968),j=s(47805),C=s(88645),y=s(59540),k=s(37131),w=s(99389),S=s(30079),v=s(26240),z=s(85442),F=s(86213),L=s(11238),E=s(27415),R=(s(84713),s(70579));const D=function(){const{isDarkMode:e}=(0,n.useContext)(E.D),[t,s]=(0,n.useState)([]),[D,_]=(0,n.useState)(""),[W,I]=(0,n.useState)([]),[N,M]=(0,n.useState)([]),[B,P]=(0,n.useState)({}),[O,V]=(0,n.useState)(null),[X,T]=(0,n.useState)(!1),[H,U]=(0,n.useState)({key:null,direction:null}),[K,q]=(0,n.useState)(0),[G,J]=(0,n.useState)(10),[Q,Y]=(0,n.useState)(""),[Z,$]=(0,n.useState)(0),ee=(0,n.useRef)(null),te=(0,n.useRef)(null),se=Boolean(O),ne=(0,v.A)(),oe=(0,z.A)(ne.breakpoints.down("sm")),le=(0,n.useCallback)((e=>"student_id_passport_number"===e?"Student ID/Passport Number":e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))),[]),re=(0,n.useCallback)((e=>{const t=10*le(e).length+40;return Math.max(50,t)}),[le]),ie=(0,n.useCallback)((async()=>{try{var e,t;const n=await F.A.get("https://willowtonbursary.co.za/api/activity-log"),o=Array.isArray(n.data)?n.data:null!==(e=null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.records)&&void 0!==e?e:[];if(o.length>0){const e=Object.keys(o[0]).filter((e=>"id"!==e));I(e),M(e),P(e.reduce(((e,t)=>({...e,[t]:re(t)})),{}))}s(o)}catch(n){console.log("No Records Found"),s([])}}),[re]);(0,n.useEffect)((()=>{ie()}),[ie]),(0,n.useEffect)((()=>{const e=e=>{ee.current&&!ee.current.contains(e.target)&&T(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const ae=(0,n.useCallback)((e=>{if(te.current){const{col:t,startX:s,startWidth:n}=te.current,o=Math.max(50,n+(e.clientX-s));P((e=>({...e,[t]:o})))}}),[]),ce=(0,n.useCallback)((()=>{te.current=null,document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",ce),document.body.style.userSelect=""}),[ae]),de=(0,n.useCallback)(((e,t)=>{e.preventDefault(),te.current={col:t,startX:e.clientX,startWidth:B[t]||re(t)},document.addEventListener("mousemove",ae),document.addEventListener("mouseup",ce),document.body.style.userSelect="none"}),[B,re,ae,ce]),ue=t.filter((e=>N.some((t=>{const s=e[t];return null!=s&&s.toString().toLowerCase().includes(D.toLowerCase())})))).sort(((e,t)=>{if(!H.key||!H.direction)return 0;const s=e[H.key],n=t[H.key];return null==s||null==n?0:"asc"===H.direction?s.toString().localeCompare(n.toString()):n.toString().localeCompare(s.toString())})),xe=ue.slice(K*G,(K+1)*G);(0,n.useEffect)((()=>{$(ue.length)}),[ue]);const he=W.filter((e=>{const t=Q.toLowerCase(),s=e.toLowerCase(),n=le(e).toLowerCase();return s.includes(t)||n.includes(t)}));return(0,R.jsxs)(o.A,{sx:{backgroundColor:e?"#2D3748":"#F7FAFC",minHeight:"100vh",p:2},className:e?"dark-mode":"",children:[(0,R.jsxs)(o.A,{sx:{padding:"12px",backgroundColor:e?"#1e293b":"#e1f5fe",borderRadius:"8px",marginBottom:"12px",border:"1px solid #ccc",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,R.jsx)(l.A,{variant:"h6",sx:{color:e?"white":"black",fontWeight:"bold"},children:"Activity Logs"}),(0,R.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,R.jsx)(o.A,{ref:ee,sx:{width:X?oe?120:220:0,height:36,overflow:"hidden",transition:"width 0.3s ease-in-out, opacity 0.3s ease-in-out",display:"flex",alignItems:"center",opacity:X?1:0},children:(0,R.jsx)(r.Ay,{placeholder:"Search",value:D,onChange:e=>{_(e.target.value),q(0)},sx:{backgroundColor:e?"#1e293b":"#fff",color:e?"white":"black",px:1.5,height:"100%",fontSize:"0.85rem",borderRadius:1,border:"1px solid "+(e?"#4A5568":"#CBD5E0"),width:"100%",minWidth:0},startAdornment:(0,R.jsx)(b.A,{sx:{mr:1},fontSize:"small"}),endAdornment:D&&(0,R.jsx)(i.A,{size:"small",onClick:()=>{_(""),q(0)},sx:{color:e?"white":"black"},children:(0,R.jsx)(S.A,{fontSize:"small"})})})}),(0,R.jsx)(a.A,{title:X?"Close Search":"Search",children:(0,R.jsx)(i.A,{size:"small",onClick:()=>T((e=>!e)),sx:{color:e?"white":"black"},children:X?(0,R.jsx)(S.A,{fontSize:"small"}):(0,R.jsx)(b.A,{fontSize:"small"})})}),!(oe&&X)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(l.A,{sx:{color:e?"white":"black",fontSize:"1rem"},children:"|"}),(0,R.jsx)(a.A,{title:"Column Visibility",children:(0,R.jsx)(i.A,{size:"small",onClick:e=>V(e.currentTarget),sx:{color:e?"white":"black"},children:(0,R.jsx)(A.A,{fontSize:"small"})})}),(0,R.jsx)(l.A,{sx:{color:e?"white":"black",fontSize:"1rem"},children:"|"}),(0,R.jsx)(a.A,{title:"Export to Excel",children:(0,R.jsx)(i.A,{size:"small",onClick:()=>{const e=t.map((e=>Object.fromEntries(N.map((t=>[le(t),e[t]]))))),s=L.Wp.json_to_sheet(e),n=L.Wp.book_new();L.Wp.book_append_sheet(n,s,"Report"),L._h(n,"student_report.xlsx")},sx:{color:e?"white":"black"},children:(0,R.jsx)(g.A,{fontSize:"small"})})})]})]})]}),(0,R.jsxs)(c.A,{anchorEl:O,open:se,onClose:()=>V(null),PaperProps:{sx:{minWidth:200,maxHeight:300,p:1,backgroundColor:e?"#1e293b":"#fff",color:e?"#F7FAFC":"#1e293b",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.15)",borderRadius:2}},children:[(0,R.jsx)(r.Ay,{autoFocus:!0,placeholder:"Search Columns",value:Q,onChange:e=>Y(e.target.value),onKeyDown:e=>e.stopPropagation(),sx:{mb:1,px:1,fontSize:"0.7rem",backgroundColor:e?"#334155":"#f1f5f9",borderRadius:1,width:"100%",height:"28px",color:e?"#F7FAFC":"#1e293b"}}),he.map((e=>(0,R.jsx)(d.A,{dense:!0,children:(0,R.jsx)(u.A,{control:(0,R.jsx)(x.A,{size:"small",checked:N.includes(e),onChange:()=>(e=>{if(N.includes(e))M((t=>t.filter((t=>t!==e))));else{const t=W.indexOf(e),s=[...N];s.splice(t,0,e),M(s)}})(e)}),label:(0,R.jsx)("span",{style:{fontSize:"0.7rem"},children:le(e)})})},e))),(0,R.jsx)(h.A,{sx:{my:1}}),(0,R.jsxs)(d.A,{dense:!0,onClick:()=>{M(W),P(W.reduce(((e,t)=>({...e,[t]:re(t)})),{})),V(null)},children:[(0,R.jsx)(p.A,{children:(0,R.jsx)(j.A,{fontSize:"small"})}),(0,R.jsx)(m.A,{primary:"Reset Columns",primaryTypographyProps:{fontSize:"0.7rem"}})]})]}),(0,R.jsx)("div",{className:"generic-table-container",children:(0,R.jsxs)("table",{className:"generic-table",style:{backgroundColor:e?"#1e293b":"#fff",tableLayout:"fixed"},children:[(0,R.jsx)("thead",{children:(0,R.jsx)("tr",{children:N.map((t=>(0,R.jsxs)("th",{style:{color:e?"white":"#1e293b",cursor:"pointer",position:"relative",width:B[t]||re(t),minWidth:50},onClick:e=>{"resize-handle"!==e.target.className&&(e=>{U((t=>t.key===e?{key:e,direction:"asc"===t.direction?"desc":"desc"===t.direction?null:"asc"}:{key:e,direction:"asc"})),q(0)})(t)},children:[(0,R.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingRight:"10px"},children:[(0,R.jsx)("span",{children:le(t)}),(0,R.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[H.key===t&&"asc"===H.direction&&(0,R.jsx)(y.A,{fontSize:"small"}),H.key===t&&"desc"===H.direction&&(0,R.jsx)(C.A,{fontSize:"small"}),H.key===t&&null===H.direction]})]}),(0,R.jsx)("span",{className:"resize-handle",onMouseDown:e=>de(e,t),style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",cursor:"col-resize",background:e?"#4A5568":"#CBD5E0",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none"},children:(0,R.jsx)("span",{style:{fontSize:"12px",color:e?"#F7FAFC":"#1e293b"},children:"|"})})]},t)))})}),(0,R.jsx)("tbody",{children:xe.length>0?xe.map((t=>(0,R.jsx)("tr",{children:N.map((s=>{const n="activity_type"===s;return(0,R.jsx)("td",{style:{color:e?"white":"#1e293b",padding:"8px",whiteSpace:"nowrap",width:B[s]||re(s),minWidth:50,overflow:"hidden",textOverflow:"ellipsis"},children:n?(0,R.jsx)("span",{style:{backgroundColor:"Login"===t[s]?"#34d399":"Logout"===t[s]?"#f87171":"#9ca3af",color:"#fff",padding:"2px 8px",borderRadius:"12px",fontSize:"0.75rem",textTransform:"capitalize",display:"inline-block"},children:t[s]}):t[s]},s)}))},t.id))):(0,R.jsx)("tr",{children:(0,R.jsx)("td",{colSpan:N.length,className:"no-matching-records",children:"No matching records found"})})})]})}),(0,R.jsx)(o.A,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:(0,R.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:2,border:"1px solid",borderColor:e?"#4A5568":"#CBD5E0",borderRadius:"8px",padding:"6px 12px",backgroundColor:e?"#2D3748":"#F7FAFC",color:e?"#F7FAFC":"#1e293b"},children:[(0,R.jsx)(l.A,{variant:"caption",sx:{whiteSpace:"nowrap"},children:"Rows per page:"}),(0,R.jsx)(f.A,{value:G,onChange:e=>{J(parseInt(e.target.value)),q(0)},size:"small",sx:{color:e?"#F7FAFC":"#1e293b",".MuiSelect-icon":{color:e?"#F7FAFC":"#1e293b"},backgroundColor:e?"#4A5568":"#E2E8F0",borderRadius:"4px",fontSize:"0.85rem",minWidth:"60px"},children:[10,15,25,50,100].map((e=>(0,R.jsx)(d.A,{value:e,children:e},e)))}),(0,R.jsxs)(l.A,{variant:"caption",sx:{whiteSpace:"nowrap"},children:[K*G+1,"-",Math.min((K+1)*G,Z)," of ",Z]}),(0,R.jsx)(i.A,{onClick:()=>q((e=>Math.max(0,e-1))),disabled:0===K,size:"small",sx:{color:e?"#F7FAFC":"#1e293b"},children:(0,R.jsx)(k.A,{fontSize:"small"})}),(0,R.jsx)(i.A,{onClick:()=>q((e=>(e+1)*G<Z?e+1:e)),disabled:(K+1)*G>=Z,size:"small",sx:{color:e?"#F7FAFC":"#1e293b"},children:(0,R.jsx)(w.A,{fontSize:"small"})})]})})]})}},84713:()=>{},88645:(e,t,s)=>{s.d(t,{A:()=>l});var n=s(59662),o=s(70579);const l=(0,n.A)((0,o.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward")}}]);
//# sourceMappingURL=640.e5839fdf.chunk.js.map