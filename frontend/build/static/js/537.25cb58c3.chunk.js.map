{"version":3,"file":"static/js/537.25cb58c3.chunk.js","mappings":"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","sources":["components/lov.js","pages/Drawer/StudentDetailDrawer.js","pages/Drawer/AboutUsDrawer.js","pages/Drawer/ParentsDrawer.js","pages/Drawer/UniversityDetailsDrawer.js","pages/Drawer/AttachmentsDrawer.js","pages/Drawer/ExpenseDetailsDrawer.js","pages/Drawer/AssetsLiabilitiesDrawer.js","pages/Drawer/AcademicResultsDrawer.js","pages/Drawer/VoluntaryServiceDrawer.js","pages/Drawer/PaymentDrawer.js","pages/Drawer/InterviewDrawer.js","pages/Drawer/TaskDetailsDrawer.js","pages/StudentPDFDocument.js","pages/StudentDetails.js"],"sourcesContent":["export const races = [\r\n  \"Black\",\r\n  \"Indian\",\r\n  \"Caucasian\",\r\n  \"Coloured\"\r\n];\r\n\r\nexport const provinces = [\r\n  \"Eastern Cape\",\r\n  \"Free State\",\r\n  \"Gauteng\",\r\n  \"KwaZulu-Natal\",\r\n  \"Limpopo\",\r\n  \"Mpumalanga\",\r\n  \"Northern Cape\",\r\n  \"North West\",\r\n  \"Western Cape\"\r\n];\r\n\r\nexport const maritalStatus = [\r\n  \"Divorced\",\r\n  \"Married\",\r\n  \"Single\",\r\n  \"Widowed\"\r\n];\r\n\r\nexport const yes_no = [\r\n  \"Yes\",\r\n  \"No\"\r\n];\r\n\r\nexport const employmentStatus = [\r\n  \"Disabled Grant\",\r\n  \"Full Time Employed\",\r\n  \"Part-Time Employed\",\r\n  \"Pensioner\",\r\n  \"Self Employed\",\r\n  \"Student\",\r\n  \"Unemployed\"\r\n];\r\n\r\nexport const highestEducation = [\r\n  \"NQF 5 - Matric/Higher Certificate\",\r\n  \"NQF 6 - Diploma\",\r\n  \"NQF 7 - Degree\",\r\n  \"NQF 8 - Honors/Postgraduate\",\r\n  \"NQF 9 - Masters\",\r\n  \"NQF 10 - PhD/Doctorate\"\r\n];\r\n\r\nexport const semesters = [\r\n  \"1st Semester (January-June)\",\r\n  \"2nd Semester (July-December)\"\r\n];\r\n\r\nexport const financeType = [\r\n  \"Staff Bursary\",\r\n  \"Student Loan\",\r\n  \"Zakah\",\r\n  \"Willowton Group Family Member\",\r\n  \"Willowton Group Director Referral\"\r\n];\r\n\r\nexport const religions = [\r\n  \"African beliefs\",\r\n  \"Christianity\",\r\n  \"Hinduism\",\r\n  \"Islam\",\r\n  \"Judaism\"\r\n];\r\n\r\nexport const studentType = [\r\n  \"Currently in matric\",\r\n  \"Completed Matric\",\r\n  \"Currently in university\"\r\n];\r\n\r\nexport const nationality = [\r\n  \"Angola\",\r\n  \"Congo\",\r\n  \"Equatorial Guinea\",\r\n  \"Kenya\",\r\n  \"Mozambique\",\r\n  \"Nigeria\",\r\n  \"Uganda\",\r\n  \"India\",\r\n  \"Botswana\",\r\n  \"Central African Republic\",\r\n  \"Ghana\",\r\n  \"Malawi\",\r\n  \"Pakistan\",\r\n  \"South African\",\r\n  \"Bangladesh\",\r\n  \"Somalian\",\r\n  \"Lesotho\",\r\n  \"Ivory Coast\",\r\n  \"Burundi\"\r\n];\r\n\r\nexport const emergencyContactRelationship = [\r\n  \"Mother\",\r\n  \"Father\",\r\n  \"Brother\",\r\n  \"Sister\",\r\n  \"Aunty\",\r\n  \"Uncle\",\r\n  \"Grand Mother\",\r\n  \"Grand Father\"\r\n];\r\n\r\nexport const parentRelationship = [\r\n  \"Mother\",\r\n  \"Father\"\r\n];","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  Drawer,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Divider,\r\n  Autocomplete,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n} from \"@mui/material\";\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\r\nimport {\r\n  studentType,\r\n  religions,\r\n  financeType,\r\n  races,\r\n  maritalStatus,\r\n  employmentStatus,\r\n  highestEducation,\r\n  nationality,\r\n  provinces,\r\n  yes_no,\r\n} from \"../../components/lov\";\r\nimport { ThemeContext } from '../../config/ThemeContext';\r\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\r\nimport { LocalizationProvider } from \"@mui/x-date-pickers/LocalizationProvider\";\r\nimport { AdapterDateFns } from \"@mui/x-date-pickers/AdapterDateFns\";\r\nimport { format, parse } from 'date-fns';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst StudentDetailDrawer = ({ open, onClose, studentId, onSave, onDelete }) => {\r\n  const { isDarkMode } = useContext(ThemeContext);\r\n  const [selectedDate, setSelectedDate] = useState(null);\r\n  const [emailError, setEmailError] = useState(\"\");\r\n  const [whatsappError, setWhatsappError] = useState(\"\");\r\n  const [alternativeError, setAlternativeError] = useState(\"\");\r\n  const [emergencyError, setEmergencyError] = useState(\"\");\r\n  const [nameError, setNameError] = useState(\"\");\r\n  const [surnameError, setSurnameError] = useState(\"\");\r\n  const [emergencyContactOption, setEmergencyContactOption] = useState(\"\");\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n  const [deleteAttachmentConfirmationOpen, setDeleteAttachmentConfirmationOpen] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const isLargeScreen = useMediaQuery(\"(min-width:600px)\");\r\n  const drawerWidth = isLargeScreen ? 500 : 330;\r\n\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  const userType = user?.user_type;\r\n  const isAdmin = userType === \"admin\";\r\n\r\n  const relationshipTypes = [\r\n    \"Staff\",\r\n    \"Dependent of Staff\",\r\n    \"Family\",\r\n    \"Referral\",\r\n    \"Director/Board Member or stakeholder\"\r\n  ];\r\n\r\n  const [formData, setFormData] = useState({\r\n    student_name: \"\",\r\n    student_surname: \"\",\r\n    student_nationality: \"\",\r\n    student_id_passport_number: \"\",\r\n    student_type: \"\",\r\n    student_religion: \"\",\r\n    student_finance_type: \"\",\r\n    student_whatsapp_number: \"\",\r\n    student_alternative_number: \"\",\r\n    student_email_address: \"\",\r\n    student_highest_education: \"\",\r\n    student_home_address: \"\",\r\n    student_suburb: \"\",\r\n    student_area_code: \"\",\r\n    student_province: \"\",\r\n    student_date_of_birth: \"\",\r\n    student_race: \"\",\r\n    student_marital_status: \"\",\r\n    student_employment_status: \"\",\r\n    student_job_title: \"\",\r\n    student_company_of_employment: \"\",\r\n    student_current_salary: \"\",\r\n    student_number_of_siblings: \"\",\r\n    student_siblings_bursary: \"\",\r\n    student_willow_relationship: \"\",\r\n    relation_type: \"\",\r\n    relation_hr_contact: \"\",\r\n    relation_branch: \"\",\r\n    relation_name: \"\",\r\n    relation_surname: \"\",\r\n    relation_employee_code: \"\",\r\n    relation_reference: \"\",\r\n    student_emergency_contact_name: \"\",\r\n    student_emergency_contact_number: \"\",\r\n    student_emergency_contact_relationship: \"\",\r\n    student_emergency_contact_address: \"\",\r\n    student_status: \"Pending\",\r\n    student_status_comment: \"\",\r\n    employment_status_attachment: null,\r\n    employment_status_attachment_name: \"\",\r\n  });\r\n\r\n  const statusOptions = [\"Received\", \"Pending\", \"Approved\", \"Declined\"];\r\n\r\n  const validateEmail = (email) => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return emailRegex.test(email);\r\n  };\r\n\r\n  const validateNumber = (number) => {\r\n    const numberRegex = /^\\d{10}$/;\r\n    return numberRegex.test(number);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      if (studentId) {\r\n        const fetchStudentData = async () => {\r\n          setIsLoading(true);\r\n          try {\r\n            const response = await fetch(`${API_BASE_URL}/student-details/${studentId}`);\r\n            if (!response.ok) {\r\n              throw new Error(`Failed to fetch student data: ${response.statusText}`);\r\n            }\r\n            const data = await response.json();\r\n            const dates = data.student_date_of_birth ? parse(data.student_date_of_birth, 'dd/MM/yyyy', new Date()) : null;\r\n            setSelectedDate(dates);\r\n            setFormData((prev) => ({\r\n              ...prev,\r\n              ...data,\r\n              student_date_of_birth: dates,\r\n              student_status: data.student_status || \"Pending\",\r\n              student_status_comment: data.student_status_comment || \"\",\r\n              relation_type: data.relation_type || \"\",\r\n              relation_hr_contact: data.relation_hr_contact || \"\",\r\n              relation_branch: data.relation_branch || \"\",\r\n              relation_name: data.relation_name || \"\",\r\n              relation_surname: data.relation_surname || \"\",\r\n              relation_employee_code: data.relation_employee_code || \"\",\r\n              relation_reference: data.relation_reference || \"\",\r\n              employment_status_attachment: null,\r\n              employment_status_attachment_name: data.employment_status_attachment_name || \"\",\r\n            }));\r\n            setEmergencyContactOption(data.student_emergency_contact_name ? \"Add new\" : \"\");\r\n            setEmailError(data.student_email_address && !validateEmail(data.student_email_address) ? \"Please enter a valid email address\" : \"\");\r\n            setWhatsappError(data.student_whatsapp_number && !validateNumber(data.student_whatsapp_number) ? \"WhatsApp number must be exactly 10 digits\" : \"\");\r\n            setAlternativeError(data.student_alternative_number && !validateNumber(data.student_alternative_number) ? \"Alternative number must be exactly 10 digits\" : \"\");\r\n            setEmergencyError(data.student_emergency_contact_number && !validateNumber(data.student_emergency_contact_number) ? \"Emergency contact number must be exactly 10 digits\" : \"\");\r\n            setNameError(data.student_name ? \"\" : \"Student name is required\");\r\n            setSurnameError(data.student_surname ? \"\" : \"Student surname is required\");\r\n          } catch (error) {\r\n            console.error(\"Error fetching student data:\", error);\r\n            setErrorMessage(\"Failed to load student data. Please try again.\");\r\n          } finally {\r\n            setIsLoading(false);\r\n          }\r\n        };\r\n        fetchStudentData();\r\n      } else {\r\n        setSelectedDate(null);\r\n        setFormData({\r\n          student_name: '',\r\n          student_surname: '',\r\n          student_nationality: '',\r\n          student_id_passport_number: '',\r\n          student_type: '',\r\n          student_religion: '',\r\n          student_finance_type: '',\r\n          student_whatsapp_number: '',\r\n          student_alternative_number: '',\r\n          student_email_address: '',\r\n          student_highest_education: '',\r\n          student_home_address: '',\r\n          student_suburb: '',\r\n          student_area_code: '',\r\n          student_province: '',\r\n          student_date_of_birth: '',\r\n          student_race: '',\r\n          student_marital_status: '',\r\n          student_employment_status: '',\r\n          student_job_title: '',\r\n          student_company_of_employment: '',\r\n          student_current_salary: '',\r\n          student_number_of_siblings: '',\r\n          student_siblings_bursary: '',\r\n          student_willow_relationship: '',\r\n          relation_type: '',\r\n          relation_hr_contact: '',\r\n          relation_branch: '',\r\n          relation_name: '',\r\n          relation_surname: '',\r\n          relation_employee_code: '',\r\n          relation_reference: '',\r\n          student_emergency_contact_name: '',\r\n          student_emergency_contact_number: '',\r\n          student_emergency_contact_relationship: '',\r\n          student_emergency_contact_address: '',\r\n          student_status: 'Pending',\r\n          student_status_comment: '',\r\n          employment_status_attachment: null,\r\n          employment_status_attachment_name: '',\r\n        });\r\n        setEmergencyContactOption(\"\");\r\n        setEmailError(\"\");\r\n        setWhatsappError(\"\");\r\n        setAlternativeError(\"\");\r\n        setEmergencyError(\"\");\r\n        setNameError(\"\");\r\n        setSurnameError(\"\");\r\n        setErrorMessage(\"\");\r\n      }\r\n    }\r\n  }, [open, studentId]);\r\n\r\n  const handleDateChange = (newDate) => {\r\n    setSelectedDate(newDate);\r\n    const formattedDate = newDate ? format(newDate, 'MM/dd/yyyy') : '';\r\n    setFormData(prev => ({ ...prev, student_date_of_birth: formattedDate }));\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    let sanitizedValue = value;\r\n\r\n    if ([\"student_whatsapp_number\", \"student_alternative_number\", \"student_emergency_contact_number\"].includes(name)) {\r\n      sanitizedValue = value.replace(/\\D/g, \"\").slice(0, 10);\r\n    }\r\n\r\n    setFormData((prevState) => ({ ...prevState, [name]: sanitizedValue }));\r\n\r\n    if (name === \"student_name\") {\r\n      setNameError(sanitizedValue ? \"\" : \"Student name is required\");\r\n    }\r\n\r\n    if (name === \"student_surname\") {\r\n      setSurnameError(sanitizedValue ? \"\" : \"Student surname is required\");\r\n    }\r\n\r\n    if (name === \"student_email_address\") {\r\n      setEmailError(value && !validateEmail(value) ? \"Please enter a valid email address\" : \"\");\r\n    }\r\n\r\n    if (name === \"student_whatsapp_number\") {\r\n      setWhatsappError(sanitizedValue && !validateNumber(sanitizedValue) ? \"WhatsApp number must be exactly 10 digits\" : \"\");\r\n    }\r\n    if (name === \"student_alternative_number\") {\r\n      setAlternativeError(sanitizedValue && !validateNumber(sanitizedValue) ? \"Alternative number must be exactly 10 digits\" : \"\");\r\n    }\r\n    if (name === \"student_emergency_contact_number\") {\r\n      setEmergencyError(sanitizedValue && !validateNumber(sanitizedValue) ? \"Emergency contact number must be exactly 10 digits\" : \"\");\r\n    }\r\n\r\n    if (name === \"student_willow_relationship\") {\r\n      if (value === \"No\") {\r\n        setFormData((prevState) => ({\r\n          ...prevState,\r\n          relation_type: \"\",\r\n          relation_hr_contact: \"\",\r\n          relation_branch: \"\",\r\n          relation_name: \"\",\r\n          relation_surname: \"\",\r\n          relation_employee_code: \"\",\r\n          relation_reference: \"\",\r\n        }));\r\n      }\r\n    }\r\n    if (name === \"relation_type\" && formData.student_willow_relationship === \"Yes\") {\r\n      setFormData((prevState) => ({\r\n        ...prevState,\r\n        relation_hr_contact: \"\",\r\n        relation_branch: \"\",\r\n        relation_name: \"\",\r\n        relation_surname: \"\",\r\n        relation_employee_code: \"\",\r\n        relation_reference: \"\",\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const fileNameWithoutExtension = file.name;\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        employment_status_attachment_name: fileNameWithoutExtension,\r\n        employment_status_attachment: file,\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleViewFile = () => {\r\n    if (studentId) {\r\n      window.open(`${API_BASE_URL}/student-details/view-attachment/${studentId}`, \"_blank\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteAttachmentClick = () => {\r\n    setDeleteAttachmentConfirmationOpen(true);\r\n  };\r\n\r\n  const handleDeleteAttachmentConfirm = async () => {\r\n    if (!studentId) return;\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/student-details/delete-attachment/${studentId}`, {\r\n        method: \"PUT\",\r\n      });\r\n      if (response.ok) {\r\n        setFormData((prev) => ({\r\n          ...prev,\r\n          employment_status_attachment: null,\r\n          employment_status_attachment_name: \"\",\r\n        }));\r\n        setDeleteAttachmentConfirmationOpen(false);\r\n      } else {\r\n        setErrorMessage(\"Failed to delete attachment. Please try again.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error deleting attachment:\", err);\r\n      setErrorMessage(\"Error deleting attachment. Please try again.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteAttachmentCancel = () => {\r\n    setDeleteAttachmentConfirmationOpen(false);\r\n  };\r\n\r\n  const handleEmergencyContactChange = (e, newValue) => {\r\n    setEmergencyContactOption(newValue);\r\n    if (newValue === \"Same as above\") {\r\n      setFormData((prevState) => ({\r\n        ...prevState,\r\n        student_emergency_contact_name: formData.student_name,\r\n        student_emergency_contact_number: formData.student_whatsapp_number,\r\n        student_emergency_contact_relationship: \"Self\",\r\n        student_emergency_contact_address: formData.student_home_address,\r\n      }));\r\n      setEmergencyError(formData.student_whatsapp_number && !validateNumber(formData.student_whatsapp_number) ? \"Emergency contact number must be exactly 10 digits\" : \"\");\r\n    } else {\r\n      setFormData((prevState) => ({\r\n        ...prevState,\r\n        student_emergency_contact_name: \"\",\r\n        student_emergency_contact_number: \"\",\r\n        student_emergency_contact_relationship: \"\",\r\n        student_emergency_contact_address: \"\",\r\n      }));\r\n      setEmergencyError(\"\");\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    // Validate required fields\r\n    if (!formData.student_name) {\r\n      setNameError(\"Student name is required\");\r\n      return;\r\n    }\r\n    if (!formData.student_surname) {\r\n      setSurnameError(\"Student surname is required\");\r\n      return;\r\n    }\r\n    if (formData.student_email_address && !validateEmail(formData.student_email_address)) {\r\n      setEmailError(\"Please enter a valid email address\");\r\n      return;\r\n    }\r\n    if (formData.student_whatsapp_number && !validateNumber(formData.student_whatsapp_number)) {\r\n      setWhatsappError(\"WhatsApp number must be exactly 10 digits\");\r\n      return;\r\n    }\r\n    if (formData.student_alternative_number && !validateNumber(formData.student_alternative_number)) {\r\n      setAlternativeError(\"Alternative number must be exactly 10 digits\");\r\n      return;\r\n    }\r\n    if (formData.student_emergency_contact_number && !validateNumber(formData.student_emergency_contact_number)) {\r\n      setEmergencyError(\"Emergency contact number must be exactly 10 digits\");\r\n      return;\r\n    }\r\n\r\n    const userId = user?.user_id;\r\n    const url = studentId\r\n      ? `${API_BASE_URL}/student-details/update/${studentId}`\r\n      : `${API_BASE_URL}/student-details/insert`;\r\n    const method = studentId ? \"PUT\" : \"POST\";\r\n\r\n    const body = new FormData();\r\n    Object.keys(formData).forEach((key) => {\r\n      if (key !== \"employment_status_attachment\" && formData[key] !== null && formData[key] !== undefined) {\r\n        body.append(key, formData[key]);\r\n      }\r\n    });\r\n    if (formData.employment_status_attachment) {\r\n      body.append(\"employment_status_attachment\", formData.employment_status_attachment);\r\n    }\r\n    if (!studentId) {\r\n      body.append(\"user_id\", userId);\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(url, {\r\n        method,\r\n        body,\r\n      });\r\n\r\n      if (response.ok) {\r\n        const savedStudent = await response.json();\r\n        const cleanStudent = {\r\n          ...savedStudent,\r\n          employment_status_attachment: null,\r\n          employment_status_attachment_name: savedStudent.employment_status_attachment_name || \"\",\r\n        };\r\n        onSave(cleanStudent);\r\n        onClose();\r\n      } else {\r\n        console.error(\"Failed to save data:\", response.statusText);\r\n        setErrorMessage(\"Failed to save data. Please try again.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error saving student data:\", error);\r\n      setErrorMessage(\"An error occurred. Please try again.\");\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    setDeleteConfirmationOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!studentId) return;\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await fetch(\r\n        `${API_BASE_URL}/student-details/delete/${studentId}`,\r\n        { method: \"DELETE\" }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to delete student: ${response.statusText}`);\r\n      }\r\n\r\n      onDelete(studentId);\r\n      onClose();\r\n      setDeleteConfirmationOpen(false);\r\n    } catch (error) {\r\n      console.error(\"Error deleting student:\", error);\r\n      setErrorMessage(\"Failed to delete student. Please try again.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCancel = () => {\r\n    setDeleteConfirmationOpen(false);\r\n  };\r\n\r\n  const filteredFinanceType = formData.student_religion === \"Islam\" \r\n    ? financeType \r\n    : financeType.filter(type => type !== \"Zakah\");\r\n\r\n  const renderField = (key, index) => {\r\n    const fieldStyles = {\r\n      backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n      color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n      borderRadius: '8px',\r\n      '& .MuiInputBase-input': {\r\n        color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n      },\r\n      '&& .MuiFormLabel-root': {\r\n        color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n      },\r\n    };\r\n    const inputLabelProps = { style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } };\r\n\r\n    const relationFields = [\r\n      \"relation_type\",\r\n      \"relation_hr_contact\",\r\n      \"relation_branch\",\r\n      \"relation_name\",\r\n      \"relation_surname\",\r\n      \"relation_employee_code\",\r\n      \"relation_reference\",\r\n    ];\r\n\r\n    if (relationFields.includes(key)) {\r\n      if (formData.student_willow_relationship !== \"Yes\") {\r\n        return null;\r\n      }\r\n      if (key === \"relation_type\") {\r\n        return (\r\n          <Grid item xs={12} key={index}>\r\n            <Autocomplete\r\n              value={formData[key] || \"\"}\r\n              onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n              options={relationshipTypes}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label=\"Relationship Type\" sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n              )}\r\n            />\r\n          </Grid>\r\n        );\r\n      }\r\n      if (!formData.relation_type) {\r\n        return null;\r\n      }\r\n      if (formData.relation_type === \"Staff\" || formData.relation_type === \"Dependent of Staff\") {\r\n        if ([\"relation_hr_contact\", \"relation_branch\", \"relation_name\", \"relation_surname\", \"relation_employee_code\"].includes(key)) {\r\n          const labels = {\r\n            relation_hr_contact: \"HR Contact\",\r\n            relation_branch: \"Branch\",\r\n            relation_name: \"Name\",\r\n            relation_surname: \"Surname\",\r\n            relation_employee_code: \"Employee Code\",\r\n          };\r\n          return (\r\n            <Grid item xs={12} key={index}>\r\n              <TextField\r\n                label={labels[key]}\r\n                name={key}\r\n                fullWidth\r\n                value={formData[key] || \"\"}\r\n                onChange={handleChange}\r\n                sx={fieldStyles}\r\n                InputLabelProps={inputLabelProps}\r\n              />\r\n            </Grid>\r\n          );\r\n        }\r\n        return null;\r\n      }\r\n      if (formData.relation_type === \"Family\") {\r\n        if (key === \"relation_name\") {\r\n          return (\r\n            <Grid item xs={12} key={index}>\r\n              <TextField\r\n                label=\"Who are you related to\"\r\n                name={key}\r\n                fullWidth\r\n                value={formData[key] || \"\"}\r\n                onChange={handleChange}\r\n                sx={fieldStyles}\r\n                InputLabelProps={inputLabelProps}\r\n              />\r\n            </Grid>\r\n          );\r\n        }\r\n        if (key === \"relation_reference\") {\r\n          return (\r\n            <Grid item xs={12} key={index}>\r\n              <TextField\r\n                label=\"How are you related\"\r\n                name={key}\r\n                fullWidth\r\n                value={formData[key] || \"\"}\r\n                onChange={handleChange}\r\n                sx={fieldStyles}\r\n                InputLabelProps={inputLabelProps}\r\n              />\r\n            </Grid>\r\n          );\r\n        }\r\n        return null;\r\n      }\r\n      if (formData.relation_type === \"Director/Board Member or stakeholder\") {\r\n        if (key === \"relation_name\") {\r\n          return (\r\n            <Grid item xs={12} key={index}>\r\n              <TextField\r\n                label=\"Please provide the person's name\"\r\n                name={key}\r\n                fullWidth\r\n                value={formData[key] || \"\"}\r\n                onChange={handleChange}\r\n                sx={fieldStyles}\r\n                InputLabelProps={inputLabelProps}\r\n              />\r\n            </Grid>\r\n          );\r\n        }\r\n        return null;\r\n      }\r\n      if (formData.relation_type === \"Referral\") {\r\n        if (key === \"relation_reference\") {\r\n          return (\r\n            <Grid item xs={12} key={index}>\r\n              <TextField\r\n                label=\"Reference Relation\"\r\n                name={key}\r\n                fullWidth\r\n                value={formData[key] || \"\"}\r\n                onChange={handleChange}\r\n                sx={fieldStyles}\r\n                InputLabelProps={inputLabelProps}\r\n              />\r\n            </Grid>\r\n          );\r\n        }\r\n        if (key === \"relation_name\") {\r\n          return (\r\n            <Grid item xs={12} key={index}>\r\n              <TextField\r\n                label=\"Please provide the person's name\"\r\n                name={key}\r\n                fullWidth\r\n                value={formData[key] || \"\"}\r\n                onChange={handleChange}\r\n                sx={fieldStyles}\r\n                InputLabelProps={inputLabelProps}\r\n              />\r\n            </Grid>\r\n          );\r\n        }\r\n        return null;\r\n      }\r\n    }\r\n\r\n    const employmentFields = [\"student_job_title\", \"student_company_of_employment\", \"student_current_salary\"];\r\n    if (employmentFields.includes(key)) {\r\n      const validEmploymentStatuses = [\"Full Time Employed\", \"Part-Time Employed\", \"Self Employed\"];\r\n      if (!validEmploymentStatuses.includes(formData.student_employment_status)) {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    if (key === \"student_date_of_birth\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n            <DatePicker\r\n              wrapperClassName={\"datepicker\"}\r\n              className={\"datepicker\"}\r\n              label=\"Student Date of Birth\"\r\n              name=\"student_date_of_birth\"\r\n              value={selectedDate}\r\n              onChange={handleDateChange}\r\n              format=\"MM/dd/yyyy\"\r\n              sx={fieldStyles}\r\n              InputLabelProps={inputLabelProps}\r\n            />\r\n          </LocalizationProvider>\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_number_of_siblings\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <TextField\r\n            label=\"Number of Siblings\"\r\n            name=\"student_number_of_siblings\"\r\n            type=\"number\"\r\n            fullWidth\r\n            value={formData.student_number_of_siblings || \"\"}\r\n            onChange={handleChange}\r\n            sx={fieldStyles}\r\n            InputLabelProps={inputLabelProps}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_siblings_bursary\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n            options={yes_no}\r\n            renderInput={(params) => (\r\n              <TextField\r\n                {...params}\r\n                label=\"Have any of your siblings received or are receiving assistance from this bursary fund?\"\r\n                sx={fieldStyles}\r\n                InputLabelProps={inputLabelProps}\r\n              />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_id_passport_number\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <TextField\r\n            label=\"Student ID/Passport Number\"\r\n            name=\"student_id_passport_number\"\r\n            type=\"text\"\r\n            fullWidth\r\n            value={formData.student_id_passport_number || \"\"}\r\n            onChange={handleChange}\r\n            sx={fieldStyles}\r\n            InputLabelProps={inputLabelProps}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_email_address\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <TextField\r\n            label=\"Student Email Address\"\r\n            name=\"student_email_address\"\r\n            type=\"email\"\r\n            fullWidth\r\n            value={formData.student_email_address || \"\"}\r\n            onChange={handleChange}\r\n            error={!!emailError}\r\n            helperText={emailError}\r\n            sx={fieldStyles}\r\n            InputLabelProps={inputLabelProps}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_whatsapp_number\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <TextField\r\n            label=\"Student WhatsApp Number\"\r\n            name=\"student_whatsapp_number\"\r\n            type=\"tel\"\r\n            fullWidth\r\n            value={formData.student_whatsapp_number || \"\"}\r\n            onChange={handleChange}\r\n            error={!!whatsappError}\r\n            helperText={whatsappError}\r\n            inputProps={{ maxLength: 10, pattern: \"[0-9]*\" }}\r\n            sx={fieldStyles}\r\n            InputLabelProps={inputLabelProps}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_alternative_number\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <TextField\r\n            label=\"Student Alternative Number\"\r\n            name=\"student_alternative_number\"\r\n            type=\"tel\"\r\n            fullWidth\r\n            value={formData.student_alternative_number || \"\"}\r\n            onChange={handleChange}\r\n            error={!!alternativeError}\r\n            helperText={alternativeError}\r\n            inputProps={{ maxLength: 10, pattern: \"[0-9]*\" }}\r\n            sx={fieldStyles}\r\n            InputLabelProps={inputLabelProps}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_name\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <TextField\r\n            label=\"Student Name\"\r\n            name=\"student_name\"\r\n            fullWidth\r\n            required\r\n            value={formData.student_name || \"\"}\r\n            onChange={handleChange}\r\n            error={!!nameError}\r\n            helperText={nameError}\r\n            sx={fieldStyles}\r\n            InputLabelProps={inputLabelProps}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_surname\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <TextField\r\n            label=\"Student Surname\"\r\n            name=\"student_surname\"\r\n            fullWidth\r\n            required\r\n            value={formData.student_surname || \"\"}\r\n            onChange={handleChange}\r\n            error={!!surnameError}\r\n            helperText={surnameError}\r\n            sx={fieldStyles}\r\n            InputLabelProps={inputLabelProps}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_emergency_contact_name\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={emergencyContactOption}\r\n            onChange={handleEmergencyContactChange}\r\n            options={[\"Same as above\", \"Add new\"]}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label=\"Emergency Contact\" sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n          {emergencyContactOption === \"Add new\" && (\r\n            <TextField\r\n              label=\"Student Emergency Contact Name\"\r\n              name=\"student_emergency_contact_name\"\r\n              fullWidth\r\n              value={formData.student_emergency_contact_name || \"\"}\r\n              onChange={handleChange}\r\n              sx={{ ...fieldStyles, marginTop: 2 }}\r\n              InputLabelProps={inputLabelProps}\r\n            />\r\n          )}\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_emergency_contact_number\" && emergencyContactOption === \"Add new\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <TextField\r\n            label=\"Student Emergency Contact Number\"\r\n            name=\"student_emergency_contact_number\"\r\n            type=\"tel\"\r\n            fullWidth\r\n            value={formData.student_emergency_contact_number || \"\"}\r\n            onChange={handleChange}\r\n            error={!!emergencyError}\r\n            helperText={emergencyError}\r\n            inputProps={{ maxLength: 10, pattern: \"[0-9]*\" }}\r\n            sx={fieldStyles}\r\n            InputLabelProps={inputLabelProps}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_emergency_contact_relationship\" && emergencyContactOption === \"Add new\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <TextField\r\n            label=\"Student Emergency Contact Relationship\"\r\n            name=\"student_emergency_contact_relationship\"\r\n            fullWidth\r\n            value={formData.student_emergency_contact_relationship || \"\"}\r\n            onChange={handleChange}\r\n            sx={fieldStyles}\r\n            InputLabelProps={inputLabelProps}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_emergency_contact_address\" && emergencyContactOption === \"Add new\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <TextField\r\n            label=\"Student Emergency Contact Address\"\r\n            name=\"student_emergency_contact_address\"\r\n            fullWidth\r\n            value={formData.student_emergency_contact_address || \"\"}\r\n            onChange={handleChange}\r\n            sx={fieldStyles}\r\n            InputLabelProps={inputLabelProps}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_status\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"Pending\"}\r\n            onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n            options={statusOptions}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label=\"Student Status\" sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n            disabled={!isAdmin}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_status_comment\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <TextField\r\n            label=\"Status Comment\"\r\n            name=\"student_status_comment\"\r\n            fullWidth\r\n            multiline\r\n            rows={4}\r\n            value={formData.student_status_comment || \"\"}\r\n            onChange={handleChange}\r\n            sx={fieldStyles}\r\n            InputLabelProps={inputLabelProps}\r\n            disabled={!isAdmin}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_willow_relationship\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n            options={yes_no}\r\n            renderInput={(params) => (\r\n              <TextField\r\n                {...params}\r\n                label=\"Does the student have any relationship to the Willowton Group?\"\r\n                sx={fieldStyles}\r\n                InputLabelProps={inputLabelProps}\r\n              />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_nationality\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n            options={nationality}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label=\"Student Nationality\" sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_province\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n            options={provinces}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label=\"Student Province\" sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_type\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n            options={studentType}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label=\"Student Type\" sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_religion\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n            options={religions}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label=\"Student Religion\" sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_finance_type\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n            options={filteredFinanceType}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label=\"Student Finance Type\" sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_race\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n            options={races}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label=\"Student Race\" sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_marital_status\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n            options={maritalStatus}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label=\"Student Marital Status\" sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_employment_status\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n            options={employmentStatus}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label=\"Student Employment Status\" sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n          <TextField\r\n            label=\"Employment Status Attachment Name\"\r\n            name=\"employment_status_attachment_name\"\r\n            fullWidth\r\n            disabled\r\n            value={formData.employment_status_attachment_name || \"\"}\r\n            sx={{\r\n              ...fieldStyles,\r\n              marginTop: 2,\r\n              '& .MuiInputBase-input.Mui-disabled': {\r\n                WebkitTextFillColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n              },\r\n            }}\r\n            InputLabelProps={inputLabelProps}\r\n          />\r\n          <Button\r\n            variant=\"outlined\"\r\n            component=\"label\"\r\n            sx={{ ...fieldStyles, width: \"100%\", marginTop: 1, borderColor: isDarkMode ? '#F7FAFC' : '#1E293B' }}\r\n          >\r\n            Upload Employment Status Attachment\r\n            <input type=\"file\" hidden onChange={handleFileChange} />\r\n          </Button>\r\n          {formData.employment_status_attachment_name && studentId && (\r\n            <>\r\n              <Button\r\n                variant=\"text\"\r\n                color=\"primary\"\r\n                onClick={handleViewFile}\r\n                startIcon={<VisibilityIcon />}\r\n                sx={{ width: \"100%\", marginTop: 1, color: isDarkMode ? '#F7FAFC' : '#1E293B' }}\r\n              >\r\n                View/Download Attachment\r\n              </Button>\r\n              <Button\r\n                variant=\"outlined\"\r\n                color=\"error\"\r\n                onClick={handleDeleteAttachmentClick}\r\n                startIcon={<DeleteIcon />}\r\n                sx={{ width: \"100%\", marginTop: 1, borderColor: isDarkMode ? '#F7FAFC' : '#1E293B', color: 'red' }}\r\n              >\r\n                Delete Attachment\r\n              </Button>\r\n            </>\r\n          )}\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_highest_education\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n            options={highestEducation}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label=\"Student Highest Education\" sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"student_date_stamp\" || key === \"id\" || key === \"user_id\" || key === \"student_industry\" || key === \"employment_status_attachment\" || key === \"employment_status_attachment_name\") {\r\n      return null;\r\n    }\r\n\r\n    let label = key.replace(/_/g, \" \").toLowerCase().split(\" \").map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(\" \");\r\n    return (\r\n      <Grid item xs={12} key={index}>\r\n        <TextField\r\n          label={label}\r\n          name={key}\r\n          fullWidth\r\n          value={formData[key] || \"\"}\r\n          onChange={handleChange}\r\n          sx={fieldStyles}\r\n          InputLabelProps={inputLabelProps}\r\n        />\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Drawer anchor=\"right\" open={open} onClose={onClose}>\r\n      <Box sx={{ width: drawerWidth, height: \"100%\", display: \"flex\", flexDirection: \"column\", backgroundColor: isDarkMode ? '#2D3748' : '#fff' }}>\r\n        <Box sx={{ padding: 2, borderBottom: \"1px solid #ccc\", backgroundColor: isDarkMode ? '#1E293B' : '#e1f5fe' }}>\r\n          <Typography variant=\"h6\" sx={{ fontWeight: \"bold\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n            Student Details\r\n          </Typography>\r\n          {errorMessage && (\r\n            <Typography variant=\"body2\" color=\"error.main\" sx={{ mt: 1 }}>\r\n              {errorMessage}\r\n            </Typography>\r\n          )}\r\n        </Box>\r\n\r\n        <Box sx={{ flex: 1, overflowY: \"auto\", padding: 2 }}>\r\n          {isLoading ? (\r\n            <Box sx={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\", height: \"100%\" }}>\r\n              <CircularProgress />\r\n            </Box>\r\n          ) : (\r\n            <Grid container spacing={2}>\r\n              {Object.keys(formData).map((key, index) => renderField(key, index))}\r\n            </Grid>\r\n          )}\r\n        </Box>\r\n\r\n        <Divider />\r\n        <Box sx={{ padding: 2, borderTop: \"1px solid #ccc\", display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            <Button\r\n              onClick={onClose}\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              sx={{ borderColor: isDarkMode ? '#F7FAFC' : '#1E293B', color: isDarkMode ? '#F7FAFC' : '#1E293B' }}\r\n              startIcon={<CloseIcon />}\r\n              disabled={isLoading}\r\n            >\r\n              Close\r\n            </Button>\r\n\r\n            {studentId && (\r\n              <Button\r\n                onClick={handleDeleteClick}\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                sx={{ borderColor: isDarkMode ? '#F7FAFC' : '#1E293B', color: 'red' }}\r\n                startIcon={<DeleteIcon />}\r\n                disabled={isLoading}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Box>\r\n\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            {!studentId ? (\r\n              <Button\r\n                onClick={handleSave}\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                color=\"primary\"\r\n                startIcon={<AddIcon />}\r\n                disabled={isLoading}\r\n              >\r\n                {isLoading ? <CircularProgress size={20} /> : \"Create\"}\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                onClick={handleSave}\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                color=\"primary\"\r\n                startIcon={<SaveIcon />}\r\n                disabled={isLoading}\r\n              >\r\n                {isLoading ? <CircularProgress size={20} /> : \"Save\"}\r\n              </Button>\r\n            )}\r\n          </Box>\r\n        </Box>\r\n\r\n        <Dialog\r\n          open={deleteConfirmationOpen}\r\n          onClose={handleDeleteCancel}\r\n        >\r\n          <DialogTitle>Confirm Deletion</DialogTitle>\r\n          <DialogContent>\r\n            Are you sure you want to delete this record?\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleDeleteCancel} color=\"primary\" disabled={isLoading}>\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleDeleteConfirm} color=\"error\" disabled={isLoading}>\r\n              {isLoading ? <CircularProgress size={20} /> : \"Delete\"}\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n\r\n        <Dialog\r\n          open={deleteAttachmentConfirmationOpen}\r\n          onClose={handleDeleteAttachmentCancel}\r\n        >\r\n          <DialogTitle>Confirm Attachment Deletion</DialogTitle>\r\n          <DialogContent>\r\n            Are you sure you want to delete the employment status attachment?\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleDeleteAttachmentCancel} color=\"primary\" disabled={isLoading}>\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleDeleteAttachmentConfirm} color=\"error\" disabled={isLoading}>\r\n              {isLoading ? <CircularProgress size={20} /> : \"Delete\"}\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </Box>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default StudentDetailDrawer;","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Drawer,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Divider,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle\r\n} from \"@mui/material\";\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport { ThemeContext } from '../../config/ThemeContext';  // Import ThemeContext\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst AboutusDrawer = ({ open, onClose, studentId, aboutMeId, onSave }) => {\r\n  const { isDarkMode } = useContext(ThemeContext);  // Access theme context\r\n\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n  const [formData, setFormData] = useState({});\r\n  // Check for larger or smaller screen size\r\n  const isLargeScreen = useMediaQuery(\"(min-width:600px)\");\r\n\r\n  // Drawer width based on screen size\r\n  const drawerWidth = isLargeScreen ? 500 : 330;\r\n\r\n  // Custom questions\r\n  const questions = [\r\n    \"What inspired you to pursue your chosen field of study?*\",\r\n    \"How do you plan to use your education and skills to make a significant impact in this field?*\",\r\n    \"What special projects or initiatives have you undertaken in your academic life?*\",\r\n    \"Can you tell me about any academic awards or scholarships you have received?*\",\r\n    \"Provide examples or specific skills you have developed that demonstrates your commitment.*\",\r\n    \"What extracurricular activities have you participated in, and how have they contributed to your personal and academic growth?*\",\r\n    \"Once you have completed your studies, how will others benefit from it?*\",\r\n    \"Can you describe any financial challenges you have faced that have affected your ability to pursue your education, and how these challenges have impacted your current financial situation?*\",\r\n    \"Have you previously been awarded a bursary?*\",\r\n    \"What do you think has been your most notable contribution to society thus far?*\",\r\n    \"Why do you think serving the community is important?*\",\r\n    \"Will you be doing any volunteer work during your studies?*\",\r\n    \"Are you willing to assist someone in need?*\",\r\n    \"Describe yourself in three words.*\",\r\n    \"What is your greatest strength?*\",\r\n    \"Describe your biggest mistake and what steps you have taken to rectify it.*\",\r\n    \"What personal achievement makes you proud?*\",\r\n    \"Are you self-motivated? Explain*\",\r\n    \"1st choice of study.*\",\r\n    \"2nd choice of study*\",\r\n    \"3rd choice of study.*\"\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      if (aboutMeId) {\r\n        // Editing mode\r\n        fetch(`${API_BASE_URL}/about-me/id/${aboutMeId}`)\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            setFormData(data);\r\n          });\r\n      } else {\r\n        // Creating new entry\r\n        const initialData = {\r\n          student_details_portal_id: studentId,\r\n        };\r\n        for (let i = 1; i <= 21; i++) {\r\n          initialData[`about_me_q${i.toString().padStart(2, \"0\")}`] = \"\";\r\n        }\r\n        setFormData(initialData);\r\n      }\r\n    } else {\r\n      // Cleanup when drawer closes\r\n      setFormData({});\r\n    }\r\n  }, [open, studentId, aboutMeId]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const isUpdate = !!formData.id;\r\n    const url = isUpdate\r\n      ? `${API_BASE_URL}/about-me/update/${formData.id}`\r\n      : `${API_BASE_URL}/about-me/insert`;\r\n    const method = isUpdate ? \"PUT\" : \"POST\";\r\n\r\n    const dataToSend = { ...formData };\r\n    if (!isUpdate) delete dataToSend.id;\r\n\r\n    try {\r\n      const res = await fetch(url, {\r\n        method,\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(dataToSend),\r\n      });\r\n\r\n      if (res.ok) {\r\n        const result = await res.json();\r\n        onSave(result);\r\n        onClose();\r\n      } else {\r\n        console.error(\"Failed to save About Me data\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error saving About Me data:\", err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    setDeleteConfirmationOpen(true); // Open the dialog\r\n  };\r\n\r\n  // Handle the confirmation delete\r\n  const handleDeleteConfirm = async () => {\r\n    if (!formData.id) return;\r\n\r\n    try {\r\n      const res = await fetch(\r\n        `${API_BASE_URL}/about-me/delete/${formData.id}`,\r\n        { method: \"DELETE\" }\r\n      );\r\n\r\n      if (res.ok) {\r\n        onSave(null);\r\n        onClose();\r\n        setDeleteConfirmationOpen(false); // Close the confirmation dialog\r\n      } else {\r\n        console.error(\"Failed to delete About Me entry\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error deleting About Me entry:\", err);\r\n    }\r\n  };\r\n\r\n  // Handle cancel delete\r\n  const handleDeleteCancel = () => {\r\n    setDeleteConfirmationOpen(false); // Close the confirmation dialog\r\n  };\r\n\r\n  return (\r\n    <Drawer anchor=\"right\" open={open} onClose={onClose}>\r\n      <Box\r\n        sx={{\r\n          width: drawerWidth,\r\n          height: \"100%\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          backgroundColor: isDarkMode ? '#2D3748' : '#fff'\r\n        }}\r\n      >\r\n        {/* Header */}\r\n        <Box sx={{ p: 2, borderBottom: \"1px solid #ccc\", backgroundColor: isDarkMode ? '#1E293B' : '#e1f5fe' }}>\r\n          <Typography variant=\"h6\" sx={{ fontWeight: \"bold\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n            About Me\r\n          </Typography>\r\n        </Box>\r\n\r\n        {/* Form Content */}\r\n        <Box sx={{ flex: 1, overflowY: \"auto\", p: 2 }}>\r\n          <Grid container spacing={2}>\r\n            {questions.map((question, i) => {\r\n              const qNum = (i + 1).toString().padStart(2, \"0\");\r\n              const key = `about_me_q${qNum}`;\r\n\r\n              return (\r\n                <Grid item xs={12} key={key}>\r\n                  <TextField\r\n                    label={question}\r\n                    name={key}\r\n                    fullWidth\r\n                    multiline\r\n                    value={formData[key] || \"\"}\r\n                    onChange={handleChange}\r\n                    sx={{\r\n                      backgroundColor: isDarkMode ? '#1A202C' : '#ffffff', // Dark/Light background\r\n                      color: isDarkMode ? '#F7FAFC' : '#1E293B', // Text color\r\n                      borderRadius: '8px', // Apply border-radius\r\n                      '& .MuiInputBase-input': {\r\n                        color: isDarkMode ? '#F7FAFC' : '#1E293B', // Input text color\r\n                      },\r\n                      '& .MuiOutlinedInput-root': {\r\n                        borderRadius: '8px', // Apply border-radius to root element\r\n                      },\r\n                      '& .MuiFormLabel-root': {\r\n                        color: isDarkMode ? '#F7FAFC' : '#1E293B', // Label color\r\n                      },\r\n                    }}\r\n                    InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }} // Label color for dark/light mode\r\n                  />\r\n                </Grid>\r\n              );\r\n            })}\r\n          </Grid>\r\n        </Box>\r\n\r\n        {/* Footer */}\r\n        <Divider />\r\n        <Box\r\n          sx={{\r\n            p: 2,\r\n            borderTop: \"1px solid #ccc\",\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n          }}\r\n        >\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            <Button\r\n              onClick={onClose}\r\n              startIcon={<CloseIcon />}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              sx={{\r\n                borderColor: isDarkMode ? '#F7FAFC' : '#1E293B', // Border color for dark/light mode\r\n                color: isDarkMode ? '#F7FAFC' : '#1E293B', // Text color\r\n              }}\r\n            >\r\n              Close\r\n            </Button>\r\n            {formData.id && (\r\n              <Button\r\n                onClick={handleDeleteClick}\r\n                startIcon={<DeleteIcon />}\r\n                size=\"small\"\r\n                color=\"error\"\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  borderColor: isDarkMode ? '#F7FAFC' : '#1E293B', // Red border color for delete button\r\n                  color: 'red', // Red text color for delete button\r\n                }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Box>\r\n          <Button\r\n            onClick={handleSave}\r\n            startIcon={formData.id ? <SaveIcon /> : <AddIcon />}\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n          >\r\n            {formData.id ? \"Save\" : \"Create\"}\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Confirmation Dialog */}\r\n      <Dialog open={deleteConfirmationOpen} onClose={handleDeleteCancel}>\r\n        <DialogTitle>Confirm Deletion</DialogTitle>\r\n        <DialogContent>\r\n          Are you sure you want to delete this entry?\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteCancel} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleDeleteConfirm} color=\"error\">\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default AboutusDrawer;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Drawer,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Divider,\r\n  Autocomplete,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n} from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport { ThemeContext } from '../../config/ThemeContext';  // Import ThemeContext\r\nimport { parentRelationship, employmentStatus, highestEducation } from \"../../components/lov\"; // Import LOVs\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst ParentsDrawer = ({ open, onClose, studentId, parentId, onSave }) => {\r\n  const { isDarkMode } = useContext(ThemeContext);  // Access theme context\r\n\r\n  const [formData, setFormData] = useState({});\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n  // const [successMessage, setSuccessMessage] = useState(\"\");\r\n  const [emailError, setEmailError] = useState(\"\"); // State for email validation error\r\n  const [cellNumberError, setCellNumberError] = useState(\"\"); // State for cell number validation error\r\n\r\n  // Check for larger or smaller screen size\r\n  const isLargeScreen = useMediaQuery(\"(min-width:600px)\");\r\n\r\n  // Drawer width based on screen size\r\n  const drawerWidth = isLargeScreen ? 500 : 330;\r\n\r\n  // Email validation function\r\n  const validateEmail = (email) => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return emailRegex.test(email);\r\n  };\r\n\r\n  // Cell number validation function\r\n  const validateCellNumber = (number) => {\r\n    const cellRegex = /^\\d{10}$/;\r\n    return cellRegex.test(number);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      if (parentId) {\r\n        fetch(`${API_BASE_URL}/parents-details/id/${parentId}`)\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            setFormData(data);\r\n            // Validate email and cell number on load\r\n            if (data.parent_email_address) {\r\n              setEmailError(validateEmail(data.parent_email_address) ? \"\" : \"Please enter a valid email address\");\r\n            } else {\r\n              setEmailError(\"\");\r\n            }\r\n            if (data.parent_cell_number) {\r\n              setCellNumberError(validateCellNumber(data.parent_cell_number) ? \"\" : \"Cell number must be exactly 10 digits\");\r\n            } else {\r\n              setCellNumberError(\"\");\r\n            }\r\n          });\r\n      } else {\r\n        setFormData({\r\n          student_details_portal_id: studentId,\r\n          parent_relationship: \"\",\r\n          parent_name: \"\",\r\n          parent_surname: \"\",\r\n          parent_cell_number: \"\",\r\n          parent_email_address: \"\",\r\n          parent_employment_status: \"\",\r\n          parent_industry: \"\",\r\n          parent_highest_education: \"\",\r\n          parent_salary: \"\",\r\n          parent_grant: \"\",\r\n          parent_other_income: \"\",\r\n        });\r\n        setEmailError(\"\");\r\n        setCellNumberError(\"\");\r\n      }\r\n    } else {\r\n      setFormData({});\r\n      setEmailError(\"\");\r\n      setCellNumberError(\"\");\r\n    }\r\n  }, [open, parentId, studentId]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n\r\n    // Validate email on change\r\n    if (name === \"parent_email_address\") {\r\n      setEmailError(value && !validateEmail(value) ? \"Please enter a valid email address\" : \"\");\r\n    }\r\n\r\n    // Validate cell number on change\r\n    if (name === \"parent_cell_number\") {\r\n      // Allow only digits and limit to 10\r\n      const numericValue = value.replace(/\\D/g, \"\").slice(0, 10);\r\n      setFormData((prev) => ({ ...prev, [name]: numericValue }));\r\n      setCellNumberError(numericValue && !validateCellNumber(numericValue) ? \"Cell number must be exactly 10 digits\" : \"\");\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    // Prevent save if email or cell number is invalid\r\n    if (formData.parent_email_address && !validateEmail(formData.parent_email_address)) {\r\n      setEmailError(\"Please enter a valid email address\");\r\n      return;\r\n    }\r\n    if (formData.parent_cell_number && !validateCellNumber(formData.parent_cell_number)) {\r\n      setCellNumberError(\"Cell number must be exactly 10 digits\");\r\n      return;\r\n    }\r\n\r\n    const isUpdate = !!formData.id;\r\n    const url = isUpdate\r\n      ? `${API_BASE_URL}/parents-details/update/${formData.id}`\r\n      : `${API_BASE_URL}/parents-details/insert`;\r\n    const method = isUpdate ? \"PUT\" : \"POST\";\r\n\r\n    const body = { ...formData };\r\n    if (!isUpdate) delete body.id;\r\n\r\n    const res = await fetch(url, {\r\n      method,\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(body),\r\n    });\r\n\r\n    if (res.ok) {\r\n      const result = await res.json();\r\n      onSave(result);\r\n      // setsuccessmessage(isUpdate ? \"Parent details updated successfully!\" : \"Parent details created successfully!\");\r\n      onClose();\r\n    } else {\r\n      console.error(\"Failed to save parent data\");\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!formData.id) return;\r\n    setDeleteConfirmationOpen(false);\r\n    const res = await fetch(`${API_BASE_URL}/parents-details/delete/${formData.id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n    if (res.ok) {\r\n      onSave(null);\r\n      // setsuccessmessage(\"Parent details deleted successfully!\");\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Drawer anchor=\"right\" open={open} onClose={onClose}>\r\n      <Box sx={{\r\n        width: drawerWidth,\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        backgroundColor: isDarkMode ? '#2D3748' : '#fff'\r\n      }}>\r\n        {/* Header */}\r\n        <Box sx={{\r\n          p: 2,\r\n          borderBottom: \"1px solid #ccc\",\r\n          backgroundColor: isDarkMode ? '#1E293B' : '#e1f5fe'\r\n        }}>\r\n          <Typography variant=\"h6\" sx={{ fontWeight: \"bold\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n            Parent Details\r\n          </Typography>\r\n          {/* {successMessage && (\r\n            <Typography variant=\"body2\" color=\"success.main\" sx={{ mt: 1 }}>\r\n              {successMessage}\r\n            </Typography>\r\n          )} */}\r\n        </Box>\r\n\r\n        {/* Form Content */}\r\n        <Box sx={{ flex: 1, overflowY: \"auto\", p: 2 }}>\r\n          <Grid container spacing={2}>\r\n            {Object.entries(formData).map(([key, value]) => {\r\n              if (key === \"id\" || key === \"student_details_portal_id\" || key === \"parent_date_stamp\") return null;\r\n\r\n              let label = key.replace(/_/g, \" \");\r\n              label = label\r\n                .split(\" \")\r\n                .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\r\n                .join(\" \");\r\n\r\n              if (key === \"parent_relationship\") {\r\n                return (\r\n                  <Grid item xs={12} key={key}>\r\n                    <Autocomplete\r\n                      value={value || \"\"}\r\n                      onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n                      options={parentRelationship}\r\n                      renderInput={(params) => <TextField {...params} label={label} sx={{\r\n                        backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                        borderRadius: '8px',\r\n                        color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                        '& .MuiInputBase-input': {\r\n                          color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                        }\r\n                      }}\r\n                        InputLabelProps={{ style: { color: isDarkMode ? '#ffffff' : '#000000' } }}\r\n                      />}\r\n                    />\r\n                  </Grid>\r\n                );\r\n              }\r\n              if (key === \"parent_employment_status\") {\r\n                return (\r\n                  <Grid item xs={12} key={key}>\r\n                    <Autocomplete\r\n                      value={value || \"\"}\r\n                      onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n                      options={employmentStatus}\r\n                      renderInput={(params) => <TextField {...params} label={label} sx={{\r\n                        backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                        borderRadius: '8px',\r\n                        color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                        '& .MuiInputBase-input': {\r\n                          color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                        }\r\n                      }}\r\n                        InputLabelProps={{ style: { color: isDarkMode ? '#ffffff' : '#000000' } }}\r\n                      />}\r\n                    />\r\n                  </Grid>\r\n                );\r\n              }\r\n              if (key === \"parent_highest_education\") {\r\n                return (\r\n                  <Grid item xs={12} key={key}>\r\n                    <Autocomplete\r\n                      value={value || \"\"}\r\n                      onChange={(e, newValue) => handleChange({ target: { name: key, value: newValue } })}\r\n                      options={highestEducation}\r\n                      renderInput={(params) => <TextField {...params} label={label} sx={{\r\n                        backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                        borderRadius: '8px',\r\n                        color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                        '& .MuiInputBase-input': {\r\n                          color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                        }\r\n                      }}\r\n                        InputLabelProps={{ style: { color: isDarkMode ? '#ffffff' : '#000000' } }}\r\n                      />}\r\n                    />\r\n                  </Grid>\r\n                );\r\n              }\r\n              if (key === \"parent_email_address\") {\r\n                return (\r\n                  <Grid item xs={12} key={key}>\r\n                    <TextField\r\n                      name={key}\r\n                      label={label}\r\n                      type=\"email\"\r\n                      fullWidth\r\n                      value={value || \"\"}\r\n                      onChange={handleChange}\r\n                      error={!!emailError}\r\n                      helperText={emailError}\r\n                      sx={{\r\n                        backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                        color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                        borderRadius: '8px',\r\n                        '& .MuiInputBase-input': {\r\n                          color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                        }\r\n                      }}\r\n                      InputLabelProps={{ style: { color: isDarkMode ? '#ffffff' : '#000000' } }}\r\n                    />\r\n                  </Grid>\r\n                );\r\n              }\r\n              if (key === \"parent_cell_number\") {\r\n                return (\r\n                  <Grid item xs={12} key={key}>\r\n                    <TextField\r\n                      name={key}\r\n                      label={label}\r\n                      type=\"tel\"\r\n                      fullWidth\r\n                      value={value || \"\"}\r\n                      onChange={handleChange}\r\n                      error={!!cellNumberError}\r\n                      helperText={cellNumberError}\r\n                      inputProps={{\r\n                        maxLength: 10,\r\n                        pattern: \"[0-9]*\",\r\n                      }}\r\n                      sx={{\r\n                        backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                        color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                        borderRadius: '8px',\r\n                        '& .MuiInputBase-input': {\r\n                          color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                        }\r\n                      }}\r\n                      InputLabelProps={{ style: { color: isDarkMode ? '#ffffff' : '#000000' } }}\r\n                    />\r\n                  </Grid>\r\n                );\r\n              }\r\n\r\n              return (\r\n                <Grid item xs={12} key={key}>\r\n                  <TextField\r\n                    name={key}\r\n                    label={label}\r\n                    fullWidth\r\n                    value={value || \"\"}\r\n                    onChange={handleChange}\r\n                    sx={{\r\n                      backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                      color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                      borderRadius: '8px',\r\n                      '& .MuiInputBase-input': {\r\n                        color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                      }\r\n                    }}\r\n                    InputLabelProps={{ style: { color: isDarkMode ? '#ffffff' : '#000000' } }}\r\n                  />\r\n                </Grid>\r\n              );\r\n            })}\r\n          </Grid>\r\n        </Box>\r\n\r\n        {/* Footer */}\r\n        <Divider />\r\n        <Box sx={{\r\n          p: 2,\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\"\r\n        }}>\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            <Button\r\n              onClick={onClose}\r\n              startIcon={<CloseIcon />}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              sx={{\r\n                borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n              }}\r\n            >\r\n              Close\r\n            </Button>\r\n            {formData.id && (\r\n              <Button\r\n                onClick={() => setDeleteConfirmationOpen(true)}\r\n                startIcon={<DeleteIcon />}\r\n                size=\"small\"\r\n                color=\"error\"\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  color: 'red',\r\n                }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Box>\r\n          <Button\r\n            onClick={handleSave}\r\n            startIcon={formData.id ? <SaveIcon /> : <AddIcon />}\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n          >\r\n            {formData.id ? \"Save\" : \"Create\"}\r\n          </Button>\r\n        </Box>\r\n\r\n        {/* Delete Confirmation Dialog */}\r\n        <Dialog open={deleteConfirmationOpen} onClose={() => setDeleteConfirmationOpen(false)}>\r\n          <DialogTitle>Confirm Deletion</DialogTitle>\r\n          <DialogContent>\r\n            Are you sure you want to delete this record?\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={() => setDeleteConfirmationOpen(false)} color=\"primary\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleDelete} color=\"error\">\r\n              Delete\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </Box>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default ParentsDrawer;","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Drawer,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Divider,\r\n  Autocomplete,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n} from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport { ThemeContext } from '../../config/ThemeContext';\r\nimport { semesters, highestEducation } from \"../../components/lov\";\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst UniversityDetailsDrawer = ({\r\n  open,\r\n  onClose,\r\n  studentId,\r\n  universityDetailsId,\r\n  onSave,\r\n}) => {\r\n  const { isDarkMode } = useContext(ThemeContext);\r\n  const isLargeScreen = useMediaQuery(\"(min-width:600px)\");\r\n  const drawerWidth = isLargeScreen ? 500 : 330;\r\n\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n  const [formData, setFormData] = useState({});\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      if (universityDetailsId) {\r\n        fetch(`${API_BASE_URL}/university-details/id/${universityDetailsId}`)\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            const normalizedData = {\r\n              ...data,\r\n            };\r\n            setFormData(normalizedData);\r\n          });\r\n      } else {\r\n        const initialData = {\r\n          student_details_portal_id: studentId,\r\n          Institution_name: \"\",\r\n          name_of_Course: \"\",\r\n          intake_year: \"\",\r\n          Semester: \"\",\r\n          NQF_Level: \"\",\r\n          Current_Year: \"\",\r\n          Student_Number: \"\",\r\n          previously_funded: \"\",\r\n          previously_funded_amount: \"\",\r\n          tuition: \"\",\r\n          tuition_amount: \"\",\r\n          accommodation: \"\",\r\n          accommodation_fee: \"\",\r\n          textbooks: \"\",\r\n          textbooks_fee: \"\",\r\n          travel: \"\",\r\n          travel_fee: \"\",\r\n          total_university_expense: \"\",\r\n          previous_bursary_org_1: \"\",\r\n          previous_bursary_org_1_name: \"\",\r\n          previous_bursary_org_1_amount: \"\",\r\n          previous_bursary_org_1_contact: \"\",\r\n          previous_bursary_org_2: \"\",\r\n          previous_bursary_org_2_name: \"\",\r\n          previous_bursary_org_2_amount: \"\",\r\n          previous_bursary_org_2_contact: \"\",\r\n          previous_bursary_org_3: \"\",\r\n          previous_bursary_org_3_name: \"\",\r\n          previous_bursary_org_3_amount: \"\",\r\n          previous_bursary_org_3_contact: \"\",\r\n          Application_Process_Status: \"\",\r\n        };\r\n        setFormData(initialData);\r\n      }\r\n    } else {\r\n      setFormData({});\r\n    }\r\n  }, [open, studentId, universityDetailsId]);\r\n\r\n  // Calculate total university expense whenever relevant fields change\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleAutocompleteChange = (name, value) => {\r\n    setFormData((prev) => {\r\n      const newFormData = { ...prev, [name]: value };\r\n      const conditionalField = conditionalFields.find(field => field.select === name);\r\n      if (conditionalField && value === \"No\") {\r\n        newFormData[conditionalField.amount] = \"\";\r\n      }\r\n\r\n      // Handle Previous Bursary Org fields\r\n      const bursaryFields = bursaryConditionalFields.find(field => field.select === name);\r\n      if (bursaryFields && value !== \"Yes\") {\r\n        newFormData[bursaryFields.name] = \"\";\r\n        newFormData[bursaryFields.amount] = \"\";\r\n        newFormData[bursaryFields.contact] = \"\";\r\n      }\r\n\r\n      return newFormData;\r\n    });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const isUpdate = !!formData.id;\r\n    const url = isUpdate\r\n      ? `${API_BASE_URL}/university-details/update/${formData.id}`\r\n      : `${API_BASE_URL}/university-details/insert`;\r\n    const method = isUpdate ? \"PUT\" : \"POST\";\r\n\r\n    const body = {\r\n      ...formData,\r\n    };\r\n    if (!isUpdate) delete body.id;\r\n\r\n    const res = await fetch(url, {\r\n      method,\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(body),\r\n    });\r\n\r\n    if (res.ok) {\r\n      const result = await res.json();\r\n      onSave(result);\r\n      onClose();\r\n    } else {\r\n      console.error(\"Failed to save University Details\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    setDeleteConfirmationOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!formData.id) return;\r\n\r\n    try {\r\n      const res = await fetch(\r\n        `${API_BASE_URL}/university-details/delete/${formData.id}`,\r\n        { method: \"DELETE\" }\r\n      );\r\n\r\n      if (res.ok) {\r\n        onSave(null);\r\n        onClose();\r\n        setDeleteConfirmationOpen(false);\r\n      } else {\r\n        console.error(\"Failed to delete University Details\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error deleting University Details\", err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCancel = () => {\r\n    setDeleteConfirmationOpen(false);\r\n  };\r\n\r\n  const yesNoOptions = [\"Yes\", \"No\"];\r\n  const intakeYearOptions = [\"2025\", \"2026\"];\r\n\r\n  const conditionalFields = [\r\n    { select: \"previously_funded\", amount: \"previously_funded_amount\" },\r\n    { select: \"tuition\", amount: \"tuition_amount\" },\r\n    { select: \"accommodation\", amount: \"accommodation_fee\" },\r\n    { select: \"textbooks\", amount: \"textbooks_fee\" },\r\n    { select: \"travel\", amount: \"travel_fee\" },\r\n  ];\r\n\r\n  const bursaryConditionalFields = [\r\n    {\r\n      select: \"previous_bursary_org_1\",\r\n      name: \"previous_bursary_org_1_name\",\r\n      amount: \"previous_bursary_org_1_amount\",\r\n      contact: \"previous_bursary_org_1_contact\"\r\n    },\r\n    {\r\n      select: \"previous_bursary_org_2\",\r\n      name: \"previous_bursary_org_2_name\",\r\n      amount: \"previous_bursary_org_2_amount\",\r\n      contact: \"previous_bursary_org_2_contact\"\r\n    },\r\n    {\r\n      select: \"previous_bursary_org_3\",\r\n      name: \"previous_bursary_org_3_name\",\r\n      amount: \"previous_bursary_org_3_amount\",\r\n      contact: \"previous_bursary_org_3_contact\"\r\n    }\r\n  ];\r\n\r\n  const fieldStyles = {\r\n    backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n    borderRadius: '8px',\r\n    '& .MuiInputBase-input': {\r\n      color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n    },\r\n    '& .MuiFormLabel-root': {\r\n      color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n    },\r\n  };\r\n\r\n  const inputLabelProps = { style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } };\r\n\r\n  const renderField = (key, index) => {\r\n    if (\r\n      key === \"id\" ||\r\n      key === \"student_details_portal_id\" ||\r\n      key === \"university_details_date_stamp\"\r\n    ) {\r\n      return null;\r\n    }\r\n\r\n    let label = key.replace(/_/g, \" \");\r\n    label = label\r\n      .split(\" \")\r\n      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\r\n      .join(\" \");\r\n\r\n    const isConditionalSelect = conditionalFields.some(field => field.select === key);\r\n    const isConditionalamount = conditionalFields.some(field => field.amount === key);\r\n    const isBursarySelect = bursaryConditionalFields.some(field => field.select === key);\r\n    const isBursaryField = bursaryConditionalFields.some(field =>\r\n      field.name === key || field.amount === key || field.contact === key\r\n    );\r\n\r\n    if (isConditionalSelect) {\r\n      let customLabel = label;\r\n      if (key === \"tuition\") {\r\n        customLabel = \"Are you in need of financial assistance to cover your tuition fees?\";\r\n      } else if (key === \"accommodation\") {\r\n        customLabel = \"Are you in need of financial assistance to cover your accommodation fees?\";\r\n      } else if (key === \"textbooks\") {\r\n        customLabel = \"Are you in need of financial assistance to cover your textbooks fees?\";\r\n      } else if (key === \"travel\") {\r\n        customLabel = \"Are you in need of financial assistance to cover your travel fees?\";\r\n      } else if (key === \"previously_funded\") {\r\n        customLabel = \"Were you previously Funded by the Willowton SANZAF Bursary Fund?\";\r\n      }\r\n\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleAutocompleteChange(key, newValue)}\r\n            options={yesNoOptions}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label={customLabel} sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (isBursarySelect) {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleAutocompleteChange(key, newValue)}\r\n            options={yesNoOptions}\r\n            renderInput={(params) => (\r\n              <TextField\r\n                {...params}\r\n                label=\"Were you funded by an organization previously?\"\r\n                sx={fieldStyles}\r\n                InputLabelProps={inputLabelProps}\r\n              />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (isBursaryField) {\r\n      const relatedBursary = bursaryConditionalFields.find(field =>\r\n        field.name === key || field.amount === key || field.contact === key\r\n      );\r\n      if (formData[relatedBursary.select] !== \"Yes\") return null;\r\n    }\r\n\r\n    if (isConditionalamount) {\r\n      const relatedSelect = conditionalFields.find(field => field.amount === key).select;\r\n      if (formData[relatedSelect] !== \"Yes\") return null;\r\n    }\r\n\r\n    if (key === \"Semester\" || key === \"semester\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleAutocompleteChange(key, newValue)}\r\n            options={semesters}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label={label} sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"NQF_Level\" || key === \"nqf_level\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleAutocompleteChange(key, newValue)}\r\n            options={highestEducation}\r\n            renderInput={(params) => (\r\n              <TextField {...params} label={label} sx={fieldStyles} InputLabelProps={inputLabelProps} />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"Intake_Year\" || key === \"intake_year\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleAutocompleteChange(key, newValue)}\r\n            options={intakeYearOptions}\r\n            renderInput={(params) => (\r\n              <TextField\r\n                {...params}\r\n                label=\"My request for funding is for year\"\r\n                sx={fieldStyles}\r\n                InputLabelProps={inputLabelProps}\r\n              />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    if (key === \"total_university_expense\") {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <TextField\r\n            name={key}\r\n            label={label}\r\n            fullWidth\r\n            value={formData[key] || \"\"}\r\n            sx={fieldStyles}\r\n            InputLabelProps={inputLabelProps}\r\n            InputProps={{ readOnly: true }}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Grid item xs={12} key={index}>\r\n        <TextField\r\n          name={key}\r\n          label={label}\r\n          fullWidth\r\n          value={formData[key] || \"\"}\r\n          onChange={handleChange}\r\n          sx={fieldStyles}\r\n          InputLabelProps={inputLabelProps}\r\n        />\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Drawer anchor=\"right\" open={open} onClose={onClose}>\r\n      <Box sx={{\r\n        width: drawerWidth,\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        backgroundColor: isDarkMode ? '#2D3748' : '#fff'\r\n      }}>\r\n        <Box sx={{\r\n          p: 2,\r\n          borderBottom: \"1px solid #ccc\",\r\n          backgroundColor: isDarkMode ? '#1E293B' : '#e1f5fe'\r\n        }}>\r\n          <Typography variant=\"h6\" sx={{ fontWeight: \"bold\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n            University Details\r\n          </Typography>\r\n        </Box>\r\n\r\n        <Box sx={{ flex: 1, overflowY: \"auto\", p: 2 }}>\r\n          <Grid container spacing={2}>\r\n            {Object.keys(formData).map((key, index) => renderField(key, index))}\r\n          </Grid>\r\n        </Box>\r\n\r\n        <Divider />\r\n        <Box sx={{ p: 2, display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            <Button\r\n              onClick={onClose}\r\n              startIcon={<CloseIcon />}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              sx={{\r\n                borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n              }}\r\n            >\r\n              Close\r\n            </Button>\r\n            {formData.id && (\r\n              <Button\r\n                onClick={handleDeleteClick}\r\n                startIcon={<DeleteIcon />}\r\n                size=\"small\"\r\n                color=\"error\"\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  color: 'red',\r\n                }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Box>\r\n          <Button\r\n            onClick={handleSave}\r\n            startIcon={formData.id ? <SaveIcon /> : <AddIcon />}\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n          >\r\n            {formData.id ? \"Save\" : \"Create\"}\r\n          </Button>\r\n        </Box>\r\n\r\n        <Dialog open={deleteConfirmationOpen} onClose={handleDeleteCancel}>\r\n          <DialogTitle>Confirm Deletion</DialogTitle>\r\n          <DialogContent>\r\n            Are you sure you want to delete this record?\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleDeleteCancel} color=\"primary\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleDeleteConfirm} color=\"error\">\r\n              Delete\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </Box>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default UniversityDetailsDrawer;","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Drawer,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Divider,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n} from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\r\nimport { ThemeContext } from '../../config/ThemeContext'; // Import ThemeContext\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst AttachmentsDrawer = ({ open, onClose, studentId, attachmentId, onSave }) => {\r\n  const { isDarkMode } = useContext(ThemeContext);  // Access theme context\r\n\r\n  const [formData, setFormData] = useState({});\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n  // const [successMessage, setSuccessMessage] = useState(\"\");\r\n  // Check for larger or smaller screen size\r\n  const isLargeScreen = useMediaQuery(\"(min-width:600px)\");\r\n\r\n  // Drawer width based on screen size\r\n  const drawerWidth = isLargeScreen ? 500 : 330;\r\n\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setFormData({});\r\n      return;\r\n    }\r\n\r\n    if (!attachmentId) {\r\n      setFormData({\r\n        Attachments_Name: \"\",\r\n        Attachments_Description: \"\",\r\n        Attachment: null,\r\n        Student_Details_Portal_id: studentId,\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Editing mode\r\n    fetch(`${API_BASE_URL}/attachments/id/${attachmentId}`)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setFormData({\r\n          Attachments_Name: data.attachments_name || \"\",\r\n          Attachments_Description: data.attachments_description || \"\",\r\n          Attachment: null, // Don't preload binary data\r\n          id: data.id,\r\n          Student_Details_Portal_id: data.student_details_portal_id || studentId,\r\n        });\r\n      });\r\n  }, [open, attachmentId, studentId]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const fileNameWithoutExtension = file.name;\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        Attachments_Name: fileNameWithoutExtension,\r\n        Attachment: file,\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const isUpdate = !!formData.id;\r\n    const url = isUpdate\r\n      ? `${API_BASE_URL}/attachments/update/${formData.id}`\r\n      : `${API_BASE_URL}/attachments/insert`;\r\n    const method = isUpdate ? \"PUT\" : \"POST\";\r\n\r\n    const body = new FormData();\r\n    body.append(\"Attachments_Name\", formData.Attachments_Name);\r\n    body.append(\"Attachments_Description\", formData.Attachments_Description);\r\n    body.append(\"Student_Details_Portal_id\", formData.Student_Details_Portal_id);\r\n    if (formData.Attachment) {\r\n      body.append(\"Attachment\", formData.Attachment);\r\n    }\r\n\r\n    const res = await fetch(url, { method, body });\r\n\r\n    if (res.ok) {\r\n      const result = await res.json();\r\n      onSave(result);\r\n      // setSuccessMessage(isUpdate ? \"Updated successfully!\" : \"Created successfully!\");\r\n      onClose();\r\n    } else {\r\n      console.error(\"Failed to save attachment\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    setDeleteConfirmationOpen(true); // Open confirmation dialog\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!formData.id) return;\r\n    try {\r\n      await fetch(`${API_BASE_URL}/attachments/delete/${formData.id}`, {\r\n        method: \"DELETE\",\r\n      });\r\n      onSave(null);\r\n      // setSuccessMessage(\"Deleted successfully!\");\r\n      onClose();\r\n      setDeleteConfirmationOpen(false); // Close the confirmation dialog\r\n    } catch (err) {\r\n      console.error(\"Failed to delete attachment\", err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCancel = () => {\r\n    setDeleteConfirmationOpen(false); // Close the confirmation dialog\r\n  };\r\n\r\n  const handleViewFile = () => {\r\n    if (formData.id) {\r\n      window.open(`${API_BASE_URL}/attachments/view/${formData.id}`, \"_blank\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Drawer anchor=\"right\" open={open} onClose={onClose}>\r\n      <Box sx={{ width: drawerWidth, height: \"100%\", display: \"flex\", flexDirection: \"column\", backgroundColor: isDarkMode ? '#2D3748' : '#fff' }}>\r\n        {/* Header */}\r\n        <Box sx={{ p: 2, borderBottom: \"1px solid #ccc\", backgroundColor: isDarkMode ? '#1E293B' : '#e1f5fe' }}>\r\n          <Typography variant=\"h6\" sx={{ fontWeight: \"bold\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n            Attachment Details\r\n          </Typography>\r\n          {/* {successMessage && (\r\n            <Typography variant=\"body2\" color=\"success.main\" sx={{ mt: 1 }}>\r\n              {successMessage}\r\n            </Typography>\r\n          )} */}\r\n        </Box>\r\n\r\n        {/* Form Content */}\r\n        <Box sx={{ flex: 1, overflowY: \"auto\", p: 2 }}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n               <TextField\r\n                label=\"Description\"\r\n                name=\"Attachments_Description\"\r\n                fullWidth\r\n                value={formData.Attachments_Description || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  },\r\n                  '& .MuiFormLabel-root': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  },\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Attachment Name\"\r\n                name=\"Attachments_Name\"\r\n                fullWidth\r\n                disabled\r\n                value={formData.Attachments_Name || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  },\r\n                  '& .MuiFormLabel-root': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  },\r\n                  '& .MuiInputBase-input.Mui-disabled': {\r\n                    WebkitTextFillColor: isDarkMode ? 'white' : '#1E293B',  // Text color inside the input field when disabled\r\n                  },\r\n\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <Button variant=\"outlined\" component=\"label\" sx={{ width: \"100%\", borderColor: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n                Upload File\r\n                <input type=\"file\" hidden onChange={handleFileChange} />\r\n              </Button>\r\n            </Grid>\r\n            {formData.id && (\r\n              <Grid item xs={12}>\r\n                <Button\r\n                  variant=\"text\"\r\n                  color=\"primary\"\r\n                  onClick={handleViewFile}\r\n                  startIcon={<VisibilityIcon />}\r\n                  sx={{ width: \"100%\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}\r\n                >\r\n                  View/Download File\r\n                </Button>\r\n              </Grid>\r\n            )}\r\n          </Grid>\r\n        </Box>\r\n\r\n        {/* Footer */}\r\n        <Divider />\r\n        <Box sx={{ p: 2, display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            <Button\r\n              onClick={onClose}\r\n              startIcon={<CloseIcon />}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              sx={{\r\n                borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n              }}\r\n            >\r\n              Close\r\n            </Button>\r\n            {formData.id && (\r\n              <Button\r\n                onClick={handleDeleteClick}\r\n                startIcon={<DeleteIcon />}\r\n                color=\"error\"\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  color: 'red', // Red text color for delete button\r\n                }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Box>\r\n          <Button\r\n            onClick={handleSave}\r\n            startIcon={formData.id ? <SaveIcon /> : <AddIcon />}\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n          >\r\n            {formData.id ? \"Save\" : \"Create\"}\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <Dialog open={deleteConfirmationOpen} onClose={handleDeleteCancel}>\r\n        <DialogTitle>Confirm Deletion</DialogTitle>\r\n        <DialogContent>\r\n          Are you sure you want to delete this record?\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteCancel} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleDeleteConfirm} color=\"error\">\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default AttachmentsDrawer;\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport {\r\n  Drawer,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Divider,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n} from '@mui/material';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport SaveIcon from '@mui/icons-material/Save';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport { ThemeContext } from '../../config/ThemeContext'; // Import ThemeContext\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst ExpenseDetailsDrawer = ({ open, onClose, studentId, expenseDetailsId, onSave }) => {\r\n  const { isDarkMode } = useContext(ThemeContext);  // Access theme context\r\n  // Check for larger or smaller screen size\r\n  const isLargeScreen = useMediaQuery(\"(min-width:600px)\");\r\n\r\n  // Drawer width based on screen size\r\n  const drawerWidth = isLargeScreen ? 500 : 330;\r\n\r\n  const [formData, setFormData] = useState({\r\n    Father_Monthly_Salary: '',\r\n    Mother_Monthly_Salary: '',\r\n    Spouse_Monthly_Salary: '',\r\n    Applicant_Monthly_Salary: '',\r\n    Rent_Income: '',\r\n    Grants: '',\r\n    Other_Income: '',\r\n    Rent_Bond_Expense: '',\r\n    Rates_Expense: '',\r\n    Utilities_Expense: '',\r\n    Groceries_Expense: '',\r\n    Transport_Petrol_Expense: '',\r\n    Telephone_Expense: '',\r\n    Medical_Aid_Expense: '',\r\n    Insurance_Expense: '',\r\n    Other_Expense: '',\r\n    total_income: 0,\r\n    total_expenses: 0,\r\n  });\r\n\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (open && expenseDetailsId) {\r\n      fetch(`${API_BASE_URL}/expense-details/id/${expenseDetailsId}`)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          if (data) {\r\n            setFormData({\r\n              Father_Monthly_Salary: data.father_monthly_salary || '',\r\n              Mother_Monthly_Salary: data.mother_monthly_salary || '',\r\n              Spouse_Monthly_Salary: data.spouse_monthly_salary || '',\r\n              Applicant_Monthly_Salary: data.applicant_monthly_salary || '',\r\n              Rent_Income: data.rent_income || '',\r\n              Grants: data.grants || '',\r\n              Other_Income: data.other_income || '',\r\n              Rent_Bond_Expense: data.rent_bond_expense || '',\r\n              Rates_Expense: data.rates_expense || '',\r\n              Utilities_Expense: data.utilities_expense || '',\r\n              Groceries_Expense: data.groceries_expense || '',\r\n              Transport_Petrol_Expense: data.transport_petrol_expense || '',\r\n              Telephone_Expense: data.telephone_expense || '',\r\n              Medical_Aid_Expense: data.medical_aid_expense || '',\r\n              Insurance_Expense: data.insurance_expense || '',\r\n              Other_Expense: data.other_expense || '',\r\n              total_income: Number(data.total_income) || 0,\r\n              total_expenses: Number(data.total_expenses) || 0,\r\n            });\r\n          }\r\n        })\r\n        .catch(error => console.error('Error fetching expense details:', error));\r\n    } else {\r\n      setFormData({\r\n        Father_Monthly_Salary: '',\r\n        Mother_Monthly_Salary: '',\r\n        Spouse_Monthly_Salary: '',\r\n        Applicant_Monthly_Salary: '',\r\n        Rent_Income: '',\r\n        Grants: '',\r\n        Other_Income: '',\r\n        Rent_Bond_Expense: '',\r\n        Rates_Expense: '',\r\n        Utilities_Expense: '',\r\n        Groceries_Expense: '',\r\n        Transport_Petrol_Expense: '',\r\n        Telephone_Expense: '',\r\n        Medical_Aid_Expense: '',\r\n        Insurance_Expense: '',\r\n        Other_Expense: '',\r\n        total_income: 0,\r\n        total_expenses: 0,\r\n      });\r\n    }\r\n  }, [open, expenseDetailsId]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    // Update form data\r\n    setFormData(prev => {\r\n      const newFormData = { ...prev, [name]: value };\r\n\r\n      // Recalculate total income and total expenses\r\n      const incomeFields = [\r\n        'Father_Monthly_Salary', 'Mother_Monthly_Salary', 'Spouse_Monthly_Salary',\r\n        'Applicant_Monthly_Salary', 'Rent_Income', 'Grants', 'Other_Income'\r\n      ];\r\n      const expenseFields = [\r\n        'Rent_Bond_Expense', 'Rates_Expense', 'Utilities_Expense', 'Groceries_Expense',\r\n        'Transport_Petrol_Expense', 'Telephone_Expense', 'Medical_Aid_Expense', 'Insurance_Expense', 'Other_Expense'\r\n      ];\r\n\r\n      const totalIncome = incomeFields.reduce((total, key) => total + (parseFloat(newFormData[key]) || 0), 0);\r\n      const totalExpenses = expenseFields.reduce((total, key) => total + (parseFloat(newFormData[key]) || 0), 0);\r\n\r\n      newFormData.total_income = totalIncome;\r\n      newFormData.total_expenses = totalExpenses;\r\n\r\n      return newFormData;\r\n    });\r\n  };\r\n\r\n  const handleSave = () => {\r\n    // Calculate total income and total expenses if not already set\r\n    const totalIncome = Object.keys(formData)\r\n      .filter(key => key.includes(\"Salary\") || key.includes(\"Income\"))\r\n      .reduce((total, key) => total + (parseFloat(formData[key]) || 0), 0);\r\n\r\n    const totalExpenses = Object.keys(formData)\r\n      .filter(key => key.includes(\"Expense\"))\r\n      .reduce((total, key) => total + (parseFloat(formData[key]) || 0), 0);\r\n\r\n    const updatedFormData = {\r\n      ...formData,\r\n      total_income: totalIncome.toString(),\r\n      total_expenses: totalExpenses.toString()\r\n    };\r\n\r\n    const stringFormData = Object.keys(updatedFormData).reduce((acc, key) => {\r\n      const value = updatedFormData[key];\r\n      acc[key] = value !== '' ? value.toString() : value;  // Convert to string\r\n      return acc;\r\n    }, {});\r\n\r\n    const url = expenseDetailsId\r\n      ? `${API_BASE_URL}/expense-details/update/${expenseDetailsId}`\r\n      : `${API_BASE_URL}/expense-details/insert`;\r\n\r\n    const method = expenseDetailsId ? 'PUT' : 'POST';\r\n\r\n    fetch(url, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ ...stringFormData, student_details_portal_id: studentId }),\r\n    })\r\n      .then(res => res.json())\r\n      .then(savedData => {\r\n        onSave(savedData);\r\n        onClose();\r\n      })\r\n      .catch(error => {\r\n        console.error('Error saving expense details:', error);\r\n      });\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    setDeleteConfirmationOpen(true); // Open confirmation dialog\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!expenseDetailsId) return;\r\n    try {\r\n      await fetch(`${API_BASE_URL}/expense-details/delete/${expenseDetailsId}`, {\r\n        method: 'DELETE',\r\n      });\r\n      onSave(null);\r\n      onClose();\r\n      setDeleteConfirmationOpen(false); // Close the confirmation dialog\r\n    } catch (err) {\r\n      console.error('Error deleting expense details:', err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCancel = () => {\r\n    setDeleteConfirmationOpen(false); // Close the confirmation dialog\r\n  };\r\n\r\n  return (\r\n    <Drawer anchor=\"right\" open={open} onClose={onClose}>\r\n      <Box sx={{ width: drawerWidth, height: '100%', display: 'flex', flexDirection: 'column', backgroundColor: isDarkMode ? '#2D3748' : '#fff' }}>\r\n        {/* Header */}\r\n        <Box sx={{ p: 2, borderBottom: '1px solid #ccc', backgroundColor: isDarkMode ? '#1E293B' : '#e1f5fe' }}>\r\n          <Typography variant=\"h6\" sx={{ fontWeight: \"bold\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n            Financial Details\r\n          </Typography>\r\n        </Box>\r\n\r\n        {/* Form Content */}\r\n        <Box sx={{ flex: 1, overflowY: 'auto', p: 2 }}>\r\n          <Grid container spacing={2}>\r\n            {/* Income Fields */}\r\n            {['Applicant_Monthly_Salary', 'Father_Monthly_Salary', 'Mother_Monthly_Salary', 'Spouse_Monthly_Salary',  'Rent_Income', 'Grants', 'Other_Income'].map((key, idx) => {\r\n              const label = key.replace(/_/g, ' ').replace(/\\b\\w/g, char => char.toUpperCase());\r\n              return (\r\n                <Grid item xs={12} key={idx}>\r\n                  <TextField\r\n                    label={label}\r\n                    name={key}\r\n                    type=\"number\"\r\n                    value={formData[key]}\r\n                    onChange={handleChange}\r\n                    fullWidth\r\n                    variant=\"outlined\"\r\n                    InputProps={{ inputMode: 'decimal' }}\r\n                    sx={{\r\n                      backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                      color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                      borderRadius: '8px',\r\n                      '& .MuiInputBase-input': {\r\n                        color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                      }\r\n                    }}\r\n                    InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n                  />\r\n                </Grid>\r\n              );\r\n            })}\r\n\r\n            {/* Expense Fields */}\r\n            {['Rent_Bond_Expense', 'Rates_Expense', 'Utilities_Expense', 'Groceries_Expense', 'Transport_Petrol_Expense', 'Telephone_Expense', 'Medical_Aid_Expense', 'Insurance_Expense', 'Other_Expense'].map((key, idx) => {\r\n              const label = key.replace(/_/g, ' ').replace(/\\b\\w/g, char => char.toUpperCase());\r\n              return (\r\n                <Grid item xs={12} key={idx}>\r\n                  <TextField\r\n                    label={label}\r\n                    name={key}\r\n                    type=\"number\"\r\n                    value={formData[key]}\r\n                    onChange={handleChange}\r\n                    fullWidth\r\n                    variant=\"outlined\"\r\n                    InputProps={{ inputMode: 'decimal' }}\r\n                    sx={{\r\n                      backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                      color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                      borderRadius: '8px',\r\n                      '& .MuiInputBase-input': {\r\n                        color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                      }\r\n                    }}\r\n                    InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n                  />\r\n                </Grid>\r\n              );\r\n            })}\r\n\r\n            {/* Read-only Total Income and Total Expenses Fields */}\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Total Income\"\r\n                value={formData.total_income.toFixed(2)} // Display total income\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputProps={{\r\n                  readOnly: true, // Make Total Income field read-only\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Total Expenses\"\r\n                value={formData.total_expenses.toFixed(2)} // Display total expenses\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputProps={{\r\n                  readOnly: true, // Make Total Expenses field read-only\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n\r\n        {/* Footer */}\r\n        <Divider />\r\n        <Box sx={{ p: 2, display: 'flex', justifyContent: 'space-between' }}>\r\n          <Box sx={{ display: 'flex', gap: 1 }}>\r\n            <Button\r\n              onClick={onClose}\r\n              startIcon={<CloseIcon />}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              sx={{\r\n                borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n              }}\r\n            >\r\n              Close\r\n            </Button>\r\n            {expenseDetailsId && (\r\n              <Button\r\n                onClick={handleDeleteClick}\r\n                startIcon={<DeleteIcon />}\r\n                size=\"small\"\r\n                color=\"error\"\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  color: 'red', // Red text color for delete button\r\n                }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Box>\r\n          <Button\r\n            onClick={handleSave}\r\n            startIcon={expenseDetailsId ? <SaveIcon /> : <AddIcon />}\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n          >\r\n            {expenseDetailsId ? 'Save' : 'Create'}\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <Dialog open={deleteConfirmationOpen} onClose={handleDeleteCancel}>\r\n        <DialogTitle>Confirm Deletion</DialogTitle>\r\n        <DialogContent>\r\n          Are you sure you want to delete this record?\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteCancel} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleDeleteConfirm} color=\"error\">\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default ExpenseDetailsDrawer;\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport {\r\n  Drawer,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Divider,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle\r\n} from '@mui/material';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport SaveIcon from '@mui/icons-material/Save';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport { ThemeContext } from '../../config/ThemeContext'; // Import ThemeContext\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst AssetsLiabilitiesDrawer = ({ open, onClose, studentId, assetLiabilityId, onSave }) => {\r\n  const { isDarkMode } = useContext(ThemeContext);  // Access theme context\r\n  // Check for larger or smaller screen size\r\n  const isLargeScreen = useMediaQuery(\"(min-width:600px)\");\r\n\r\n  // Drawer width based on screen size\r\n  const drawerWidth = isLargeScreen ? 500 : 330;\r\n\r\n  const [formData, setFormData] = useState({\r\n    Gold_Silver: '',\r\n    Cash_in_Bank: '',\r\n    Investments: '',\r\n    Liabilities: ''\r\n  });\r\n\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n  // const [successMessage, setSuccessMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (open && assetLiabilityId) {\r\n      fetch(`${API_BASE_URL}/assets-liabilities/id/${assetLiabilityId}`)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          if (data) {\r\n            setFormData({\r\n              Gold_Silver: data.gold_silver || '',\r\n              Cash_in_Bank: data.cash_in_bank || '',\r\n              Investments: data.investments || '',\r\n              Liabilities: data.liabilities || ''\r\n            });\r\n          }\r\n        })\r\n        .catch(console.error);\r\n    } else {\r\n      setFormData({\r\n        Gold_Silver: '',\r\n        Cash_in_Bank: '',\r\n        Investments: '',\r\n        Liabilities: ''\r\n      });\r\n    }\r\n  }, [open, assetLiabilityId]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSave = () => {\r\n    const url = assetLiabilityId\r\n      ? `${API_BASE_URL}/assets-liabilities/update/${assetLiabilityId}`\r\n      : `${API_BASE_URL}/assets-liabilities/insert`;\r\n    const method = assetLiabilityId ? \"PUT\" : \"POST\";\r\n\r\n    fetch(url, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ ...formData, student_details_portal_id: studentId })\r\n    })\r\n      .then(res => res.json())\r\n      .then(savedData => {\r\n        onSave(savedData);\r\n        // setSuccessMessage(assetLiabilityId ? 'Updated successfully!' : 'Created successfully!');\r\n        onClose();\r\n      })\r\n      .catch(console.error);\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    setDeleteConfirmationOpen(true); // Open confirmation dialog\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!assetLiabilityId) return;\r\n    try {\r\n      await fetch(`${API_BASE_URL}/assets-liabilities/delete/${assetLiabilityId}`, {\r\n        method: \"DELETE\"\r\n      });\r\n      onSave(null);\r\n      // setSuccessMessage('Deleted successfully!');\r\n      onClose();\r\n      setDeleteConfirmationOpen(false); // Close the confirmation dialog\r\n    } catch (err) {\r\n      console.error(\"Error deleting asset/liability:\", err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCancel = () => {\r\n    setDeleteConfirmationOpen(false); // Close the confirmation dialog\r\n  };\r\n\r\n  return (\r\n    <Drawer anchor=\"right\" open={open} onClose={onClose}>\r\n      <Box sx={{ width: drawerWidth, height: '100%', display: 'flex', flexDirection: 'column', backgroundColor: isDarkMode ? '#2D3748' : '#fff' }}>\r\n        {/* Header */}\r\n        <Box sx={{ p: 2, borderBottom: '1px solid #ccc', backgroundColor: isDarkMode ? '#1E293B' : '#e1f5fe' }}>\r\n          <Typography variant=\"h6\" sx={{ fontWeight: \"bold\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n            Assets & Liabilities\r\n          </Typography>\r\n          {/* {successMessage && (\r\n            <Typography variant=\"body2\" color=\"success.main\" sx={{ mt: 1 }}>\r\n              {successMessage}\r\n            </Typography>\r\n          )} */}\r\n        </Box>\r\n\r\n        {/* Form Content */}\r\n        <Box sx={{ flex: 1, overflowY: 'auto', p: 2 }}>\r\n          <Grid container spacing={2}>\r\n            {Object.keys(formData).map((key, idx) => {\r\n              const label = key\r\n                .replace(/_/g, ' ')  // Replace underscores with spaces\r\n                .replace(/\\b\\w/g, char => char.toUpperCase()); // Capitalize the first letter of each word\r\n\r\n              return (\r\n                <Grid item xs={12} key={idx}>\r\n                  <TextField\r\n                    label={label}\r\n                    name={key}\r\n                    value={formData[key]}\r\n                    onChange={handleChange}\r\n                    fullWidth\r\n                    type=\"number\" // Allow numbers only (including decimals)\r\n                    variant=\"outlined\"\r\n                    InputProps={{\r\n                      inputMode: 'decimal', // Enable decimal input mode for numbers\r\n                    }}\r\n                    sx={{\r\n                      backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                      color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                      borderRadius: '8px',\r\n                      '& .MuiInputBase-input': {\r\n                        color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                      }\r\n                    }}\r\n                    InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n                  />\r\n                </Grid>\r\n              );\r\n            })}\r\n          </Grid>\r\n        </Box>\r\n\r\n        {/* Footer */}\r\n        <Divider />\r\n        <Box sx={{ p: 2, display: 'flex', justifyContent: 'space-between' }}>\r\n          <Box sx={{ display: 'flex', gap: 1 }}>\r\n            <Button\r\n              onClick={onClose}\r\n              startIcon={<CloseIcon />}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              sx={{\r\n                borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n              }}\r\n            >\r\n              Close\r\n            </Button>\r\n            {assetLiabilityId && (\r\n              <Button\r\n                onClick={handleDeleteClick}\r\n                startIcon={<DeleteIcon />}\r\n                size=\"small\"\r\n                color=\"error\"\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  color: 'red', // Red text color for delete button\r\n                }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Box>\r\n          <Button\r\n            onClick={handleSave}\r\n            startIcon={assetLiabilityId ? <SaveIcon /> : <AddIcon />}\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n          >\r\n            {assetLiabilityId ? 'Save' : 'Create'}\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <Dialog open={deleteConfirmationOpen} onClose={handleDeleteCancel}>\r\n        <DialogTitle>Confirm Deletion</DialogTitle>\r\n        <DialogContent>\r\n          Are you sure you want to delete this record?\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteCancel} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleDeleteConfirm} color=\"error\">\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default AssetsLiabilitiesDrawer;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Drawer,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Divider,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle\r\n} from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\r\nimport { ThemeContext } from '../../config/ThemeContext'; // Import ThemeContext\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst AcademicResultsDrawer = ({ open, onClose, studentId, resultId, onSave }) => {\r\n  const { isDarkMode } = useContext(ThemeContext);  // Access theme context\r\n\r\n  const [formData, setFormData] = useState({});\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n  // Check for larger or smaller screen size\r\n  const isLargeScreen = useMediaQuery(\"(min-width:600px)\");\r\n\r\n  // Drawer width based on screen size\r\n  const drawerWidth = isLargeScreen ? 500 : 330;\r\n\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setFormData({});\r\n      return;\r\n    }\r\n\r\n    if (!resultId) {\r\n      setFormData({\r\n        Results_Module: \"\",\r\n        Results_Percentage: \"\",\r\n        Results_Attachment: null,\r\n        Results_Attachment_Name: \"\",\r\n        Student_Details_Portal_id: studentId\r\n      });\r\n      return;\r\n    }\r\n\r\n    fetch(`${API_BASE_URL}/academic-results/id/${resultId}`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setFormData({\r\n          Results_Module: data.results_module || \"\",\r\n          Results_Percentage: data.results_percentage || \"\",\r\n          Results_Attachment: null,\r\n          Results_Attachment_Name: data.results_attachment_name || \"\",\r\n          id: data.id,\r\n          Student_Details_Portal_id: data.student_details_portal_id || studentId\r\n        });\r\n      });\r\n  }, [open, resultId, studentId]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        Results_Attachment: file,\r\n        Results_Attachment_Name: file.name\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const isUpdate = !!formData.id;\r\n    const url = isUpdate\r\n      ? `${API_BASE_URL}/academic-results/update/${formData.id}`\r\n      : `${API_BASE_URL}/academic-results/insert`;\r\n    const method = isUpdate ? \"PUT\" : \"POST\";\r\n\r\n    const body = new FormData();\r\n    body.append(\"Results_Module\", formData.Results_Module);\r\n    body.append(\"Results_Percentage\", formData.Results_Percentage);\r\n    body.append(\"Student_Details_Portal_id\", formData.Student_Details_Portal_id);\r\n    if (formData.Results_Attachment) {\r\n      body.append(\"Results_Attachment\", formData.Results_Attachment);\r\n    }\r\n\r\n    const res = await fetch(url, { method, body });\r\n\r\n    if (res.ok) {\r\n      const result = await res.json();\r\n      onSave(result);\r\n      onClose();\r\n    } else {\r\n      console.error(\"Failed to save academic result\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    setDeleteConfirmationOpen(true); // Open confirmation dialog\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!formData.id) return;\r\n    try {\r\n      await fetch(`${API_BASE_URL}/academic-results/delete/${formData.id}`, {\r\n        method: \"DELETE\"\r\n      });\r\n      onSave(null);\r\n      onClose();\r\n      setDeleteConfirmationOpen(false); // Close confirmation dialog\r\n    } catch (err) {\r\n      console.error(\"Failed to delete academic result\", err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCancel = () => {\r\n    setDeleteConfirmationOpen(false); // Close confirmation dialog\r\n  };\r\n\r\n  const handleViewFile = () => {\r\n    if (formData.id) {\r\n      window.open(`${API_BASE_URL}/academic-results/view/${formData.id}`, \"_blank\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Drawer anchor=\"right\" open={open} onClose={onClose}>\r\n      <Box sx={{\r\n        width: drawerWidth,\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        backgroundColor: isDarkMode ? '#2D3748' : '#fff' // Background color based on dark/light mode\r\n      }}>\r\n        {/* Header */}\r\n        <Box sx={{\r\n          p: 2,\r\n          borderBottom: '1px solid #ccc',\r\n          backgroundColor: isDarkMode ? '#1E293B' : '#e1f5fe'\r\n        }}>\r\n          <Typography variant=\"h6\" sx={{ fontWeight: \"bold\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n            Academic Result Details\r\n          </Typography>\r\n        </Box>\r\n\r\n        {/* Form Content */}\r\n        <Box sx={{ flex: 1, overflowY: 'auto', p: 2 }}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Module Name\"\r\n                name=\"Results_Module\"\r\n                fullWidth\r\n                value={formData.Results_Module || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Percentage\"\r\n                name=\"Results_Percentage\"\r\n                fullWidth\r\n                value={formData.Results_Percentage || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Attachment Name\"\r\n                name=\"Results_Attachment_Name\"\r\n                fullWidth\r\n                value={formData.Results_Attachment_Name || \"\"}\r\n                onChange={handleChange}\r\n                disabled\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  },\r\n                  '& .MuiInputBase-input.Mui-disabled': {\r\n                    WebkitTextFillColor: isDarkMode ? 'white' : '#1E293B',  // Text color inside the input field when disabled\r\n                  },\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <Button variant=\"outlined\" component=\"label\" sx={{ width: \"100%\" }}>\r\n                Upload File\r\n                <input type=\"file\" hidden onChange={handleFileChange} />\r\n              </Button>\r\n            </Grid>\r\n            {formData.id && formData.Results_Attachment_Name && (\r\n              <Grid item xs={12}>\r\n                <Button\r\n                  variant=\"text\"\r\n                  color=\"primary\"\r\n                  onClick={handleViewFile}\r\n                  startIcon={<VisibilityIcon />}\r\n                  sx={{ width: \"100%\" }}\r\n                >\r\n                  View/Download File\r\n                </Button>\r\n              </Grid>\r\n            )}\r\n          </Grid>\r\n        </Box>\r\n\r\n        {/* Footer */}\r\n        <Divider />\r\n        <Box sx={{\r\n          p: 2,\r\n          display: 'flex',\r\n          justifyContent: 'space-between'\r\n        }}>\r\n          <Box sx={{ display: 'flex', gap: 1 }}>\r\n            <Button\r\n              onClick={onClose}\r\n              startIcon={<CloseIcon />}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              sx={{\r\n                borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n              }}\r\n            >\r\n              Close\r\n            </Button>\r\n            {formData.id && (\r\n              <Button\r\n                onClick={handleDeleteClick}\r\n                startIcon={<DeleteIcon />}\r\n                size=\"small\"\r\n                color=\"error\"\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  color: 'red', // Red text color for delete button\r\n                }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Box>\r\n          <Button\r\n            onClick={handleSave}\r\n            startIcon={formData.id ? <SaveIcon /> : <AddIcon />}\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n          >\r\n            {formData.id ? 'Save' : 'Create'}\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Confirmation Dialog for Deletion */}\r\n      <Dialog open={deleteConfirmationOpen} onClose={handleDeleteCancel}>\r\n        <DialogTitle>Confirm Deletion</DialogTitle>\r\n        <DialogContent>\r\n          Are you sure you want to delete this record?\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteCancel} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleDeleteConfirm} color=\"error\">\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default AcademicResultsDrawer;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Drawer,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Divider,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle\r\n} from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\r\nimport { ThemeContext } from '../../config/ThemeContext'; // Import ThemeContext\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst VoluntaryServiceDrawer = ({ open, onClose, studentId, recordId, onSave }) => {\r\n  const { isDarkMode } = useContext(ThemeContext);  // Access theme context\r\n\r\n  const [formData, setFormData] = useState({});\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n  // Check for larger or smaller screen size\r\n  const isLargeScreen = useMediaQuery(\"(min-width:600px)\");\r\n\r\n  // Drawer width based on screen size\r\n  const drawerWidth = isLargeScreen ? 500 : 330;\r\n\r\n  useEffect(() => {\r\n    if (!open) return;\r\n\r\n    if (!recordId) {\r\n      setFormData({\r\n        Organisation: \"\",\r\n        Contact_Person: \"\",\r\n        Contact_Person_Number: \"\",\r\n        Hours_Contributed: \"\",\r\n        Proof_of_Service: null,\r\n        Service_Attachment_Name: \"\",\r\n        Student_Details_Portal_id: studentId\r\n      });\r\n    } else {\r\n      fetch(`${API_BASE_URL}/voluntary-service/id/${recordId}`)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          setFormData({\r\n            Organisation: data.organisation || \"\",\r\n            Contact_Person: data.contact_person || \"\",\r\n            Contact_Person_Number: data.contact_person_number || \"\",\r\n            Hours_Contributed: data.hours_contributed || \"\",\r\n            Proof_of_Service: null,\r\n            Service_Attachment_Name: data.service_attachment_name || \"\",\r\n            id: data.id,\r\n            Student_Details_Portal_id: data.student_details_portal_id || studentId\r\n          });\r\n        });\r\n    }\r\n  }, [open, recordId, studentId]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        Proof_of_Service: file,\r\n        Service_Attachment_Name: file.name\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const isUpdate = !!formData.id;\r\n    const url = isUpdate\r\n      ? `${API_BASE_URL}/voluntary-service/update/${formData.id}`\r\n      : `${API_BASE_URL}/voluntary-service/insert`;\r\n    const method = isUpdate ? \"PUT\" : \"POST\";\r\n  \r\n    const body = new FormData();\r\n    body.append(\"Organisation\", formData.Organisation);\r\n    body.append(\"Contact_Person\", formData.Contact_Person);\r\n    body.append(\"Contact_Person_Number\", formData.Contact_Person_Number);\r\n    body.append(\"Hours_Contributed\", formData.Hours_Contributed);\r\n    body.append(\"Student_Details_Portal_id\", formData.Student_Details_Portal_id);\r\n    \r\n    // If a new file is selected, append it\r\n    if (formData.Proof_of_Service) {\r\n      body.append(\"Proof_of_Service\", formData.Proof_of_Service);\r\n    }\r\n  \r\n    const res = await fetch(url, { method, body });\r\n    if (res.ok) {\r\n      const result = await res.json();\r\n      onSave(result);\r\n      onClose();\r\n    } else {\r\n      console.error(\"Failed to save voluntary service\");\r\n    }\r\n  };  \r\n\r\n  const handleDeleteClick = () => {\r\n    setDeleteConfirmationOpen(true); // Open confirmation dialog\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!formData.id) return;\r\n    try {\r\n      await fetch(`${API_BASE_URL}/voluntary-service/delete/${formData.id}`, {\r\n        method: \"DELETE\"\r\n      });\r\n      onSave(null);\r\n      onClose();\r\n      setDeleteConfirmationOpen(false); // Close confirmation dialog\r\n    } catch (err) {\r\n      console.error(\"Failed to delete voluntary service\", err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCancel = () => {\r\n    setDeleteConfirmationOpen(false); // Close confirmation dialog\r\n  };\r\n\r\n  const handleViewFile = () => {\r\n    if (formData.id) {\r\n      window.open(`${API_BASE_URL}/voluntary-service/view/${formData.id}`, \"_blank\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Drawer anchor=\"right\" open={open} onClose={onClose}>\r\n      <Box sx={{\r\n        width: drawerWidth,\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        backgroundColor: isDarkMode ? '#2D3748' : '#fff' // Background color based on dark/light mode\r\n      }}>\r\n        {/* Header */}\r\n        <Box sx={{\r\n          p: 2,\r\n          borderBottom: '1px solid #ccc',\r\n          backgroundColor: isDarkMode ? '#1E293B' : '#e1f5fe'\r\n        }}>\r\n          <Typography variant=\"h6\" sx={{ fontWeight: \"bold\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n            Voluntary Service\r\n          </Typography>\r\n        </Box>\r\n\r\n        {/* Form Content */}\r\n        <Box sx={{ flex: 1, overflowY: \"auto\", p: 2 }}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Organisation\"\r\n                name=\"Organisation\"\r\n                fullWidth\r\n                value={formData.Organisation || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Contact Person\"\r\n                name=\"Contact_Person\"\r\n                fullWidth\r\n                value={formData.Contact_Person || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n            <TextField\r\n                label=\"Contact Number\"\r\n                name=\"Contact_Person_Number\"\r\n                fullWidth\r\n                value={formData.Contact_Person_Number || \"\"}\r\n                onChange={handleChange}\r\n                inputProps={{\r\n                  type: 'tel', // Allows for easier entry of phone numbers\r\n                  maxLength: 10, // Restrict input to 10 digits\r\n                  pattern: \"[0-9]{10}\", // Only allow numbers, exactly 10 digits\r\n                }}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Hours Contributed\"\r\n                name=\"Hours_Contributed\"\r\n                fullWidth\r\n                value={formData.Hours_Contributed || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Attachment Name\"\r\n                name=\"Service_Attachment_Name\"\r\n                fullWidth\r\n                value={formData.Service_Attachment_Name || \"\"}\r\n                onChange={handleChange}\r\n                disabled\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  },\r\n                  '& .MuiInputBase-input.Mui-disabled': {\r\n                    WebkitTextFillColor: isDarkMode ? 'white' : '#1E293B',  // Text color inside the input field when disabled\r\n                  },\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <Button variant=\"outlined\" component=\"label\" sx={{ width: '100%' }}>\r\n                Upload Proof\r\n                <input type=\"file\" hidden onChange={handleFileChange} />\r\n              </Button>\r\n            </Grid>\r\n            {formData.id && formData.Service_Attachment_Name && (\r\n              <Grid item xs={12}>\r\n                <Button\r\n                  variant=\"text\"\r\n                  color=\"primary\"\r\n                  onClick={handleViewFile}\r\n                  startIcon={<VisibilityIcon />}\r\n                  sx={{ width: '100%' }}\r\n                >\r\n                  View/Download File\r\n                </Button>\r\n              </Grid>\r\n            )}\r\n          </Grid>\r\n        </Box>\r\n\r\n        {/* Footer */}\r\n        <Divider />\r\n        <Box sx={{ p: 2, display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            <Button\r\n              onClick={onClose}\r\n              startIcon={<CloseIcon />}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              sx={{\r\n                borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n              }}\r\n            >\r\n              Close\r\n            </Button>\r\n            {formData.id && (\r\n              <Button\r\n                onClick={handleDeleteClick}\r\n                startIcon={<DeleteIcon />}\r\n                size=\"small\"\r\n                color=\"error\"\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  color: 'red',\r\n                }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Box>\r\n          <Button\r\n            onClick={handleSave}\r\n            startIcon={formData.id ? <SaveIcon /> : <AddIcon />}\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n          >\r\n            {formData.id ? \"Save\" : \"Create\"}\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Confirmation Dialog for Deletion */}\r\n      <Dialog open={deleteConfirmationOpen} onClose={handleDeleteCancel}>\r\n        <DialogTitle>Confirm Deletion</DialogTitle>\r\n        <DialogContent>\r\n          Are you sure you want to delete this record?\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteCancel} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleDeleteConfirm} color=\"error\">\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default VoluntaryServiceDrawer;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Drawer,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Divider,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle\r\n} from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\r\nimport { ThemeContext } from '../../config/ThemeContext';\r\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\r\nimport { LocalizationProvider } from \"@mui/x-date-pickers/LocalizationProvider\";\r\nimport { format, parse } from 'date-fns';\r\nimport { AdapterDateFns } from \"@mui/x-date-pickers/AdapterDateFns\";\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst PaymentDrawer = ({ open, onClose, studentId, recordId, onSave }) => {\r\n  const { isDarkMode } = useContext(ThemeContext);\r\n\r\n  const [formData, setFormData] = useState({});\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n  const [selectedDate, setSelectedDate] = useState(null);\r\n\r\n  const isLargeScreen = useMediaQuery(\"(min-width:600px)\");\r\n  const drawerWidth = isLargeScreen ? 500 : 330;\r\n\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  const createdBy = `${user?.first_name} ${user?.last_name}`;\r\n\r\n  useEffect(() => {\r\n    if (!open) return;\r\n\r\n    if (!recordId) {\r\n      setFormData({\r\n        Payments_Expense_Type: \"\",\r\n        Payments_Vendor: \"\",\r\n        Payments_Expense_Amount: \"\",\r\n        Payments_Date: \"\",\r\n        Payments_ET_Number: \"\",\r\n        Payments_Attachment_Name: \"\",\r\n        Proof_of_Payment: null,\r\n        Payment_Created_By: createdBy,\r\n        Student_Details_Portal_id: studentId\r\n      });\r\n      setSelectedDate(null);\r\n    } else {\r\n      fetch(`${API_BASE_URL}/payments/id/${recordId}`)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          const date = data.payments_date ? parse(data.payments_date, 'MM/dd/yyyy', new Date()) : null;\r\n          setSelectedDate(date);\r\n          setFormData({\r\n            Payments_Expense_Type: data.payments_expense_type || \"\",\r\n            Payments_Vendor: data.payments_vendor || \"\",\r\n            Payments_Expense_Amount: data.payments_expense_amount || \"\",\r\n            Payments_Date: data.payments_date || \"\",\r\n            Payments_ET_Number: data.payments_et_number || \"\",\r\n            Payments_Attachment_Name: data.payments_attachment_name || \"\",\r\n            Proof_of_Payment: null,\r\n            Payment_Created_By: data.payment_created_by || createdBy,\r\n            id: data.id,\r\n            Student_Details_Portal_id: data.student_details_portal_id || studentId\r\n          });\r\n        });\r\n    }\r\n  }, [open, recordId, studentId, createdBy]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        Proof_of_Payment: file,\r\n        Payments_Attachment_Name: file.name\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleViewFile = () => {\r\n    if (formData.id) {\r\n      window.open(`${API_BASE_URL}/payments/view/${formData.id}`, \"_blank\");\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const isUpdate = !!formData.id;\r\n    const url = isUpdate\r\n      ? `${API_BASE_URL}/payments/update/${formData.id}`\r\n      : `${API_BASE_URL}/payments/insert`;\r\n    const method = isUpdate ? \"PUT\" : \"POST\";\r\n\r\n    const body = new FormData();\r\n    body.append(\"Payments_Expense_Type\", formData.Payments_Expense_Type);\r\n    body.append(\"Payments_Vendor\", formData.Payments_Vendor);\r\n    body.append(\"Payments_Expense_Amount\", formData.Payments_Expense_Amount);\r\n    body.append(\"Payments_Date\", formData.Payments_Date);\r\n    body.append(\"Payments_ET_Number\", formData.Payments_ET_Number);\r\n    body.append(\"Payments_Attachment_Name\", formData.Payments_Attachment_Name);\r\n    body.append(\"Payment_Created_By\", formData.Payment_Created_By);\r\n    body.append(\"Student_Details_Portal_id\", formData.Student_Details_Portal_id);\r\n    if (formData.Proof_of_Payment) {\r\n      body.append(\"Proof_of_Payment\", formData.Proof_of_Payment);\r\n    }\r\n\r\n    const res = await fetch(url, { method, body });\r\n    if (res.ok) {\r\n      const result = await res.json();\r\n      onSave(result);\r\n      onClose();\r\n    } else {\r\n      console.error(\"Failed to save payment\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    setDeleteConfirmationOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!formData.id) return;\r\n    try {\r\n      await fetch(`${API_BASE_URL}/payments/delete/${formData.id}`, {\r\n        method: \"DELETE\"\r\n      });\r\n      onSave(null);\r\n      onClose();\r\n      setDeleteConfirmationOpen(false);\r\n    } catch (err) {\r\n      console.error(\"Failed to delete payment\", err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCancel = () => {\r\n    setDeleteConfirmationOpen(false);\r\n  };\r\n\r\n  const handleDateChange = (newDate) => {\r\n    setSelectedDate(newDate);\r\n    const formattedDate = newDate ? format(newDate, 'MM/dd/yyyy') : '';\r\n    setFormData(prev => ({ ...prev, Payments_Date: formattedDate }));\r\n  };\r\n\r\n  return (\r\n    <Drawer anchor=\"right\" open={open} onClose={onClose}>\r\n      <Box sx={{\r\n        width: drawerWidth,\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        backgroundColor: isDarkMode ? '#2D3748' : '#fff'\r\n      }}>\r\n        {/* Header */}\r\n        <Box sx={{\r\n          p: 2,\r\n          borderBottom: '1px solid #ccc',\r\n          backgroundColor: isDarkMode ? '#1E293B' : '#e1f5fe'\r\n        }}>\r\n          <Typography variant=\"h6\" sx={{ fontWeight: \"bold\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n            Payment Details\r\n          </Typography>\r\n        </Box>\r\n\r\n        {/* Form Content */}\r\n        <Box sx={{ flex: 1, overflowY: \"auto\", p: 2 }}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Expense Type\"\r\n                name=\"Payments_Expense_Type\"\r\n                fullWidth\r\n                value={formData.Payments_Expense_Type || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Vendor\"\r\n                name=\"Payments_Vendor\"\r\n                fullWidth\r\n                value={formData.Payments_Vendor || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Amount\"\r\n                name=\"Payments_Expense_Amount\"\r\n                fullWidth\r\n                value={formData.Payments_Expense_Amount || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            {/* Date Picker Field */}\r\n            <Grid item xs={12}>\r\n              <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n                <DatePicker\r\n                  wrapperClassName={\"datepicker\"}\r\n                  className={\"datepicker\"}\r\n                  label=\"Payments Date\"\r\n                  value={selectedDate}\r\n                  onChange={handleDateChange}\r\n                  format=\"MM/dd/yyyy\"\r\n                />\r\n              </LocalizationProvider>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"ET Number\"\r\n                name=\"Payments_ET_Number\"\r\n                fullWidth\r\n                value={formData.Payments_ET_Number || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Attachment Name\"\r\n                name=\"Payments_Attachment_Name\"\r\n                fullWidth\r\n                value={formData.Payments_Attachment_Name || \"\"}\r\n                disabled\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  },\r\n                  '& .MuiInputBase-input.Mui-disabled': {\r\n                    WebkitTextFillColor: isDarkMode ? 'white' : '#1E293B',\r\n                  },\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <Button variant=\"outlined\" component=\"label\" sx={{ width: '100%' }}>\r\n                Upload Proof\r\n                <input type=\"file\" hidden onChange={handleFileChange} />\r\n              </Button>\r\n            </Grid>\r\n            {formData.id && formData.Payments_Attachment_Name && (\r\n              <Grid item xs={12}>\r\n                <Button\r\n                  variant=\"text\"\r\n                  color=\"primary\"\r\n                  onClick={handleViewFile}\r\n                  startIcon={<VisibilityIcon />}\r\n                  sx={{ width: '100%' }}\r\n                >\r\n                  View/Download File\r\n                </Button>\r\n              </Grid>\r\n            )}\r\n          </Grid>\r\n        </Box>\r\n\r\n        <Divider />\r\n        <Box sx={{ p: 2, display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            <Button\r\n              onClick={onClose}\r\n              startIcon={<CloseIcon />}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              sx={{\r\n                borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n              }}\r\n            >\r\n              Close\r\n            </Button>\r\n            {formData.id && (\r\n              <Button\r\n                onClick={handleDeleteClick}\r\n                startIcon={<DeleteIcon />}\r\n                size=\"small\"\r\n                color=\"error\"\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  color: 'red',\r\n                }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Box>\r\n          <Button\r\n            onClick={handleSave}\r\n            startIcon={formData.id ? <SaveIcon /> : <AddIcon />}\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n          >\r\n            {formData.id ? \"Save\" : \"Create\"}\r\n          </Button>\r\n        </Box>\r\n\r\n        {/* Confirmation Dialog for Deletion */}\r\n        <Dialog open={deleteConfirmationOpen} onClose={handleDeleteCancel}>\r\n          <DialogTitle>Confirm Deletion</DialogTitle>\r\n          <DialogContent>\r\n            Are you sure you want to delete this record?\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleDeleteCancel} color=\"primary\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleDeleteConfirm} color=\"error\">\r\n              Delete\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </Box>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default PaymentDrawer;","import React, { useEffect, useState, useContext } from 'react';\r\nimport {\r\n  Drawer,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Divider,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle\r\n} from '@mui/material';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport SaveIcon from '@mui/icons-material/Save';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport { ThemeContext } from '../../config/ThemeContext'; // Import ThemeContext\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\nconst InterviewDrawer = ({ open, onClose, studentId, recordId, onSave }) => {\r\n  const { isDarkMode } = useContext(ThemeContext);  // Access theme context\r\n\r\n  const [formData, setFormData] = useState({});\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n  // Check for larger or smaller screen size\r\n  const isLargeScreen = useMediaQuery(\"(min-width:600px)\");\r\n\r\n  // Drawer width based on screen size\r\n  const drawerWidth = isLargeScreen ? 500 : 330;\r\n\r\n  // Get the first name and last name from localStorage (assuming the user object is stored there)\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  // const createdBy = user.first_name + ' ' + user.last_name; // Concatenate first name and last name\r\n  const createdBy = `${user?.first_name} ${user?.last_name}`;\r\n\r\n  const questions = [\r\n    \"Briefly describe the applicant's family & social financial conditions?\",\r\n    \"Employment Status Score\",\r\n    \"Year of Study\",\r\n    \"Degree/Diploma Name\",\r\n    \"Number of Years to Qualify\",\r\n    \"Reason for Choosing the Course\",\r\n    \"Field of Study Score\",\r\n    \"APS Score (Matric) or University Average\",\r\n    \"Number of Failed Modules\",\r\n    \"Academic Results Score\",\r\n    \"Have you worked on any special projects or initiatives?\",\r\n    \"What extracurricular activities have you participated in?\",\r\n    \"How do you plan to contribute to your community post-graduation?\",\r\n    \"How would you inspire others to make an impact?\",\r\n    \"Community Work Involvement Score\",\r\n    \"How will you use your education and skills to make an impact?\",\r\n    \"Can you share academic awards or scholarships received?\",\r\n    \"Describe a role model and why they inspire you?\",\r\n    \"Why do you believe you deserve this bursary?\",\r\n    \"If not awarded this bursary, what are your plans?\",\r\n    \"Motivation Score\",\r\n    \"Total Score\",\r\n    \"Comments Section\",\r\n    \"Overall Impression\"\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (!open) return;\r\n\r\n    if (!recordId) {\r\n      setFormData({\r\n        Interviewer_Name: '',\r\n        Year_of_Interview: '',\r\n        Interview_Q01: '',\r\n        Interview_Q02: '',\r\n        Interview_Q03: '',\r\n        Interview_Q04: '',\r\n        Interview_Q05: '',\r\n        Interview_Q06: '',\r\n        Interview_Q07: '',\r\n        Interview_Q08: '',\r\n        Interview_Q09: '',\r\n        Interview_Q10: '',\r\n        Interview_Q11: '',\r\n        Interview_Q12: '',\r\n        Interview_Q13: '',\r\n        Interview_Q14: '',\r\n        Interview_Q15: '',\r\n        Interview_Q16: '',\r\n        Interview_Q17: '',\r\n        Interview_Q18: '',\r\n        Interview_Q19: '',\r\n        Interview_Q20: '',\r\n        Interview_Q21: '',\r\n        Interview_Q22: '',\r\n        Interview_Q23: '',\r\n        Interview_Q24: '',\r\n        Interview_Created_By: createdBy,  // Set created_by field to first and last name of logged-in user\r\n        Date_Stamp: '',\r\n        Student_Details_Portal_id: studentId\r\n      });\r\n    } else {\r\n      fetch(`${API_BASE_URL}/interviews/id/${recordId}`)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          setFormData({\r\n            Interviewer_Name: data.interviewer_name || '',\r\n            Year_of_Interview: data.year_of_interview || '',\r\n            Interview_Q01: data.interview_q01 || '',\r\n            Interview_Q02: data.interview_q02 || '',\r\n            Interview_Q03: data.interview_q03 || '',\r\n            Interview_Q04: data.interview_q04 || '',\r\n            Interview_Q05: data.interview_q05 || '',\r\n            Interview_Q06: data.interview_q06 || '',\r\n            Interview_Q07: data.interview_q07 || '',\r\n            Interview_Q08: data.interview_q08 || '',\r\n            Interview_Q09: data.interview_q09 || '',\r\n            Interview_Q10: data.interview_q10 || '',\r\n            Interview_Q11: data.interview_q11 || '',\r\n            Interview_Q12: data.interview_q12 || '',\r\n            Interview_Q13: data.interview_q13 || '',\r\n            Interview_Q14: data.interview_q14 || '',\r\n            Interview_Q15: data.interview_q15 || '',\r\n            Interview_Q16: data.interview_q16 || '',\r\n            Interview_Q17: data.interview_q17 || '',\r\n            Interview_Q18: data.interview_q18 || '',\r\n            Interview_Q19: data.interview_q19 || '',\r\n            Interview_Q20: data.interview_q20 || '',\r\n            Interview_Q21: data.interview_q21 || '',\r\n            Interview_Q22: data.interview_q22 || '',\r\n            Interview_Q23: data.interview_q23 || '',\r\n            Interview_Q24: data.interview_q24 || '',\r\n            Interview_Created_By: data.interview_created_by || createdBy,  // Ensure `created_by` is set\r\n            Date_Stamp: data.date_stamp || '',\r\n            id: data.id,\r\n            Student_Details_Portal_id: data.student_details_portal_id || studentId\r\n          });\r\n        });\r\n    }\r\n  }, [open, recordId, studentId, createdBy]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const isUpdate = !!formData.id;\r\n    const url = isUpdate\r\n      ? `${API_BASE_URL}/interviews/update/${formData.id}`\r\n      : `${API_BASE_URL}/interviews/insert`;\r\n    const method = isUpdate ? \"PUT\" : \"POST\";\r\n\r\n    const res = await fetch(url, {\r\n      method,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(formData)\r\n    });\r\n    if (res.ok) {\r\n      const result = await res.json();\r\n      onSave(result);\r\n      onClose();\r\n    } else {\r\n      console.error(\"Failed to save interview\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    setDeleteConfirmationOpen(true); // Open confirmation dialog\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!formData.id) return;\r\n    try {\r\n      await fetch(`${API_BASE_URL}/interviews/delete/${formData.id}`, {\r\n        method: \"DELETE\"\r\n      });\r\n      onSave(null);\r\n      onClose();\r\n      setDeleteConfirmationOpen(false); // Close confirmation dialog\r\n    } catch (err) {\r\n      console.error(\"Failed to delete interview\", err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCancel = () => {\r\n    setDeleteConfirmationOpen(false); // Close confirmation dialog\r\n  };\r\n\r\n  return (\r\n    <Drawer anchor=\"right\" open={open} onClose={onClose}>\r\n      <Box sx={{\r\n        width: drawerWidth,\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        backgroundColor: isDarkMode ? '#2D3748' : '#fff' // Background color based on dark/light mode\r\n      }}>\r\n        {/* Header */}\r\n        <Box sx={{\r\n          p: 2,\r\n          borderBottom: '1px solid #ccc',\r\n          backgroundColor: isDarkMode ? '#1E293B' : '#e1f5fe'\r\n        }}>\r\n          <Typography variant=\"h6\" sx={{ fontWeight: \"bold\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n            Interview Details\r\n          </Typography>\r\n        </Box>\r\n\r\n        {/* Form Content */}\r\n        <Box sx={{ flex: 1, overflowY: \"auto\", p: 2 }}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Interviewer Name\"\r\n                name=\"Interviewer_Name\"\r\n                fullWidth\r\n                value={formData.Interviewer_Name || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                label=\"Year of Interview\"\r\n                name=\"Year_of_Interview\"\r\n                fullWidth\r\n                value={formData.Year_of_Interview || \"\"}\r\n                onChange={handleChange}\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                  color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  borderRadius: '8px',\r\n                  '& .MuiInputBase-input': {\r\n                    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  }\r\n                }}\r\n                InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n              />\r\n            </Grid>\r\n            {questions.map((question, i) => {\r\n              const questionNumber = (i + 1).toString().padStart(2, '0');\r\n              return (\r\n                <Grid item xs={12} key={i}>\r\n                  <TextField\r\n                    label={question}\r\n                    name={`Interview_Q${questionNumber}`}\r\n                    fullWidth\r\n                    value={formData[`Interview_Q${questionNumber}`] || \"\"}\r\n                    onChange={handleChange}\r\n                    sx={{\r\n                      backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n                      color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                      borderRadius: '8px',\r\n                      '& .MuiInputBase-input': {\r\n                        color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                      }\r\n                    }}\r\n                    InputLabelProps={{ style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } }}\r\n                  />\r\n                </Grid>\r\n              );\r\n            })}\r\n            {/* Interview_Created_By field is not rendered here */}\r\n          </Grid>\r\n        </Box>\r\n\r\n        {/* Footer */}\r\n        <Divider />\r\n        <Box sx={{ p: 2, display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            <Button\r\n              onClick={onClose}\r\n              startIcon={<CloseIcon />}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              sx={{\r\n                borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n              }}\r\n            >\r\n              Close\r\n            </Button>\r\n            {formData.id && (\r\n              <Button\r\n                onClick={handleDeleteClick}\r\n                startIcon={<DeleteIcon />}\r\n                size=\"small\"\r\n                color=\"error\"\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  color: 'red',\r\n                }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Box>\r\n          <Button\r\n            onClick={handleSave}\r\n            startIcon={formData.id ? <SaveIcon /> : <AddIcon />}\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n          >\r\n            {formData.id ? \"Save\" : \"Create\"}\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Confirmation Dialog for Deletion */}\r\n      <Dialog open={deleteConfirmationOpen} onClose={handleDeleteCancel}>\r\n        <DialogTitle>Confirm Deletion</DialogTitle>\r\n        <DialogContent>\r\n          Are you sure you want to delete this record?\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteCancel} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleDeleteConfirm} color=\"error\">\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default InterviewDrawer;\r\n","import React, { useEffect, useState, useContext, useMemo } from \"react\";\r\nimport {\r\n  Drawer,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  Divider,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogTitle,\r\n  DialogContent,\r\n  Autocomplete,\r\n} from \"@mui/material\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport SaveIcon from \"@mui/icons-material/Save\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport { useMediaQuery } from \"@mui/material\";\r\nimport { ThemeContext } from '../../config/ThemeContext';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\n\r\nconst TaskDetailsDrawer = ({\r\n  open,\r\n  onClose,\r\n  studentId,\r\n  taskId,\r\n  onSave,\r\n}) => {\r\n  const { isDarkMode } = useContext(ThemeContext);\r\n  const isLargeScreen = useMediaQuery(\"(min-width:600px)\");\r\n  const drawerWidth = isLargeScreen ? 500 : 330;\r\n\r\n  // Memoize user to prevent new object reference on every render\r\n  const user = useMemo(() => JSON.parse(localStorage.getItem(\"user\")), []);\r\n  const isAdmin = user?.user_type === 'admin';\r\n  const isStudent = user?.user_type === 'student';\r\n\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n  const [formData, setFormData] = useState({});\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      if (taskId) {\r\n        fetch(`${API_BASE_URL}/tasks/id/${taskId}`)\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            setFormData(data);\r\n          });\r\n      } else {\r\n        const initialData = {\r\n          student_details_portal_id: studentId,\r\n          created_by: isAdmin ? user?.first_name || \"\" : \"\",\r\n          task_description: \"\",\r\n          task_status: \"\",\r\n          task_comment: \"\",\r\n        };\r\n        setFormData(initialData);\r\n      }\r\n    } else {\r\n      setFormData({});\r\n    }\r\n  }, [open, studentId, taskId, isAdmin, user]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleAutocompleteChange = (name, value) => {\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!isAdmin) {\r\n      return;\r\n    }\r\n\r\n    const isUpdate = !!formData.id;\r\n    const url = isUpdate\r\n      ? `${API_BASE_URL}/tasks/update/${formData.id}`\r\n      : `${API_BASE_URL}/tasks/insert`;\r\n    const method = isUpdate ? \"PUT\" : \"POST\";\r\n\r\n    const body = { ...formData };\r\n    if (!isUpdate) delete body.id;\r\n\r\n    try {\r\n      const res = await fetch(url, {\r\n        method,\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(body),\r\n      });\r\n\r\n      if (res.ok) {\r\n        const result = await res.json();\r\n        onSave(result);\r\n        onClose();\r\n      } else {\r\n        console.error(\"Failed to save Task Details\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error saving Task Details\", err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    setDeleteConfirmationOpen(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!formData.id || !isAdmin) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\r\n        `${API_BASE_URL}/tasks/delete/${formData.id}`,\r\n        { method: \"DELETE\" }\r\n      );\r\n\r\n      if (res.ok) {\r\n        onSave(null);\r\n        onClose();\r\n        setDeleteConfirmationOpen(false);\r\n      } else {\r\n        console.error(\"Failed to delete Task Details\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error deleting Task Details\", err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteCancel = () => {\r\n    setDeleteConfirmationOpen(false);\r\n  };\r\n\r\n  const fieldStyles = {\r\n    backgroundColor: isDarkMode ? '#1A202C' : '#ffffff',\r\n    color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n    borderRadius: '8px',\r\n    '& .MuiInputBase-input': {\r\n      color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n    },\r\n    '& .MuiFormLabel-root': {\r\n      color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n    },\r\n  };\r\n\r\n  const inputLabelProps = { style: { color: isDarkMode ? '#F7FAFC' : '#1E293B' } };\r\n\r\n  const taskStatusOptions = [\"Pending\", \"Completed\"];\r\n\r\n  const fieldOrder = [\"task_description\", \"task_status\", \"task_comment\"];\r\n\r\n  const renderField = (key, index) => {\r\n    if (key === \"id\" || key === \"student_details_portal_id\" || key === \"task_date_stamp\" || key === \"created_by\") {\r\n      return null;\r\n    }\r\n\r\n    let label = key.replace(/_/g, \" \");\r\n    label = label\r\n      .split(\" \")\r\n      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\r\n      .join(\" \");\r\n\r\n    if (key === \"task_status\" && isAdmin) {\r\n      return (\r\n        <Grid item xs={12} key={index}>\r\n          <Autocomplete\r\n            value={formData[key] || \"\"}\r\n            onChange={(e, newValue) => handleAutocompleteChange(key, newValue)}\r\n            options={taskStatusOptions}\r\n            renderInput={(params) => (\r\n              <TextField\r\n                {...params}\r\n                label={label}\r\n                name={key}\r\n                sx={fieldStyles}\r\n                InputLabelProps={inputLabelProps}\r\n              />\r\n            )}\r\n          />\r\n        </Grid>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Grid item xs={12} key={index}>\r\n        <TextField\r\n          name={key}\r\n          label={label}\r\n          fullWidth\r\n          value={formData[key] || \"\"}\r\n          onChange={handleChange}\r\n          sx={fieldStyles}\r\n          InputLabelProps={inputLabelProps}\r\n          disabled={isStudent || (key === \"task_status\" && !isAdmin)}\r\n          InputProps={{\r\n            readOnly: key === \"task_status\" && !isAdmin,\r\n          }}\r\n        />\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Drawer anchor=\"right\" open={open} onClose={onClose}>\r\n      <Box sx={{\r\n        width: drawerWidth,\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        backgroundColor: isDarkMode ? '#2D3748' : '#fff'\r\n      }}>\r\n        <Box sx={{\r\n          p: 2,\r\n          borderBottom: \"1px solid #ccc\",\r\n          backgroundColor: isDarkMode ? '#1E293B' : '#e1f5fe'\r\n        }}>\r\n          <Typography variant=\"h6\" sx={{ fontWeight: \"bold\", color: isDarkMode ? '#F7FAFC' : '#1E293B' }}>\r\n            Task Details\r\n          </Typography>\r\n        </Box>\r\n\r\n        <Box sx={{ flex: 1, overflowY: \"auto\", p: 2 }}>\r\n          <Grid container spacing={2}>\r\n            {fieldOrder.map((key, index) => renderField(key, index))}\r\n          </Grid>\r\n        </Box>\r\n\r\n        <Divider />\r\n        <Box sx={{ p: 2, display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            <Button\r\n              onClick={onClose}\r\n              startIcon={<CloseIcon />}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              sx={{\r\n                borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                color: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n              }}\r\n            >\r\n              Close\r\n            </Button>\r\n            {formData.id && isAdmin && (\r\n              <Button\r\n                onClick={handleDeleteClick}\r\n                startIcon={<DeleteIcon />}\r\n                size=\"small\"\r\n                color=\"error\"\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  borderColor: isDarkMode ? '#F7FAFC' : '#1E293B',\r\n                  color: 'red',\r\n                }}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Box>\r\n          {isAdmin && (\r\n            <Button\r\n              onClick={handleSave}\r\n              startIcon={formData.id ? <SaveIcon /> : <AddIcon />}\r\n              variant=\"contained\"\r\n              size=\"small\"\r\n            >\r\n              {formData.id ? \"Save\" : \"Create\"}\r\n            </Button>\r\n          )}\r\n        </Box>\r\n\r\n        <Dialog open={deleteConfirmationOpen} onClose={handleDeleteCancel}>\r\n          <DialogTitle>Confirm Deletion</DialogTitle>\r\n          <DialogContent>\r\n            Are you sure you want to delete this task?\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleDeleteCancel} color=\"primary\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleDeleteConfirm} color=\"error\">\r\n              Delete\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </Box>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default TaskDetailsDrawer;","import React from 'react';\r\nimport {\r\n  Page,\r\n  Text,\r\n  View,\r\n  Document,\r\n  StyleSheet,\r\n  Image\r\n} from '@react-pdf/renderer';\r\nimport logo from '../images/willowton_logo.png';\r\n\r\n// About Me Custom Questions\r\nconst aboutMeQuestions = [\r\n  \"What inspired you to pursue your chosen field of study?\",\r\n  \"How do you plan to use your education and skills to make a significant impact in this field?\",\r\n  \"What special projects or initiatives have you undertaken in your academic life?\",\r\n  \"Can you tell me about any academic awards or scholarships you have received?\",\r\n  \"Provide examples or specific skills you have developed that demonstrates your commitment.\",\r\n  \"What extracurricular activities have you participated in, and how have they contributed to your personal and academic growth?\",\r\n  \"Once you have completed your studies, how will others benefit from it?\",\r\n  \"Can you describe any financial challenges you have faced that have affected your ability to pursue your education, and how these challenges have impacted your current financial situation?\",\r\n  \"Have you previously been awarded a bursary?\",\r\n  \"What do you think has been your most notable contribution to society thus far?\",\r\n  \"Why do you think serving the community is important?\",\r\n  \"Will you be doing any volunteer work during your studies?\",\r\n  \"Are you willing to assist someone in need?\",\r\n  \"Describe yourself in three words.\",\r\n  \"What is your greatest strength?\",\r\n  \"Describe your biggest mistake and what steps you have taken to rectify it.\",\r\n  \"What personal achievement makes you proud?\",\r\n  \"Are you self-motivated? Explain\",\r\n  \"1st choice of study.\",\r\n  \"2nd choice of study\",\r\n  \"3rd choice of study.\"\r\n];\r\n\r\n// Interview Custom Questions\r\nconst interviewQuestions = [\r\n  \"Briefly describe the applicant's family & social financial conditions?\",\r\n  \"Employment Status Score\",\r\n  \"Year of Study\",\r\n  \"Degree/Diploma Name\",\r\n  \"Number of Years to Qualify\",\r\n  \"Reason for Choosing the Course\",\r\n  \"Field of Study Score\",\r\n  \"APS Score (Matric) or University Average\",\r\n  \"Number of Failed Modules\",\r\n  \"Academic Results Score\",\r\n  \"Have you worked on any special projects or initiatives?\",\r\n  \"What extracurricular activities have you participated in?\",\r\n  \"How do you plan to contribute to your community post-graduation?\",\r\n  \"How would you inspire others to make an impact?\",\r\n  \"Community Work Involvement Score\",\r\n  \"How will you use your education and skills to make an impact?\",\r\n  \"Can you share academic awards or scholarships received?\",\r\n  \"Describe a role model and why they inspire you?\",\r\n  \"Why do you believe you deserve this bursary?\",\r\n  \"If not awarded this bursary, what are your plans?\",\r\n  \"Motivation Score\",\r\n  \"Total Score\",\r\n  \"Comments Section\",\r\n  \"Overall Impression\"\r\n];\r\n\r\n// Styles\r\nconst styles = StyleSheet.create({\r\n  page: {\r\n    padding: 30,\r\n    fontSize: 8,\r\n    fontFamily: 'Helvetica',\r\n    lineHeight: 1.5\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    borderBottom: '1 solid #ccc',\r\n    marginBottom: 10,\r\n    paddingBottom: 4\r\n  },\r\n  logo: {\r\n    width: 60,\r\n    height: 60,\r\n    objectFit: 'contain'\r\n  },\r\n  headerText: {\r\n    textAlign: 'center',\r\n    flex: 1\r\n  },\r\n  headerTitle1: {\r\n    fontSize: 12,\r\n    fontWeight: 'bold',\r\n    marginBottom: 1\r\n  },\r\n  headerTitle2: {\r\n    fontSize: 10,\r\n    fontStyle: 'italic'\r\n  },\r\n  reportTime: {\r\n    fontSize: 8,\r\n    textAlign: 'right'\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 10,\r\n    fontWeight: 'bold',\r\n    backgroundColor: '#2D3748',\r\n    color: 'white',\r\n    padding: 4,\r\n    marginTop: 10,\r\n    marginBottom: 4,\r\n    width: '100%',\r\n    borderRadius: 4\r\n  },\r\n  studentDetailsRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    width: '100%',\r\n    gap: 4,\r\n    marginBottom: 4\r\n  },\r\n  studentDetailsField: {\r\n    width: '49%',\r\n    flexDirection: 'column',\r\n    padding: 4,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#ccc',\r\n    borderBottomStyle: 'solid'\r\n  },\r\n  studentDetailsLabel: {\r\n    fontWeight: 'bold',\r\n    marginBottom: 2\r\n  },\r\n  studentDetailsValue: {\r\n    fontStyle: 'italic'\r\n  },\r\n  table: {\r\n    display: 'table',\r\n    width: '100%',\r\n    borderStyle: 'solid',\r\n    borderWidth: 1,\r\n    borderColor: '#ccc',\r\n    marginBottom: 4,\r\n  },\r\n  tableRow: {\r\n    flexDirection: 'row',\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#ccc',\r\n    minHeight: 20, // Ensure minimum height for content\r\n  },\r\n  tableCellLabel: {\r\n    width: '40%',\r\n    padding: 4,\r\n    fontWeight: 'bold',\r\n    backgroundColor: '#f5f5f5',\r\n    borderRightWidth: 1,\r\n    borderRightColor: '#ccc',\r\n    wordBreak: 'keep-all',   // Don't break in the middle of words\r\n    minWidth: 0,\r\n    overflow: 'hidden'\r\n  },\r\n  tableCellValue: {\r\n    width: 400,\r\n    padding: 4,\r\n    fontStyle: 'italic',\r\n    lineHeight: 0.7,\r\n  },\r\n\r\n\r\n});\r\n\r\n// Breaks long unbroken strings by inserting zero-width space every N characters\r\nconst breakLongWords = (str, maxLen = 20) => {\r\n  if (typeof str !== 'string') return str;\r\n\r\n  return str\r\n    .split(' ')\r\n    .map(word => {\r\n      if (word.length <= maxLen) return word;\r\n\r\n      // insert soft hyphen every maxLen chars\r\n      return word.match(new RegExp(`.{1,${maxLen}}`, 'g')).join('\\u00AD');\r\n    })\r\n    .join(' ');\r\n};\r\n\r\n\r\n// Converts snake_case or raw field names to Sentence Case\r\nconst toSentenceCase = (str) => {\r\n  return str\r\n    .replace(/_/g, ' ')\r\n    .split(' ')\r\n    .map(word =>\r\n      word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()\r\n    )\r\n    .join(' ');\r\n};\r\n\r\n// Removes section prefix from the field name\r\nconst removePrefix = (label, sectionTitle) => {\r\n  const cleanLabel = toSentenceCase(label);\r\n  const cleanSection = toSentenceCase(sectionTitle).replace(/s$/, '');\r\n  if (cleanLabel.startsWith(cleanSection + ' ')) {\r\n    return cleanLabel.slice(cleanSection.length + 1);\r\n  }\r\n  return cleanLabel;\r\n};\r\n\r\n// Map question to field name\r\nconst mapQuestion = (section, key) => {\r\n  const questionMap = {\r\n    'About Me': aboutMeQuestions,\r\n    'Interview': interviewQuestions\r\n  };\r\n  const questions = questionMap[section];\r\n  if (!questions) return removePrefix(key, section);\r\n\r\n  const match = key.match(/^(about_me_q|interview_q)(\\d+)/i);\r\n  if (match) {\r\n    const index = parseInt(match[2], 10) - 1; // Convert to 0-based index\r\n    return questions[index] || removePrefix(key, section);\r\n  }\r\n  return removePrefix(key, section);\r\n};\r\n\r\n// Get current date and time\r\nconst getCurrentDateTime = () => {\r\n  const now = new Date();\r\n  return now.toLocaleString('en-US', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n    hour12: true\r\n  });\r\n};\r\n\r\n// Student Details Section\r\nconst StudentDetailsSection = ({ data }) => {\r\n  const entries = Object.entries(data || {}).filter(([k, v]) => v !== null && v !== '');\r\n  const rows = [];\r\n  for (let i = 0; i < entries.length; i += 2) {\r\n    rows.push(entries.slice(i, i + 2));\r\n  }\r\n  return (\r\n    <View>\r\n      <Text style={styles.sectionTitle}>Student Details</Text>\r\n      {rows.map((row, rowIdx) => (\r\n        <View key={rowIdx} style={styles.studentDetailsRow}>\r\n          {row.map(([key, value]) => (\r\n            <View key={key} style={styles.studentDetailsField}>\r\n              <Text style={styles.studentDetailsLabel}>{removePrefix(key, 'Student Details')}</Text>\r\n              <Text style={styles.studentDetailsValue}>{value || ''}</Text>\r\n            </View>\r\n          ))}\r\n          {row.length < 2 && <View style={styles.studentDetailsField} />}\r\n        </View>\r\n      ))}\r\n    </View>\r\n  );\r\n};\r\n\r\n// Single Object Section\r\nconst RenderSection = ({ title, data }) => {\r\n  if (!data || Object.keys(data).length === 0) return null;\r\n  const entries = Object.entries(data).filter(([k, v]) => v !== null && v !== '');\r\n  return (\r\n    <View>\r\n      <Text style={styles.sectionTitle}>{toSentenceCase(title)}</Text>\r\n      <View style={styles.table}>\r\n        {entries.map(([key, value], idx) => (\r\n          <View key={idx} style={styles.tableRow} wrap={false}>\r\n            <Text style={styles.tableCellLabel}>{mapQuestion(title, key)}</Text>\r\n            <Text style={styles.tableCellValue}>{breakLongWords(value || '')}</Text>\r\n          </View>\r\n        ))}\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\n// Multiple Records Section\r\nconst RenderMultiple = ({ title, data }) => {\r\n  if (!data || data.length === 0) return null;\r\n\r\n  const showNumbering = data.length > 1;\r\n\r\n  return (\r\n    <View>\r\n      {data.map((item, idx) => (\r\n        <View key={idx}>\r\n          <Text style={styles.sectionTitle}>\r\n            {toSentenceCase(title)}{showNumbering ? ` - ${idx + 1}` : ''}\r\n          </Text>\r\n          <View style={styles.table}>\r\n            {Object.entries(item).map(([key, val], i) => (\r\n              <View key={i} style={styles.tableRow}>\r\n                <Text style={styles.tableCellLabel}>\r\n                  {removePrefix(key, title)}\r\n                </Text>\r\n                {/* <Text style={styles.tableCellValue}>\r\n                  {val || ''}\r\n                </Text> */}\r\n                <Text style={styles.tableCellValue}>{breakLongWords(val || '')}</Text>\r\n              </View>\r\n            ))}\r\n          </View>\r\n        </View>\r\n      ))}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst StudentPDFDocument = ({ studentData }) => (\r\n  <Document>\r\n    <Page size=\"A4\" style={styles.page}>\r\n      {/* Header */}\r\n      <View style={styles.header}>\r\n        <Image src={logo} style={styles.logo} />\r\n        <View style={styles.headerText}>\r\n          <Text style={styles.headerTitle1}>WillowTon & SANZAF Bursary</Text>\r\n          <Text style={styles.headerTitle2}>Student Detailed Report</Text>\r\n        </View>\r\n        <Text style={styles.reportTime}>{getCurrentDateTime()}</Text>\r\n      </View>\r\n\r\n      {/* Sections */}\r\n      <StudentDetailsSection data={studentData.student_details} />\r\n      <RenderSection title=\"About Me\" data={studentData.about_me} />\r\n      <RenderSection title=\"Assets & Liabilities\" data={studentData.assets_liabilities} />\r\n      <RenderSection title=\"Expense Details\" data={studentData.expense_details} />\r\n      <RenderSection title=\"Interview\" data={studentData.interview} />\r\n      <RenderSection title=\"University Details\" data={studentData.university_details} />\r\n      <RenderMultiple title=\"Parents Details\" data={studentData.parents_details} />\r\n      <RenderMultiple title=\"Attachments\" data={studentData.attachments} />\r\n      <RenderMultiple title=\"Payments\" data={studentData.payments} />\r\n      <RenderMultiple title=\"Results\" data={studentData.results} />\r\n      <RenderMultiple title=\"Tasks\" data={studentData.tasks} />\r\n      <RenderMultiple title=\"Voluntary Service\" data={studentData.voluntary_service} />\r\n    </Page>\r\n  </Document>\r\n);\r\n\r\nexport default StudentPDFDocument;","import React, { useState, useEffect, useCallback, useContext, useRef } from \"react\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Paper,\r\n  TextField,\r\n  Typography,\r\n  Card,\r\n  CardContent,\r\n  Button,\r\n  Tab,\r\n  Tabs,\r\n  IconButton,\r\n  InputBase,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  Menu,\r\n  MenuItem,\r\n  Tooltip,\r\n  Divider,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Select,\r\n  MenuItem as MuiMenuItem,\r\n  CircularProgress,\r\n} from \"@mui/material\";\r\nimport EditIcon from \"@mui/icons-material/Edit\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\nimport ViewColumnIcon from \"@mui/icons-material/ViewColumn\";\r\nimport DownloadIcon from \"@mui/icons-material/Download\";\r\nimport RefreshIcon from \"@mui/icons-material/Refresh\";\r\nimport ArrowDropDownIcon from \"@mui/icons-material/ArrowDropDown\";\r\nimport ArrowDropUpIcon from \"@mui/icons-material/ArrowDropUp\";\r\nimport ArrowBackIosIcon from \"@mui/icons-material/ArrowBackIos\";\r\nimport ArrowForwardIosIcon from \"@mui/icons-material/ArrowForwardIos\";\r\nimport ClearIcon from \"@mui/icons-material/Clear\";\r\nimport { useTheme, useMediaQuery } from \"@mui/material\";\r\nimport * as XLSX from \"xlsx\";\r\nimport DrawerForm from \"./Drawer/StudentDetailDrawer\";\r\nimport AboutusDrawer from \"./Drawer/AboutUsDrawer\";\r\nimport ParentsDrawer from \"./Drawer/ParentsDrawer\";\r\nimport UniversityDetailsDrawer from \"./Drawer/UniversityDetailsDrawer\";\r\nimport AttachmentsDrawer from \"./Drawer/AttachmentsDrawer\";\r\nimport ExpenseDetailsDrawer from \"./Drawer/ExpenseDetailsDrawer\";\r\nimport AssetsLiabilitiesDrawer from \"./Drawer/AssetsLiabilitiesDrawer\";\r\nimport AcademicResultsDrawer from \"./Drawer/AcademicResultsDrawer\";\r\nimport VoluntaryServiceDrawer from \"./Drawer/VoluntaryServiceDrawer\";\r\nimport PaymentDrawer from \"./Drawer/PaymentDrawer\";\r\nimport InterviewDrawer from \"./Drawer/InterviewDrawer\";\r\nimport TaskDetailsDrawer from \"./Drawer/TaskDetailsDrawer\";\r\nimport { ThemeContext } from \"../config/ThemeContext\";\r\nimport { pdf } from \"@react-pdf/renderer\";\r\nimport StudentPDFDocument from \"./StudentPDFDocument\";\r\nimport '../css/GenericTable.css';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\r\n\r\nconst SectionTable = ({ data, sectionKey, sectionLabel, isDarkMode, selectedStudentid, onEdit, onAdd }) => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [columns, setColumns] = useState([]);\r\n  const [visibleColumns, setVisibleColumns] = useState([]);\r\n  const [columnWidths, setColumnWidths] = useState({});\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [showSearch, setShowSearch] = useState(false);\r\n  const [sortConfig, setSortConfig] = useState({ key: null, direction: null });\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [columnSearchTerm, setColumnSearchTerm] = useState('');\r\n  const [totalRecords, setTotalRecords] = useState(0);\r\n  const [loading, setLoading] = useState(true); // Add loading state\r\n  const searchRef = useRef(null);\r\n  const resizingRef = useRef(null);\r\n  const open = Boolean(anchorEl);\r\n  const theme = useTheme();\r\n  const isSmallScreen = useMediaQuery(theme.breakpoints.down('sm'));\r\n\r\n  const sentenceCase = useCallback((str) => {\r\n    if (str === 'student_id_passport_number') return 'Student ID/Passport Number';\r\n    if (str === 'student_willow_relationship') return 'Willowton Group Relationship';\r\n    return str.replace(/^student /i, '').replace(/_/g, ' ').replace(/\\b\\w/g, (c) => c.toUpperCase());\r\n  }, []);\r\n\r\n  const calculateColumnWidth = useCallback((col) => {\r\n    const headerText = sentenceCase(col);\r\n    const charCount = headerText.length;\r\n    const pixelsPerChar = 10;\r\n    const minWidth = 50;\r\n    const calculatedWidth = charCount * pixelsPerChar + 40;\r\n    return Math.max(minWidth, calculatedWidth);\r\n  }, [sentenceCase]);\r\n\r\n  useEffect(() => {\r\n    // Simulate data loading with a delay to ensure spinner is visible\r\n    const loadData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        if (data && data.length > 0) {\r\n          const cols = Object.keys(data[0]).filter((c) => c !== 'id' && c !== 'student_details_portal_id');\r\n          setColumns(cols);\r\n          setVisibleColumns(cols);\r\n          setColumnWidths(cols.reduce((acc, col) => ({\r\n            ...acc,\r\n            [col]: calculateColumnWidth(col),\r\n          }), {}));\r\n          setTotalRecords(data.length);\r\n        } else {\r\n          setColumns([]);\r\n          setVisibleColumns([]);\r\n          setColumnWidths({});\r\n          setTotalRecords(0);\r\n        }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    loadData();\r\n  }, [data, calculateColumnWidth]);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (searchRef.current && !searchRef.current.contains(event.target)) {\r\n        setShowSearch(false);\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  const handleMouseMove = useCallback((e) => {\r\n    if (resizingRef.current) {\r\n      const { col, startX, startWidth } = resizingRef.current;\r\n      const newWidth = Math.max(50, startWidth + (e.clientX - startX));\r\n      setColumnWidths((prev) => ({ ...prev, [col]: newWidth }));\r\n    }\r\n  }, []);\r\n\r\n  const stopResizing = useCallback(() => {\r\n    resizingRef.current = null;\r\n    document.removeEventListener('mousemove', handleMouseMove);\r\n    document.removeEventListener('mouseup', stopResizing);\r\n    document.body.style.userSelect = '';\r\n  }, [handleMouseMove]);\r\n\r\n  const startResizing = useCallback(\r\n    (e, col) => {\r\n      e.preventDefault();\r\n      resizingRef.current = { col, startX: e.clientX, startWidth: columnWidths[col] || calculateColumnWidth(col) };\r\n      document.addEventListener('mousemove', handleMouseMove);\r\n      document.addEventListener('mouseup', stopResizing);\r\n      document.body.style.userSelect = 'none';\r\n    },\r\n    [columnWidths, calculateColumnWidth, handleMouseMove, stopResizing]\r\n  );\r\n\r\n  const formatDate = (date) => (date ? new Date(date).toLocaleDateString() : 'N/A');\r\n\r\n  const toggleColumn = (col) => {\r\n    if (visibleColumns.includes(col)) {\r\n      setVisibleColumns((prev) => prev.filter((c) => c !== col));\r\n    } else {\r\n      const idx = columns.indexOf(col);\r\n      const updated = [...visibleColumns];\r\n      updated.splice(idx, 0, col);\r\n      setVisibleColumns(updated);\r\n    }\r\n  };\r\n\r\n  const resetColumns = () => {\r\n    setVisibleColumns(columns);\r\n    setColumnWidths(columns.reduce((acc, col) => ({\r\n      ...acc,\r\n      [col]: calculateColumnWidth(col),\r\n    }), {}));\r\n  };\r\n\r\n  const exportToExcel = () => {\r\n    const exportData = data.map((s) =>\r\n      Object.fromEntries(visibleColumns.map((col) => [sentenceCase(col), s[col]]))\r\n    );\r\n    const ws = XLSX.utils.json_to_sheet(exportData);\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, sectionKey);\r\n    XLSX.writeFile(wb, `${sectionKey}_report.xlsx`);\r\n  };\r\n\r\n  const handleSort = (col) => {\r\n    setSortConfig((prev) => {\r\n      if (prev.key === col) {\r\n        return {\r\n          key: col,\r\n          direction: prev.direction === 'asc' ? 'desc' : prev.direction === 'desc' ? null : 'asc',\r\n        };\r\n      } else {\r\n        return { key: col, direction: 'asc' };\r\n      }\r\n    });\r\n    setPage(0);\r\n  };\r\n\r\n  const filteredData = data\r\n    .filter((item) =>\r\n      visibleColumns.some((col) => {\r\n        const val = item[col];\r\n        return val != null && val.toString().toLowerCase().includes(searchTerm.toLowerCase());\r\n      })\r\n    )\r\n    .sort((a, b) => {\r\n      if (!sortConfig.key || !sortConfig.direction) return 0;\r\n      const aVal = a[sortConfig.key];\r\n      const bVal = b[sortConfig.key];\r\n      if (aVal == null || bVal == null) return 0;\r\n      return sortConfig.direction === 'asc'\r\n        ? aVal.toString().localeCompare(bVal.toString())\r\n        : bVal.toString().localeCompare(aVal.toString());\r\n    });\r\n\r\n  const paginatedData = filteredData.slice(page * rowsPerPage, (page + 1) * rowsPerPage);\r\n\r\n  useEffect(() => {\r\n    setTotalRecords(filteredData.length);\r\n  }, [filteredData]);\r\n\r\n  const filteredColumns = columns.filter((col) => {\r\n    const lowerTerm = columnSearchTerm.toLowerCase();\r\n    const raw = col.toLowerCase();\r\n    const formatted = sentenceCase(col).toLowerCase();\r\n    return raw.includes(lowerTerm) || formatted.includes(lowerTerm);\r\n  });\r\n\r\n  return (\r\n    <Box\r\n      sx={{ backgroundColor: isDarkMode ? '#2D3748' : '#F7FAFC', p: 2 }}\r\n      className={isDarkMode ? 'dark-mode' : ''}\r\n    >\r\n      <Box sx={{ padding: \"12px\", backgroundColor: isDarkMode ? '#1e293b' : '#e1f5fe', borderRadius: \"8px\", marginBottom: \"12px\", border: '1px solid #ccc', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <Typography variant=\"h6\" sx={{ color: isDarkMode ? 'white' : 'black', fontWeight: \"bold\" }}>\r\n          {sectionLabel}\r\n        </Typography>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n          <Box\r\n            ref={searchRef}\r\n            sx={{\r\n              width: showSearch ? (isSmallScreen ? 120 : 220) : 0,\r\n              height: 36,\r\n              overflow: 'hidden',\r\n              transition: 'width 0.3s ease-in-out, opacity 0.3s ease-in-out',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              opacity: showSearch ? 1 : 0,\r\n            }}\r\n          >\r\n            <InputBase\r\n              placeholder=\"Search\"\r\n              value={searchTerm}\r\n              onChange={(e) => {\r\n                setSearchTerm(e.target.value);\r\n                setPage(0);\r\n              }}\r\n              sx={{\r\n                backgroundColor: isDarkMode ? '#1e293b' : '#fff',\r\n                color: isDarkMode ? 'white' : 'black',\r\n                px: 1.5,\r\n                height: '100%',\r\n                fontSize: '0.85rem',\r\n                borderRadius: 1,\r\n                border: `1px solid ${isDarkMode ? '#4A5568' : '#CBD5E0'}`,\r\n                width: '100%',\r\n                minWidth: 0,\r\n              }}\r\n              startAdornment={<SearchIcon sx={{ mr: 1 }} fontSize=\"small\" />}\r\n              endAdornment={\r\n                searchTerm && (\r\n                  <IconButton\r\n                    size=\"small\"\r\n                    onClick={() => {\r\n                      setSearchTerm('');\r\n                      setPage(0);\r\n                    }}\r\n                    sx={{ color: isDarkMode ? 'white' : 'black' }}\r\n                  >\r\n                    <ClearIcon fontSize=\"small\" />\r\n                  </IconButton>\r\n                )\r\n              }\r\n            />\r\n          </Box>\r\n          <Tooltip title={showSearch ? 'Close Search' : 'Search'}>\r\n            <IconButton\r\n              size=\"small\"\r\n              onClick={() => setShowSearch((prev) => !prev)}\r\n              sx={{ color: isDarkMode ? 'white' : 'black' }}\r\n            >\r\n              {showSearch ? <ClearIcon fontSize=\"small\" /> : <SearchIcon fontSize=\"small\" />}\r\n            </IconButton>\r\n          </Tooltip>\r\n          {!(isSmallScreen && showSearch) && (\r\n            <>\r\n              <Typography sx={{ color: isDarkMode ? 'white' : 'black', fontSize: '1rem' }}>|</Typography>\r\n              <Tooltip title=\"Column Visibility\">\r\n                <IconButton size=\"small\" onClick={(e) => setAnchorEl(e.currentTarget)} sx={{ color: isDarkMode ? 'white' : 'black' }}>\r\n                  <ViewColumnIcon fontSize=\"small\" />\r\n                </IconButton>\r\n              </Tooltip>\r\n              <Typography sx={{ color: isDarkMode ? 'white' : 'black', fontSize: '1rem' }}>|</Typography>\r\n              <Tooltip title=\"Export to Excel\">\r\n                <IconButton size=\"small\" onClick={exportToExcel} sx={{ color: isDarkMode ? 'white' : 'black' }}>\r\n                  <DownloadIcon fontSize=\"small\" />\r\n                </IconButton>\r\n              </Tooltip>\r\n              {onAdd && (\r\n                <>\r\n                  <Typography sx={{ color: isDarkMode ? 'white' : 'black', fontSize: '1rem' }}>|</Typography>\r\n                  <Tooltip title=\"Add New\">\r\n                    <IconButton size=\"small\" onClick={onAdd} sx={{ color: isDarkMode ? 'white' : 'black' }}>\r\n                      <AddIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n        </Box>\r\n      </Box>\r\n\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        open={open}\r\n        onClose={() => setAnchorEl(null)}\r\n        PaperProps={{\r\n          sx: {\r\n            minWidth: 200,\r\n            maxHeight: 300,\r\n            p: 1,\r\n            backgroundColor: isDarkMode ? '#1e293b' : '#fff',\r\n            color: isDarkMode ? '#F7FAFC' : '#1e293b',\r\n            boxShadow: '0px 2px 8px rgba(0, 0, 0, 0.15)',\r\n            borderRadius: 2,\r\n          },\r\n        }}\r\n      >\r\n        <InputBase\r\n          autoFocus\r\n          placeholder=\"Search Columns\"\r\n          value={columnSearchTerm}\r\n          onChange={(e) => setColumnSearchTerm(e.target.value)}\r\n          onKeyDown={(e) => e.stopPropagation()}\r\n          sx={{\r\n            mb: 1,\r\n            px: 1,\r\n            fontSize: '0.7rem',\r\n            backgroundColor: isDarkMode ? '#334155' : '#f1f5f9',\r\n            borderRadius: 1,\r\n            width: '100%',\r\n            height: '28px',\r\n            color: isDarkMode ? '#F7FAFC' : '#1e293b',\r\n          }}\r\n        />\r\n        {filteredColumns.map((col) => (\r\n          <MenuItem key={col} dense>\r\n            <FormControlLabel\r\n              control={<Checkbox size=\"small\" checked={visibleColumns.includes(col)} onChange={() => toggleColumn(col)} />}\r\n              label={<span style={{ fontSize: '0.7rem' }}>{sentenceCase(col)}</span>}\r\n            />\r\n          </MenuItem>\r\n        ))}\r\n        <Divider sx={{ my: 1 }} />\r\n        <MenuItem dense onClick={() => { resetColumns(); setAnchorEl(null); }}>\r\n          <ListItemIcon><RefreshIcon fontSize=\"small\" /></ListItemIcon>\r\n          <ListItemText primary=\"Reset Columns\" primaryTypographyProps={{ fontSize: '0.7rem' }} />\r\n        </MenuItem>\r\n      </Menu>\r\n\r\n      <div className=\"generic-table-container\">\r\n        {loading ? (\r\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '200px' }}>\r\n            <CircularProgress sx={{ color: isDarkMode ? '#F7FAFC' : '#1e293b' }} />\r\n          </Box>\r\n        ) : (\r\n          <table className=\"generic-table\" style={{ backgroundColor: isDarkMode ? '#1e293b' : '#fff', tableLayout: 'fixed' }}>\r\n            <thead>\r\n              <tr>\r\n                {onEdit && <th style={{ width: 50, color: isDarkMode ? 'white' : '#1e293b' }}></th>}\r\n                {visibleColumns.map((col) => (\r\n                  <th\r\n                    key={col}\r\n                    style={{\r\n                      color: isDarkMode ? 'white' : '#1e293b',\r\n                      cursor: 'pointer',\r\n                      position: 'relative',\r\n                      width: columnWidths[col] || calculateColumnWidth(col),\r\n                      minWidth: 50,\r\n                    }}\r\n                    onClick={(e) => {\r\n                      if (e.target.className !== 'resize-handle') {\r\n                        handleSort(col);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', paddingRight: '10px' }}>\r\n                      <span>{sentenceCase(col)}</span>\r\n                      <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                        {sortConfig.key === col && sortConfig.direction === 'asc' && <ArrowDropUpIcon fontSize=\"small\" />}\r\n                        {sortConfig.key === col && sortConfig.direction === 'desc' && <ArrowDropDownIcon fontSize=\"small\" />}\r\n                        {sortConfig.key === col && sortConfig.direction === null}\r\n                      </Box>\r\n                    </Box>\r\n                    <span\r\n                      className=\"resize-handle\"\r\n                      onMouseDown={(e) => startResizing(e, col)}\r\n                      style={{\r\n                        position: 'absolute',\r\n                        right: 0,\r\n                        top: 0,\r\n                        height: '100%',\r\n                        width: '5px',\r\n                        cursor: 'col-resize',\r\n                        background: isDarkMode ? '#4A5568' : '#CBD5E0',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        userSelect: 'none',\r\n                      }}\r\n                    >\r\n                      <span style={{ fontSize: '12px', color: isDarkMode ? '#F7FAFC' : '#1e293b' }}>|</span>\r\n                    </span>\r\n                  </th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {paginatedData.length > 0 ? (\r\n                paginatedData.map((row, i) => (\r\n                  <tr key={i}>\r\n                    {onEdit && (\r\n                      <td style={{ width: 50 }}>\r\n                        <EditIcon\r\n                          sx={{ cursor: 'pointer', fontSize: 'large', color: isDarkMode ? 'white' : 'black' }}\r\n                          onClick={() => onEdit(row.id)}\r\n                        />\r\n                      </td>\r\n                    )}\r\n                    {visibleColumns.map((col) => (\r\n                      <td\r\n                        key={col}\r\n                        style={{\r\n                          color: isDarkMode ? 'white' : '#1e293b',\r\n                          width: columnWidths[col] || calculateColumnWidth(col),\r\n                          minWidth: 50,\r\n                          overflow: 'hidden',\r\n                          textOverflow: 'ellipsis',\r\n                          whiteSpace: 'nowrap',\r\n                        }}\r\n                      >\r\n                        {col.includes('date') ? formatDate(row[col]) :\r\n                          typeof row[col] === 'object' && row[col] !== null ?\r\n                            col.toLowerCase().includes('attachment') ||\r\n                              col.toLowerCase().includes('proof_of_service') ||\r\n                              col.toLowerCase().includes('proof_of_payment') ?\r\n                              ' File attached' :\r\n                              JSON.stringify(row[col]) :\r\n                            row[col] || 'N/A'}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                ))\r\n              ) : (\r\n                <tr><td colSpan={visibleColumns.length + (onEdit ? 1 : 0)} className=\"no-matching-records\">No matching records found</td></tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n\r\n      {!loading && (\r\n        <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 2 }}>\r\n          <Box sx={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: 2,\r\n            border: '1px solid',\r\n            borderColor: isDarkMode ? '#4A5568' : '#CBD5E0',\r\n            borderRadius: '8px',\r\n            padding: '6px 12px',\r\n            backgroundColor: isDarkMode ? '#2D3748' : '#F7FAFC',\r\n            color: isDarkMode ? '#F7FAFC' : '#1e293b',\r\n          }}>\r\n            <Typography variant=\"caption\" sx={{ whiteSpace: 'nowrap' }}>\r\n              Rows per page:\r\n            </Typography>\r\n            <Select\r\n              value={rowsPerPage}\r\n              onChange={(e) => {\r\n                setRowsPerPage(parseInt(e.target.value));\r\n                setPage(0);\r\n              }}\r\n              size=\"small\"\r\n              sx={{\r\n                color: isDarkMode ? '#F7FAFC' : '#1e293b',\r\n                '.MuiSelect-icon': { color: isDarkMode ? '#F7FAFC' : '#1e293b' },\r\n                backgroundColor: isDarkMode ? '#4A5568' : '#E2E8F0',\r\n                borderRadius: '4px',\r\n                fontSize: '0.85rem',\r\n                minWidth: '60px',\r\n              }}\r\n            >\r\n              {[10, 15, 25, 50, 100].map((n) => (\r\n                <MuiMenuItem key={n} value={n}>{n}</MuiMenuItem>\r\n              ))}\r\n            </Select>\r\n            <Typography variant=\"caption\" sx={{ whiteSpace: 'nowrap' }}>\r\n              {page * rowsPerPage + 1}-{Math.min((page + 1) * rowsPerPage, totalRecords)} of {totalRecords}\r\n            </Typography>\r\n            <IconButton\r\n              onClick={() => setPage((p) => Math.max(0, p - 1))}\r\n              disabled={page === 0}\r\n              size=\"small\"\r\n              sx={{ color: isDarkMode ? '#F7FAFC' : '#1e293b' }}\r\n            >\r\n              <ArrowBackIosIcon fontSize=\"small\" />\r\n            </IconButton>\r\n            <IconButton\r\n              onClick={() => setPage((p) => (p + 1) * rowsPerPage < totalRecords ? p + 1 : p)}\r\n              disabled={(page + 1) * rowsPerPage >= totalRecords}\r\n              size=\"small\"\r\n              sx={{ color: isDarkMode ? '#F7FAFC' : '#1e293b' }}\r\n            >\r\n              <ArrowForwardIosIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </Box>\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst StudentDetails = () => {\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [studentDetails, setStudentDetails] = useState([]);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [selectedStudentid, setSelectedStudentid] = useState(null);\r\n  const [tabValue, setTabValue] = useState(0);\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [aboutMeDrawerOpen, setAboutMeDrawerOpen] = useState(false);\r\n  const [editingAboutMeId, setEditingAboutMeId] = useState(null);\r\n  const [parentsDrawerOpen, setParentsDrawerOpen] = useState(false);\r\n  const [editingParentId, setEditingParentId] = useState(null);\r\n  const [universityDetailsDrawerOpen, setUniversityDetailsDrawerOpen] = useState(false);\r\n  const [editingUniversityId, setEditingUniversityId] = useState(null);\r\n  const [attachmentsDrawerOpen, setAttachmentsDrawerOpen] = useState(false);\r\n  const [editingAttachmentId, setEditingAttachmentId] = useState(null);\r\n  const [expenseDetailsDrawerOpen, setExpensesSummaryDrawerOpen] = useState(false);\r\n  const [editingExpenseDetailsId, setEditingExpenseDetailsId] = useState(null);\r\n  const [assetsLiabilitiesDrawerOpen, setAssetsLiabilitiesDrawerOpen] = useState(false);\r\n  const [editingAssetLiabilityId, setEditingAssetLiabilityId] = useState(null);\r\n  const [academicResultsDrawerOpen, setAcademicResultsDrawerOpen] = useState(false);\r\n  const [editingAcademicResultId, setEditingAcademicResultId] = useState(null);\r\n  const [voluntaryServiceDrawerOpen, setVoluntaryServiceDrawerOpen] = useState(false);\r\n  const [editingVoluntaryServiceId, setEditingVoluntaryServiceId] = useState(null);\r\n  const [paymentDrawerOpen, setPaymentDrawerOpen] = useState(false);\r\n  const [editingPaymentId, setEditingPaymentId] = useState(null);\r\n  const [interviewDrawerOpen, setInterviewDrawerOpen] = useState(false);\r\n  const [editingInterviewId, setEditingInterviewId] = useState(null);\r\n  const [tasksDrawerOpen, setTasksDrawerOpen] = useState(false);\r\n  const [editingTaskId, setEditingTaskId] = useState(null);\r\n  const [studentData, setStudentData] = useState(null);\r\n  const [aboutMe, setAboutMe] = useState(null);\r\n  const [parentsDetails, setParentsDetails] = useState(null);\r\n  const [universityDetails, setUniversityDetails] = useState(null);\r\n  const [attachments, setAttachments] = useState(null);\r\n  const [expensesSummary, setExpensesSummary] = useState(null);\r\n  const [assetsLiabilities, setAssetsLiabilities] = useState(null);\r\n  const [academicResults, setAcademicResults] = useState(null);\r\n  const [voluntaryServices, setVoluntaryServices] = useState(null);\r\n  const [payments, setPayments] = useState(null);\r\n  const [interviews, setInterviews] = useState(null);\r\n  const [tasks, setTasks] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const { isDarkMode } = useContext(ThemeContext);\r\n  const user = JSON.parse(localStorage.getItem(\"user\")) || {};\r\n  const isAdmin = user?.user_type === \"admin\";\r\n  const isStudent = user?.user_type === \"student\";\r\n\r\n  const pageStyle = {\r\n    backgroundColor: isDarkMode ? \"#1e293b\" : \"#e1f5fe\",\r\n    color: isDarkMode ? \"#ffffff\" : \"#000000\",\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const options = {\r\n      day: \"2-digit\",\r\n      month: \"short\",\r\n      year: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n      hour12: true,\r\n    };\r\n    const formattedDate = date.toLocaleString(\"en-GB\", options).replace(\",\", \"\");\r\n    return formattedDate.replace(/\\//g, \"/\");\r\n  };\r\n\r\n  const fetchStudentDetails = useCallback(async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const userId = user.user_id;\r\n      let response;\r\n      if (isAdmin) {\r\n        response = await fetch(`${API_BASE_URL}/student-details`);\r\n      } else if (isStudent && userId) {\r\n        response = await fetch(`${API_BASE_URL}/student-detail/${userId}`);\r\n      } else {\r\n        setStudentDetails([]);\r\n        setSelectedStudent(null);\r\n        setSelectedStudentid(null);\r\n        return [];\r\n      }\r\n\r\n      if (!response.ok) {\r\n        setStudentDetails([]);\r\n        setSelectedStudent(null);\r\n        setSelectedStudentid(null);\r\n        return [];\r\n      }\r\n\r\n      const data = await response.json();\r\n      if (\r\n        data &&\r\n        ((Array.isArray(data) && data.length > 0 && data[0]?.id) ||\r\n          (!Array.isArray(data) && data?.id))\r\n      ) {\r\n        if (isAdmin) {\r\n          const formattedData = data.map((student) => {\r\n            const updatedStudent = { ...student };\r\n            Object.keys(updatedStudent).forEach((key) => {\r\n              if (key.toLowerCase().includes(\"date_stamp\")) {\r\n                updatedStudent[key] = formatDate(updatedStudent[key]);\r\n              }\r\n            });\r\n            return updatedStudent;\r\n          });\r\n          setStudentDetails(formattedData);\r\n          setSelectedStudent(formattedData[0] || null);\r\n          setSelectedStudentid(formattedData[0]?.id || null);\r\n          return formattedData;\r\n        } else {\r\n          const updatedStudent = Array.isArray(data) ? data[0] : data;\r\n          Object.keys(updatedStudent).forEach((key) => {\r\n            if (key.toLowerCase().includes(\"date_stamp\")) {\r\n              updatedStudent[key] = formatDate(updatedStudent[key]);\r\n            }\r\n          });\r\n          setStudentDetails([updatedStudent]);\r\n          setSelectedStudent(updatedStudent);\r\n          setSelectedStudentid(updatedStudent.id);\r\n          return updatedStudent;\r\n        }\r\n      } else {\r\n        setStudentDetails([]);\r\n        setSelectedStudent(null);\r\n        setSelectedStudentid(null);\r\n        return [];\r\n      }\r\n    } catch (error) {\r\n      setStudentDetails([]);\r\n      setSelectedStudent(null);\r\n      setSelectedStudentid(null);\r\n      return [];\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [isAdmin, isStudent, user.user_id]);\r\n\r\n  const fetchStudentData = useCallback(async (studentId) => {\r\n    if (!studentId) {\r\n      setStudentData(null);\r\n      return;\r\n    }\r\n    try {\r\n      setIsLoading(true);\r\n      const response = await fetch(`${API_BASE_URL}/student-data/${studentId}`);\r\n      const data = await response.json();\r\n      setStudentData(data);\r\n    } catch (error) {\r\n      setStudentData(null);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const fetchSectionData = useCallback(async (key, studentId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const response = await fetch(`${API_BASE_URL}/${key}/${studentId}`);\r\n      const data = await response.json();\r\n      const formattedData = Array.isArray(data)\r\n        ? data.map((item) => {\r\n          const updatedItem = { ...item };\r\n          Object.keys(updatedItem).forEach((key) => {\r\n            if (key.toLowerCase().endsWith(\"date_stamp\")) {\r\n              updatedItem[key] = formatDate(updatedItem[key]);\r\n            }\r\n          });\r\n          return updatedItem;\r\n        })\r\n        : [];\r\n      return formattedData;\r\n    } catch (error) {\r\n      return [];\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const initializeData = async () => {\r\n      setIsLoading(true);\r\n      if (isStudent) {\r\n        const data = await fetchStudentDetails();\r\n        if (mounted && data && data.id) {\r\n          setStudentDetails([data]);\r\n          setSelectedStudent(data);\r\n          setSelectedStudentid(data.id);\r\n          await fetchStudentData(data.id);\r\n\r\n          const sectionKeys = [\r\n            \"about-me\",\r\n            \"parents-details\",\r\n            \"university-details\",\r\n            \"attachments\",\r\n            \"expenses-summary\",\r\n            \"assets-liabilities\",\r\n            \"academic-results\",\r\n            \"voluntary-services\",\r\n            \"tasks\",\r\n          ].filter((key) => isAdmin || (key !== \"payments\" && key !== \"interviews\"));\r\n\r\n          const responses = await Promise.all(\r\n            sectionKeys.map((key) => fetchSectionData(key, data.id))\r\n          );\r\n\r\n          if (mounted) {\r\n            setAboutMe(responses[sectionKeys.indexOf(\"about-me\")]);\r\n            setParentsDetails(responses[sectionKeys.indexOf(\"parents-details\")]);\r\n            setUniversityDetails(responses[sectionKeys.indexOf(\"university-details\")]);\r\n            setAttachments(responses[sectionKeys.indexOf(\"attachments\")]);\r\n            setExpensesSummary(responses[sectionKeys.indexOf(\"expenses-summary\")]);\r\n            setAssetsLiabilities(responses[sectionKeys.indexOf(\"assets-liabilities\")]);\r\n            setAcademicResults(responses[sectionKeys.indexOf(\"academic-results\")]);\r\n            setVoluntaryServices(responses[sectionKeys.indexOf(\"voluntary-services\")]);\r\n            setTasks(responses[sectionKeys.indexOf(\"tasks\")]);\r\n          }\r\n        } else if (mounted) {\r\n          setStudentDetails([]);\r\n          setSelectedStudent(null);\r\n          setSelectedStudentid(null);\r\n          setStudentData(null);\r\n        }\r\n      } else if (isAdmin) {\r\n        const data = await fetchStudentDetails();\r\n        if (mounted && Array.isArray(data) && data.length > 0) {\r\n          setStudentDetails(data);\r\n          setSelectedStudent(data[0]);\r\n          setSelectedStudentid(data[0].id);\r\n          await fetchStudentData(data[0].id);\r\n\r\n          const sectionKeys = [\r\n            \"about-me\",\r\n            \"parents-details\",\r\n            \"university-details\",\r\n            \"attachments\",\r\n            \"expenses-summary\",\r\n            \"assets-liabilities\",\r\n            \"academic-results\",\r\n            \"voluntary-services\",\r\n            \"payments\",\r\n            \"interviews\",\r\n            \"tasks\",\r\n          ].filter((key) => isAdmin || (key !== \"payments\" && key !== \"interviews\"));\r\n\r\n          const responses = await Promise.all(\r\n            sectionKeys.map((key) => fetchSectionData(key, data[0].id))\r\n          );\r\n\r\n          if (mounted) {\r\n            setAboutMe(responses[sectionKeys.indexOf(\"about-me\")]);\r\n            setParentsDetails(responses[sectionKeys.indexOf(\"parents-details\")]);\r\n            setUniversityDetails(responses[sectionKeys.indexOf(\"university-details\")]);\r\n            setAttachments(responses[sectionKeys.indexOf(\"attachments\")]);\r\n            setExpensesSummary(responses[sectionKeys.indexOf(\"expenses-summary\")]);\r\n            setAssetsLiabilities(responses[sectionKeys.indexOf(\"assets-liabilities\")]);\r\n            setAcademicResults(responses[sectionKeys.indexOf(\"academic-results\")]);\r\n            setVoluntaryServices(responses[sectionKeys.indexOf(\"voluntary-services\")]);\r\n            if (isAdmin) {\r\n              setPayments(responses[sectionKeys.indexOf(\"payments\")]);\r\n              setInterviews(responses[sectionKeys.indexOf(\"interviews\")]);\r\n            }\r\n            setTasks(responses[sectionKeys.indexOf(\"tasks\")]);\r\n          }\r\n        } else if (mounted) {\r\n          setStudentDetails([]);\r\n          setSelectedStudent(null);\r\n          setSelectedStudentid(null);\r\n          setStudentData(null);\r\n        }\r\n      }\r\n      setIsLoading(false);\r\n    };\r\n\r\n    initializeData();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [fetchStudentDetails, isAdmin, isStudent, fetchSectionData, fetchStudentData]);\r\n\r\n  const fetchAboutMe = useCallback(async (studentId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await fetchSectionData(\"about-me\", studentId);\r\n      setAboutMe(data);\r\n      await fetchStudentData(studentId);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [fetchSectionData, fetchStudentData]);\r\n\r\n  const fetchParentsDetails = useCallback(async (studentId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await fetchSectionData(\"parents-details\", studentId);\r\n      setParentsDetails(data);\r\n      await fetchStudentData(studentId);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [fetchSectionData, fetchStudentData]);\r\n\r\n  const fetchUniversityDetails = useCallback(async (studentId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await fetchSectionData(\"university-details\", studentId);\r\n      setUniversityDetails(data);\r\n      await fetchStudentData(studentId);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [fetchSectionData, fetchStudentData]);\r\n\r\n  const fetchAttachmentsDetails = useCallback(async (studentId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await fetchSectionData(\"attachments\", studentId);\r\n      setAttachments(data);\r\n      await fetchStudentData(studentId);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [fetchSectionData, fetchStudentData]);\r\n\r\n  const fetchExpenseDetails = useCallback(async (studentId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await fetchSectionData(\"expenses-summary\", studentId);\r\n      setExpensesSummary(data);\r\n      await fetchStudentData(studentId);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [fetchSectionData, fetchStudentData]);\r\n\r\n  const fetchAssetsLiabilities = useCallback(async (studentId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await fetchSectionData(\"assets-liabilities\", studentId);\r\n      setAssetsLiabilities(data);\r\n      await fetchStudentData(studentId);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [fetchSectionData, fetchStudentData]);\r\n\r\n  const fetchAcademicResults = useCallback(async (studentId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await fetchSectionData(\"academic-results\", studentId);\r\n      setAcademicResults(data);\r\n      await fetchStudentData(studentId);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [fetchSectionData, fetchStudentData]);\r\n\r\n  const fetchVoluntaryServices = useCallback(async (studentId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await fetchSectionData(\"voluntary-services\", studentId);\r\n      setVoluntaryServices(data);\r\n      await fetchStudentData(studentId);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [fetchSectionData, fetchStudentData]);\r\n\r\n  const fetchPaymentsDetails = useCallback(async (studentId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await fetchSectionData(\"payments\", studentId);\r\n      setPayments(data);\r\n      await fetchStudentData(studentId);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [fetchSectionData, fetchStudentData]);\r\n\r\n  const fetchInterviewsDetails = useCallback(async (studentId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await fetchSectionData(\"interviews\", studentId);\r\n      setInterviews(data);\r\n      await fetchStudentData(studentId);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [fetchSectionData, fetchStudentData]);\r\n\r\n  const fetchTasks = useCallback(async (studentId) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await fetchSectionData(\"tasks\", studentId);\r\n      setTasks(data);\r\n      await fetchStudentData(studentId);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [fetchSectionData, fetchStudentData]);\r\n\r\n  const handleDeleteStudent = async (studentId) => {\r\n    if (isStudent) {\r\n      setSelectedStudent(null);\r\n      setSelectedStudentid(null);\r\n      setStudentData(null);\r\n    } else if (isAdmin) {\r\n      const remainingStudents = studentDetails.filter((student) => student.id !== studentId);\r\n      if (remainingStudents.length > 0) {\r\n        const nextStudent = remainingStudents[0];\r\n        setSelectedStudent(nextStudent);\r\n        setSelectedStudentid(nextStudent.id);\r\n        await fetchStudentData(nextStudent.id);\r\n      } else {\r\n        setSelectedStudent(null);\r\n        setSelectedStudentid(null);\r\n        setStudentData(null);\r\n      }\r\n      await fetchStudentDetails();\r\n    }\r\n  };\r\n\r\n  const renderDrawer = () => (\r\n    <DrawerForm\r\n      open={drawerOpen}\r\n      onClose={() => setDrawerOpen(false)}\r\n      studentId={selectedStudentid}\r\n      onSave={async (savedStudent) => {\r\n        if (savedStudent && typeof savedStudent === \"object\" && savedStudent.id) {\r\n          const formattedStudent = {\r\n            ...savedStudent,\r\n            ...Object.keys(savedStudent).reduce((acc, key) => {\r\n              if (key.toLowerCase().includes(\"date\") && savedStudent[key]) {\r\n                acc[key] = formatDate(savedStudent[key]);\r\n              } else {\r\n                acc[key] = savedStudent[key];\r\n              }\r\n              return acc;\r\n            }, {}),\r\n          };\r\n          setStudentDetails((prev) => {\r\n            const existingIndex = prev.findIndex((s) => s.id === savedStudent.id);\r\n            if (existingIndex >= 0) {\r\n              const updatedDetails = [...prev];\r\n              updatedDetails[existingIndex] = formattedStudent;\r\n              return updatedDetails;\r\n            } else {\r\n              return [...prev, formattedStudent];\r\n            }\r\n          });\r\n          setSelectedStudent(formattedStudent);\r\n          setSelectedStudentid(formattedStudent.id);\r\n          await fetchStudentData(formattedStudent.id);\r\n        }\r\n        setDrawerOpen(false);\r\n        await fetchStudentDetails();\r\n      }}\r\n      onDelete={handleDeleteStudent}\r\n    />\r\n  );\r\n\r\n  const tabSections = [\r\n    { label: \"Show all\", key: \"show_all\" },\r\n    { label: \"About Me\", key: \"about-me\" },\r\n    { label: \"Parents Details\", key: \"parents-details\" },\r\n    { label: \"University Details\", key: \"university-details\" },\r\n    { label: \"Attachments\", key: \"attachments\" },\r\n    { label: \"Financial Details\", key: \"expenses-summary\" },\r\n    { label: \"Assets & Liabilities\", key: \"assets-liabilities\" },\r\n    { label: \"Academic Results\", key: \"academic-results\" },\r\n    { label: \"Voluntary Services\", key: \"voluntary-services\" },\r\n    { label: \"Tasks\", key: \"tasks\" },\r\n  ];\r\n\r\n  if (isAdmin) {\r\n    tabSections.splice(9, 0, { label: \"Payments\", key: \"payments\" }, { label: \"Interviews\", key: \"interviews\" });\r\n  }\r\n\r\n  const capitalizeWords = (str) => {\r\n    if (str.toLowerCase() === \"student id passport number\") {\r\n      return \"ID/Passport Number\";\r\n    }\r\n    if (str.toLowerCase() === \"student willow relationship\") {\r\n      return \"Willowton Group Relationship\";\r\n    }\r\n    const formattedStr = str.replace(/^student /i, \"\").replace(/_/g, \"\");\r\n    return formattedStr.replace(/\\b\\w/g, (char) => char.toUpperCase());\r\n  };\r\n\r\n  const dataForSection = (key) => {\r\n    const mapping = {\r\n      \"about-me\": aboutMe,\r\n      \"parents-details\": parentsDetails,\r\n      \"university-details\": universityDetails,\r\n      \"attachments\": attachments,\r\n      \"expenses-summary\": expensesSummary,\r\n      \"assets-liabilities\": assetsLiabilities,\r\n      \"academic-results\": academicResults,\r\n      \"voluntary-services\": voluntaryServices,\r\n      \"payments\": payments,\r\n      \"interviews\": interviews,\r\n      \"tasks\": tasks,\r\n    };\r\n    return mapping[key] || [];\r\n  };\r\n\r\n  const renderRegion = (sectionKey, data) => {\r\n    if (!data) return null;\r\n\r\n    const isAboutMe = sectionKey === \"about-me\";\r\n    const isParents = sectionKey === \"parents-details\";\r\n    const isUniversityDetails = sectionKey === \"university-details\";\r\n    const isAttachments = sectionKey === \"attachments\";\r\n    const isExpenses = sectionKey === \"expenses-summary\";\r\n    const isAssetsLiabilities = sectionKey === \"assets-liabilities\";\r\n    const isAcademicResults = sectionKey === \"academic-results\";\r\n    const isVoluntaryServices = sectionKey === \"voluntary-services\";\r\n    const isPayments = sectionKey === \"payments\";\r\n    const isInterview = sectionKey === \"interviews\";\r\n    const isTasks = sectionKey === \"tasks\";\r\n\r\n    if ((isPayments || isInterview) && !isAdmin) return null;\r\n\r\n    const section = tabSections.find((sec) => sec.key === sectionKey);\r\n    const sectionLabel = section ? section.label : sectionKey;\r\n\r\n    const handleEdit = (id) => {\r\n      if (isAboutMe) {\r\n        setEditingAboutMeId(id);\r\n        setAboutMeDrawerOpen(true);\r\n      }\r\n      if (isParents) {\r\n        setEditingParentId(id);\r\n        setParentsDrawerOpen(true);\r\n      }\r\n      if (isUniversityDetails) {\r\n        setEditingUniversityId(id);\r\n        setUniversityDetailsDrawerOpen(true);\r\n      }\r\n      if (isAttachments) {\r\n        setEditingAttachmentId(id);\r\n        setAttachmentsDrawerOpen(true);\r\n      }\r\n      if (isExpenses) {\r\n        setEditingExpenseDetailsId(id);\r\n        setExpensesSummaryDrawerOpen(true);\r\n      }\r\n      if (isAssetsLiabilities) {\r\n        setEditingAssetLiabilityId(id);\r\n        setAssetsLiabilitiesDrawerOpen(true);\r\n      }\r\n      if (isAcademicResults) {\r\n        setEditingAcademicResultId(id);\r\n        setAcademicResultsDrawerOpen(true);\r\n      }\r\n      if (isVoluntaryServices) {\r\n        setEditingVoluntaryServiceId(id);\r\n        setVoluntaryServiceDrawerOpen(true);\r\n      }\r\n      if (isPayments) {\r\n        setEditingPaymentId(id);\r\n        setPaymentDrawerOpen(true);\r\n      }\r\n      if (isInterview) {\r\n        setEditingInterviewId(id);\r\n        setInterviewDrawerOpen(true);\r\n      }\r\n      if (isTasks) {\r\n        setEditingTaskId(id);\r\n        setTasksDrawerOpen(true);\r\n      }\r\n    };\r\n\r\n    const handleAdd = () => {\r\n      if (isAboutMe) {\r\n        setEditingAboutMeId(null);\r\n        setAboutMeDrawerOpen(true);\r\n      }\r\n      if (isParents) {\r\n        setEditingParentId(null);\r\n        setParentsDrawerOpen(true);\r\n      }\r\n      if (isUniversityDetails) {\r\n        setEditingUniversityId(null);\r\n        setUniversityDetailsDrawerOpen(true);\r\n      }\r\n      if (isAttachments) {\r\n        setEditingAttachmentId(null);\r\n        setAttachmentsDrawerOpen(true);\r\n      }\r\n      if (isExpenses) {\r\n        setEditingExpenseDetailsId(null);\r\n        setExpensesSummaryDrawerOpen(true);\r\n      }\r\n      if (isAssetsLiabilities) {\r\n        setEditingAssetLiabilityId(null);\r\n        setAssetsLiabilitiesDrawerOpen(true);\r\n      }\r\n      if (isAcademicResults) {\r\n        setEditingAcademicResultId(null);\r\n        setAcademicResultsDrawerOpen(true);\r\n      }\r\n      if (isVoluntaryServices) {\r\n        setEditingVoluntaryServiceId(null);\r\n        setVoluntaryServiceDrawerOpen(true);\r\n      }\r\n      if (isPayments) {\r\n        setEditingPaymentId(null);\r\n        setPaymentDrawerOpen(true);\r\n      }\r\n      if (isInterview) {\r\n        setEditingInterviewId(null);\r\n        setInterviewDrawerOpen(true);\r\n      }\r\n      if (isTasks) {\r\n        setEditingTaskId(null);\r\n        setTasksDrawerOpen(true);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <SectionTable\r\n        data={data}\r\n        sectionKey={sectionKey}\r\n        sectionLabel={sectionLabel}\r\n        isDarkMode={isDarkMode}\r\n        selectedStudentid={selectedStudentid}\r\n        onEdit={selectedStudent ? handleEdit : null}\r\n        onAdd={selectedStudent ? handleAdd : null}\r\n      />\r\n    );\r\n  };\r\n\r\n  const TabContent = ({ sectionKey, data }) => renderRegion(sectionKey, data);\r\n\r\n  const renderTabContent = (tabValue) => {\r\n    const section = tabSections[tabValue];\r\n    return section.key === \"show_all\"\r\n      ? tabSections\r\n        .filter((s) => s.key !== \"show_all\")\r\n        .map((sec, i) => (\r\n          (isAdmin || (sec.key !== \"payments\" && sec.key !== \"interviews\")) && (\r\n            <TabContent key={i} sectionKey={sec.key} data={dataForSection(sec.key)} />\r\n          )\r\n        ))\r\n      : <TabContent sectionKey={section.key} data={dataForSection(section.key)} />;\r\n  };\r\n\r\n  const handleDownloadPDF = (async () => {\r\n    if (!selectedStudent || !studentData) {\r\n      return;\r\n    }\r\n    try {\r\n      const blob = await pdf(<StudentPDFDocument studentData={studentData} />).toBlob();\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement(\"a\");\r\n      a.href = url;\r\n      const firstName = selectedStudent.student_name || \"Unknown\";\r\n      const lastName = selectedStudent.student_surname || \"User\";\r\n      a.download = `${firstName} ${lastName} - Student Details PDF.pdf`;\r\n      a.click();\r\n      URL.revokeObjectURL(url);\r\n    } catch (error) {\r\n    }\r\n  });\r\n\r\n  const isStudentWithNoData = isStudent && !isLoading && !selectedStudent;\r\n  const isUserWithData = (isAdmin || isStudent) && selectedStudent;\r\n\r\n  return (\r\n    <div>\r\n      <Box\r\n        sx={{\r\n          padding: \"12px\",\r\n          backgroundColor: isDarkMode ? \"#1e293b\" : \"#e1f5fe\",\r\n          borderRadius: \"8px\",\r\n          marginBottom: \"12px\",\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          border: \"1px solid #ccc\",\r\n        }}\r\n      >\r\n        <Typography\r\n          variant=\"h6\"\r\n          sx={{ fontWeight: \"bold\", color: isDarkMode ? \"white\" : \"black\" }}\r\n        >\r\n          Student Details\r\n        </Typography>\r\n        {isStudentWithNoData && (\r\n          <Button\r\n            variant=\"contained\"\r\n            onClick={() => {\r\n              setSelectedStudentid(null);\r\n              setDrawerOpen(true);\r\n            }}\r\n            sx={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              backgroundColor: isDarkMode ? \"white\" : \"black\",\r\n              color: isDarkMode ? \"black\" : \"white\",\r\n              padding: \"2px 6px\",\r\n              textTransform: \"none\",\r\n            }}\r\n          >\r\n            <AddIcon sx={{ marginRight: 1, fontSize: \"small\" }} />\r\n            Start Application\r\n          </Button>\r\n        )}\r\n      </Box>\r\n\r\n      <Grid container spacing={3}>\r\n        {isAdmin && (\r\n          <Grid item xs={12} sm={3} md={2}>\r\n            <Paper\r\n              sx={{\r\n                border: \"1px solid #ccc\",\r\n                backgroundColor: isDarkMode ? \"#1e293b\" : \"white\",\r\n                color: pageStyle.color,\r\n              }}\r\n            >\r\n              <Box\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? \"#1e293b\" : \"#e1f5fe\",\r\n                  padding: \"6px\",\r\n                  borderBottom: isDarkMode ? \"1px solid white\" : \"1px solid #ccc\",\r\n                }}\r\n              >\r\n                <Typography\r\n                  variant=\"h6\"\r\n                  sx={{\r\n                    fontWeight: \"bold\",\r\n                    color: isDarkMode ? \"white\" : \"#1e293b\",\r\n                    marginLeft: 1,\r\n                  }}\r\n                >\r\n                  Search\r\n                </Typography>\r\n              </Box>\r\n              <Box sx={{ padding: 2 }}>\r\n                <TextField\r\n                  label=\"Search\"\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  sx={{\r\n                    mb: 1,\r\n                    borderRadius: 1,\r\n                    \"& .MuiOutlinedInput-root\": {\r\n                      backgroundColor: isDarkMode ? \"#1e293b\" : \"white\",\r\n                      \"& fieldset\": {\r\n                        borderColor: isDarkMode ? \"white\" : \"#1e293b\",\r\n                      },\r\n                      \"&:hover fieldset\": {\r\n                        borderColor: isDarkMode ? \"white\" : \"#1e293b\",\r\n                      },\r\n                      \"&.Mui-focused fieldset\": {\r\n                        borderColor: isDarkMode ? \"white\" : \"#1e293b\",\r\n                      },\r\n                    },\r\n                    \"& .MuiInputBase-input\": {\r\n                      color: isDarkMode ? \"white\" : \"#1e293b\",\r\n                    },\r\n                    \"& .MuiInputBase-input::placeholder\": {\r\n                      color: isDarkMode ? \"#B0B0B0\" : \"#666\",\r\n                    },\r\n                  }}\r\n                  placeholder=\"Search\"\r\n                  InputLabelProps={{ style: { color: isDarkMode ? \"#ffffff\" : \"#000000\" } }}\r\n                />\r\n                {isLoading ? (\r\n                  <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '200px' }}>\r\n                    <CircularProgress sx={{ color: isDarkMode ? '#F7FAFC' : '#1e293b' }} />\r\n                  </Box>\r\n                ) : (\r\n                  <div style={{ maxHeight: \"300px\", overflowY: \"auto\" }}>\r\n                    {studentDetails\r\n                      .filter(\r\n                        (s) =>\r\n                          s.student_name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                          s.student_surname.toLowerCase().includes(searchQuery.toLowerCase())\r\n                      )\r\n                      .map((student, idx) => (\r\n                        <Card\r\n                          key={idx}\r\n                          sx={{\r\n                            mb: 0.5,\r\n                            boxShadow: 0,\r\n                            height: 55,\r\n                            cursor: \"pointer\",\r\n                            backgroundColor:\r\n                              selectedStudent?.id === student.id\r\n                                ? isDarkMode\r\n                                  ? \"white\"\r\n                                  : \"#1e293b\"\r\n                                : \"transparent\",\r\n                            color:\r\n                              selectedStudent?.id === student.id\r\n                                ? isDarkMode\r\n                                  ? \"#1e293b\"\r\n                                  : \"white\"\r\n                                : \"inherit\",\r\n                            \"&:hover\": {\r\n                              backgroundColor: isDarkMode ? \"white\" : \"#1e293b\",\r\n                              color: isDarkMode ? \"#1e293b\" : \"white\",\r\n                            },\r\n                          }}\r\n                          onClick={async () => {\r\n                            setSelectedStudent(student);\r\n                            setSelectedStudentid(student.id);\r\n                            setIsLoading(true);\r\n                            await fetchStudentData(student.id);\r\n                            const sectionKeys = [\r\n                              \"about-me\",\r\n                              \"parents-details\",\r\n                              \"university-details\",\r\n                              \"attachments\",\r\n                              \"expenses-summary\",\r\n                              \"assets-liabilities\",\r\n                              \"academic-results\",\r\n                              \"voluntary-services\",\r\n                              \"payments\",\r\n                              \"interviews\",\r\n                              \"tasks\",\r\n                            ].filter((key) => isAdmin || (key !== \"payments\" && key !== \"interviews\"));\r\n                            const responses = await Promise.all(\r\n                              sectionKeys.map((key) => fetchSectionData(key, student.id))\r\n                            );\r\n                            setAboutMe(responses[sectionKeys.indexOf(\"about-me\")]);\r\n                            setParentsDetails(responses[sectionKeys.indexOf(\"parents-details\")]);\r\n                            setUniversityDetails(responses[sectionKeys.indexOf(\"university-details\")]);\r\n                            setAttachments(responses[sectionKeys.indexOf(\"attachments\")]);\r\n                            setExpensesSummary(responses[sectionKeys.indexOf(\"expenses-summary\")]);\r\n                            setAssetsLiabilities(responses[sectionKeys.indexOf(\"assets-liabilities\")]);\r\n                            setAcademicResults(responses[sectionKeys.indexOf(\"academic-results\")]);\r\n                            setVoluntaryServices(responses[sectionKeys.indexOf(\"voluntary-services\")]);\r\n                            if (isAdmin) {\r\n                              setPayments(responses[sectionKeys.indexOf(\"payments\")]);\r\n                              setInterviews(responses[sectionKeys.indexOf(\"interviews\")]);\r\n                            }\r\n                            setTasks(responses[sectionKeys.indexOf(\"tasks\")]);\r\n                          }}\r\n                        >\r\n                          <CardContent sx={{ padding: \"10px\" }}>\r\n                            <Typography variant=\"body1\" sx={{ fontWeight: \"bold\" }}>\r\n                              {student.student_name}\r\n                            </Typography>\r\n                            <Typography variant=\"body2\">{student.student_surname}</Typography>\r\n                          </CardContent>\r\n                        </Card>\r\n                      ))}\r\n                  </div>\r\n                )}\r\n              </Box>\r\n            </Paper>\r\n          </Grid>\r\n        )}\r\n\r\n        {(isAdmin || selectedStudent) && (\r\n          <Grid item xs={12} sm={9} md={isStudent ? 12 : 10}>\r\n            <Paper\r\n              sx={{\r\n                border: \"1px solid #ccc\",\r\n                backgroundColor: isDarkMode ? \"#1e293b\" : \"white\",\r\n                color: pageStyle.color,\r\n              }}\r\n            >\r\n              <Box\r\n                sx={{\r\n                  backgroundColor: isDarkMode ? \"#1e293b\" : \"#e1f5fe\",\r\n                  borderBottom: isDarkMode ? \"1px solid white\" : \"1px solid #ccc\",\r\n                  padding: \"6px\",\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-between\",\r\n                }}\r\n              >\r\n                <Typography\r\n                  variant=\"h6\"\r\n                  sx={{ fontWeight: \"bold\", color: isDarkMode ? \"white\" : \"#1e293b\", marginLeft: 1 }}\r\n                >\r\n                  Student Details Portal\r\n                </Typography>\r\n                {isUserWithData && (\r\n                  <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 0, margin: 0, padding: 0 }}>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      onClick={() => {\r\n                        setDrawerOpen(false);\r\n                        setTimeout(() => setDrawerOpen(true), 50);\r\n                        setSelectedStudentid(selectedStudent?.id);\r\n                      }}\r\n                      sx={{\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        backgroundColor: isDarkMode ? \"white\" : \"black\",\r\n                        color: isDarkMode ? \"black\" : \"white\",\r\n                        padding: \"2px 6px\",\r\n                        margin: 0,\r\n                        textTransform: \"none\",\r\n                      }}\r\n                    >\r\n                      <EditIcon sx={{ marginRight: 1, fontSize: \"small\" }} />\r\n                      Edit\r\n                    </Button>\r\n                    {isAdmin && (\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      onClick={handleDownloadPDF}\r\n                      sx={{\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        backgroundColor: isDarkMode ? \"white\" : \"black\",\r\n                        color: isDarkMode ? \"black\" : \"white\",\r\n                        padding: \"2px 6px\",\r\n                        margin: 0,\r\n                        textTransform: \"none\",\r\n                        marginLeft: 1,\r\n                      }}\r\n                    >\r\n                      <DownloadIcon sx={{ marginRight: 1, fontSize: \"small\" }} />\r\n                      Download PDF\r\n                    </Button>\r\n                  )}\r\n                  </Box>\r\n                )}\r\n              </Box>\r\n\r\n              {isLoading ? (\r\n                <Box sx={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\", padding: 4 }}>\r\n                  <CircularProgress sx={{ color: isDarkMode ? \"white\" : \"black\" }} />\r\n                  <Typography variant=\"body1\" sx={{ ml: 2, color: isDarkMode ? \"white\" : \"black\" }}>\r\n                    Loading...\r\n                  </Typography>\r\n                </Box>\r\n              ) : selectedStudent ? (\r\n                <Box sx={{ padding: 1.5 }}>\r\n                  <Grid container spacing={1}>\r\n                    {Object.entries(selectedStudent).map(([key, value], i) => (\r\n                      key !== \"id\" &&\r\n                      key !== \"user_id\" &&\r\n                      key !== \"employment_status_attachment\" && (\r\n                        <React.Fragment key={i}>\r\n                          <Grid item xs={6} sx={{ borderBottom: \"1px solid #ccc\", pb: \"6px\" }}>\r\n                            <Typography variant=\"body1\">\r\n                              <strong>{capitalizeWords(key.replace(/_/g, \" \"))}</strong>\r\n                            </Typography>\r\n                          </Grid>\r\n                          <Grid item xs={6} sx={{ borderBottom: \"1px solid #ccc\", pb: \"6px\" }}>\r\n                            <Typography variant=\"body1\">{value}</Typography>\r\n                          </Grid>\r\n                        </React.Fragment>\r\n                      )\r\n                    ))}\r\n                  </Grid>\r\n                </Box>\r\n              ) : (\r\n                <Typography variant=\"body1\" sx={{ m: 2, fontWeight: \"bold\", color: isDarkMode ? \"white\" : \"black\" }}>\r\n                  No Record Selected\r\n                </Typography>\r\n              )}\r\n\r\n              {!isLoading && selectedStudent && (\r\n                <Box sx={{ p: 1, overflowX: \"auto\" }}>\r\n                  <Tabs\r\n                    value={tabValue}\r\n                    onChange={(event, newValue) => setTabValue(newValue)}\r\n                    aria-label=\"tabs\"\r\n                    sx={{\r\n                      \"& .MuiTab-root\": {\r\n                        fontWeight: \"600\",\r\n                        textTransform: \"capitalize\",\r\n                        mr: -2,\r\n                        color: isDarkMode ? \"white\" : \"black\",\r\n                      },\r\n                    }}\r\n                  >\r\n                    {tabSections.map((section, i) => (\r\n                      <Tab key={i} label={section.label} />\r\n                    ))}\r\n                  </Tabs>\r\n                </Box>\r\n              )}\r\n\r\n              {!isLoading && selectedStudent && (\r\n                <Box sx={{ p: 2 }}>{renderTabContent(tabValue)}</Box>\r\n              )}\r\n            </Paper>\r\n          </Grid>\r\n        )}\r\n      </Grid>\r\n\r\n      {renderDrawer()}\r\n\r\n      <AboutusDrawer\r\n        open={aboutMeDrawerOpen}\r\n        onClose={() => {\r\n          setAboutMeDrawerOpen(false);\r\n          setEditingAboutMeId(null);\r\n        }}\r\n        studentId={selectedStudentid}\r\n        aboutMeId={editingAboutMeId}\r\n        onSave={() => {\r\n          if (selectedStudentid) {\r\n            fetchAboutMe(selectedStudentid);\r\n          }\r\n          setAboutMeDrawerOpen(false);\r\n          setEditingAboutMeId(null);\r\n        }}\r\n      />\r\n\r\n      <ParentsDrawer\r\n        open={parentsDrawerOpen}\r\n        onClose={() => {\r\n          setParentsDrawerOpen(false);\r\n          setEditingParentId(null);\r\n        }}\r\n        studentId={selectedStudentid}\r\n        parentId={editingParentId}\r\n        onSave={() => {\r\n          if (selectedStudentid) {\r\n            fetchParentsDetails(selectedStudentid);\r\n          }\r\n          setParentsDrawerOpen(false);\r\n          setEditingParentId(null);\r\n        }}\r\n      />\r\n\r\n      <UniversityDetailsDrawer\r\n        open={universityDetailsDrawerOpen}\r\n        onClose={() => {\r\n          setUniversityDetailsDrawerOpen(false);\r\n          setEditingUniversityId(null);\r\n        }}\r\n        studentId={selectedStudentid}\r\n        universityDetailsId={editingUniversityId}\r\n        onSave={() => {\r\n          if (selectedStudentid) {\r\n            fetchUniversityDetails(selectedStudentid);\r\n          }\r\n          setUniversityDetailsDrawerOpen(false);\r\n          setEditingUniversityId(null);\r\n        }}\r\n      />\r\n\r\n      <AttachmentsDrawer\r\n        open={attachmentsDrawerOpen}\r\n        onClose={() => {\r\n          setAttachmentsDrawerOpen(false);\r\n          setEditingAttachmentId(null);\r\n        }}\r\n        studentId={selectedStudentid}\r\n        attachmentId={editingAttachmentId}\r\n        onSave={() => {\r\n          if (selectedStudentid) {\r\n            fetchAttachmentsDetails(selectedStudentid);\r\n          }\r\n          setAttachmentsDrawerOpen(false);\r\n          setEditingAttachmentId(null);\r\n        }}\r\n      />\r\n\r\n      <ExpenseDetailsDrawer\r\n        open={expenseDetailsDrawerOpen}\r\n        onClose={() => {\r\n          setExpensesSummaryDrawerOpen(false);\r\n          setEditingExpenseDetailsId(null);\r\n        }}\r\n        studentId={selectedStudentid}\r\n        expenseDetailsId={editingExpenseDetailsId}\r\n        onSave={() => {\r\n          if (selectedStudentid) {\r\n            fetchExpenseDetails(selectedStudentid);\r\n          }\r\n          setExpensesSummaryDrawerOpen(false);\r\n          setEditingExpenseDetailsId(null);\r\n        }}\r\n      />\r\n\r\n      <AssetsLiabilitiesDrawer\r\n        open={assetsLiabilitiesDrawerOpen}\r\n        onClose={() => {\r\n          setAssetsLiabilitiesDrawerOpen(false);\r\n          setEditingAssetLiabilityId(null);\r\n        }}\r\n        studentId={selectedStudentid}\r\n        assetLiabilityId={editingAssetLiabilityId}\r\n        onSave={() => {\r\n          if (selectedStudentid) fetchAssetsLiabilities(selectedStudentid);\r\n          setAssetsLiabilitiesDrawerOpen(false);\r\n          setEditingAssetLiabilityId(null);\r\n        }}\r\n      />\r\n\r\n      <AcademicResultsDrawer\r\n        open={academicResultsDrawerOpen}\r\n        onClose={() => {\r\n          setAcademicResultsDrawerOpen(false);\r\n          setEditingAcademicResultId(null);\r\n        }}\r\n        studentId={selectedStudentid}\r\n        resultId={editingAcademicResultId}\r\n        onSave={() => {\r\n          if (selectedStudentid) fetchAcademicResults(selectedStudentid);\r\n          setAcademicResultsDrawerOpen(false);\r\n          setEditingAcademicResultId(null);\r\n        }}\r\n      />\r\n\r\n      <VoluntaryServiceDrawer\r\n        open={voluntaryServiceDrawerOpen}\r\n        onClose={() => {\r\n          setVoluntaryServiceDrawerOpen(false);\r\n          setEditingVoluntaryServiceId(null);\r\n        }}\r\n        studentId={selectedStudentid}\r\n        recordId={editingVoluntaryServiceId}\r\n        onSave={() => {\r\n          if (selectedStudentid) fetchVoluntaryServices(selectedStudentid);\r\n          setVoluntaryServiceDrawerOpen(false);\r\n          setEditingVoluntaryServiceId(null);\r\n        }}\r\n      />\r\n\r\n      <PaymentDrawer\r\n        open={paymentDrawerOpen}\r\n        onClose={() => setPaymentDrawerOpen(false)}\r\n        studentId={selectedStudentid}\r\n        recordId={editingPaymentId}\r\n        onSave={() => {\r\n          if (selectedStudentid) {\r\n            fetchPaymentsDetails(selectedStudentid);\r\n          }\r\n          setPaymentDrawerOpen(false);\r\n          setEditingPaymentId(null);\r\n        }}\r\n      />\r\n\r\n      <InterviewDrawer\r\n        open={interviewDrawerOpen}\r\n        onClose={() => setInterviewDrawerOpen(false)}\r\n        studentId={selectedStudentid}\r\n        recordId={editingInterviewId}\r\n        onSave={() => {\r\n          if (selectedStudentid) {\r\n            fetchInterviewsDetails(selectedStudentid);\r\n          }\r\n          setInterviewDrawerOpen(false);\r\n          setEditingInterviewId(null);\r\n        }}\r\n      />\r\n\r\n      <TaskDetailsDrawer\r\n        open={tasksDrawerOpen}\r\n        onClose={() => {\r\n          setTasksDrawerOpen(false);\r\n          setEditingTaskId(null);\r\n        }}\r\n        studentId={selectedStudentid}\r\n        taskId={editingTaskId}\r\n        onSave={() => {\r\n          if (selectedStudentid) {\r\n            fetchTasks(selectedStudentid);\r\n          }\r\n          setTasksDrawerOpen(false);\r\n          setEditingTaskId(null);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentDetails;"],"names":["races","provinces","maritalStatus","yes_no","employmentStatus","highestEducation","semesters","financeType","religions","studentType","nationality","parentRelationship","API_BASE_URL","process","_ref","open","onClose","studentId","onSave","onDelete","isDarkMode","useContext","ThemeContext","selectedDate","setSelectedDate","useState","emailError","setEmailError","whatsappError","setWhatsappError","alternativeError","setAlternativeError","emergencyError","setEmergencyError","nameError","setNameError","surnameError","setSurnameError","emergencyContactOption","setEmergencyContactOption","deleteConfirmationOpen","setDeleteConfirmationOpen","deleteAttachmentConfirmationOpen","setDeleteAttachmentConfirmationOpen","errorMessage","setErrorMessage","isLoading","setIsLoading","drawerWidth","useMediaQuery","user","JSON","parse","localStorage","getItem","isAdmin","user_type","relationshipTypes","formData","setFormData","student_name","student_surname","student_nationality","student_id_passport_number","student_type","student_religion","student_finance_type","student_whatsapp_number","student_alternative_number","student_email_address","student_highest_education","student_home_address","student_suburb","student_area_code","student_province","student_date_of_birth","student_race","student_marital_status","student_employment_status","student_job_title","student_company_of_employment","student_current_salary","student_number_of_siblings","student_siblings_bursary","student_willow_relationship","relation_type","relation_hr_contact","relation_branch","relation_name","relation_surname","relation_employee_code","relation_reference","student_emergency_contact_name","student_emergency_contact_number","student_emergency_contact_relationship","student_emergency_contact_address","student_status","student_status_comment","employment_status_attachment","employment_status_attachment_name","statusOptions","validateEmail","email","test","validateNumber","number","useEffect","async","response","fetch","ok","Error","statusText","data","json","dates","Date","prev","error","console","fetchStudentData","handleDateChange","newDate","formattedDate","format","handleChange","e","name","value","target","sanitizedValue","includes","replace","slice","prevState","handleFileChange","file","files","fileNameWithoutExtension","handleViewFile","window","handleDeleteAttachmentClick","handleDeleteAttachmentCancel","handleEmergencyContactChange","newValue","handleSave","userId","user_id","url","method","body","FormData","Object","keys","forEach","key","undefined","append","savedStudent","cleanStudent","handleDeleteCancel","filteredFinanceType","filter","type","_jsx","Drawer","anchor","children","_jsxs","Box","sx","width","height","display","flexDirection","backgroundColor","padding","borderBottom","Typography","variant","fontWeight","color","mt","flex","overflowY","justifyContent","alignItems","CircularProgress","Grid","container","spacing","map","index","renderField","fieldStyles","borderRadius","inputLabelProps","style","item","xs","Autocomplete","onChange","options","renderInput","params","TextField","label","InputLabelProps","labels","fullWidth","LocalizationProvider","dateAdapter","AdapterDateFns","DatePicker","wrapperClassName","className","helperText","inputProps","maxLength","pattern","required","marginTop","disabled","multiline","rows","WebkitTextFillColor","Button","component","borderColor","hidden","_Fragment","onClick","startIcon","VisibilityIcon","DeleteIcon","toLowerCase","split","word","charAt","toUpperCase","join","Divider","borderTop","gap","size","CloseIcon","handleDeleteClick","SaveIcon","AddIcon","Dialog","DialogTitle","DialogContent","DialogActions","err","aboutMeId","then","res","initialData","student_details_portal_id","i","toString","padStart","p","question","id","isUpdate","dataToSend","headers","stringify","result","parentId","cellNumberError","setCellNumberError","validateCellNumber","parent_email_address","parent_cell_number","parent_relationship","parent_name","parent_surname","parent_employment_status","parent_industry","parent_highest_education","parent_salary","parent_grant","parent_other_income","numericValue","entries","_ref2","universityDetailsId","normalizedData","Institution_name","name_of_Course","intake_year","Semester","NQF_Level","Current_Year","Student_Number","previously_funded","previously_funded_amount","tuition","tuition_amount","accommodation","accommodation_fee","textbooks","textbooks_fee","travel","travel_fee","total_university_expense","previous_bursary_org_1","previous_bursary_org_1_name","previous_bursary_org_1_amount","previous_bursary_org_1_contact","previous_bursary_org_2","previous_bursary_org_2_name","previous_bursary_org_2_amount","previous_bursary_org_2_contact","previous_bursary_org_3","previous_bursary_org_3_name","previous_bursary_org_3_amount","previous_bursary_org_3_contact","Application_Process_Status","handleAutocompleteChange","newFormData","conditionalField","conditionalFields","find","field","select","amount","bursaryFields","bursaryConditionalFields","contact","yesNoOptions","intakeYearOptions","isConditionalSelect","some","isConditionalamount","isBursarySelect","isBursaryField","customLabel","relatedBursary","relatedSelect","InputProps","readOnly","attachmentId","Attachments_Name","attachments_name","Attachments_Description","attachments_description","Attachment","Student_Details_Portal_id","expenseDetailsId","Father_Monthly_Salary","Mother_Monthly_Salary","Spouse_Monthly_Salary","Applicant_Monthly_Salary","Rent_Income","Grants","Other_Income","Rent_Bond_Expense","Rates_Expense","Utilities_Expense","Groceries_Expense","Transport_Petrol_Expense","Telephone_Expense","Medical_Aid_Expense","Insurance_Expense","Other_Expense","total_income","total_expenses","father_monthly_salary","mother_monthly_salary","spouse_monthly_salary","applicant_monthly_salary","rent_income","grants","other_income","rent_bond_expense","rates_expense","utilities_expense","groceries_expense","transport_petrol_expense","telephone_expense","medical_aid_expense","insurance_expense","other_expense","Number","catch","totalIncome","reduce","total","parseFloat","totalExpenses","idx","char","inputMode","toFixed","updatedFormData","stringFormData","acc","savedData","assetLiabilityId","Gold_Silver","Cash_in_Bank","Investments","Liabilities","gold_silver","cash_in_bank","investments","liabilities","resultId","Results_Module","results_module","Results_Percentage","results_percentage","Results_Attachment","Results_Attachment_Name","results_attachment_name","recordId","Organisation","organisation","Contact_Person","contact_person","Contact_Person_Number","contact_person_number","Hours_Contributed","hours_contributed","Proof_of_Service","Service_Attachment_Name","service_attachment_name","createdBy","first_name","last_name","date","payments_date","Payments_Expense_Type","payments_expense_type","Payments_Vendor","payments_vendor","Payments_Expense_Amount","payments_expense_amount","Payments_Date","Payments_ET_Number","payments_et_number","Payments_Attachment_Name","payments_attachment_name","Proof_of_Payment","Payment_Created_By","payment_created_by","Interviewer_Name","interviewer_name","Year_of_Interview","year_of_interview","Interview_Q01","interview_q01","Interview_Q02","interview_q02","Interview_Q03","interview_q03","Interview_Q04","interview_q04","Interview_Q05","interview_q05","Interview_Q06","interview_q06","Interview_Q07","interview_q07","Interview_Q08","interview_q08","Interview_Q09","interview_q09","Interview_Q10","interview_q10","Interview_Q11","interview_q11","Interview_Q12","interview_q12","Interview_Q13","interview_q13","Interview_Q14","interview_q14","Interview_Q15","interview_q15","Interview_Q16","interview_q16","Interview_Q17","interview_q17","Interview_Q18","interview_q18","Interview_Q19","interview_q19","Interview_Q20","interview_q20","Interview_Q21","interview_q21","Interview_Q22","interview_q22","Interview_Q23","interview_q23","Interview_Q24","interview_q24","Interview_Created_By","interview_created_by","Date_Stamp","date_stamp","questionNumber","taskId","useMemo","isStudent","created_by","task_description","task_status","task_comment","taskStatusOptions","aboutMeQuestions","interviewQuestions","styles","StyleSheet","create","page","fontSize","fontFamily","lineHeight","header","marginBottom","paddingBottom","logo","objectFit","headerText","textAlign","headerTitle1","headerTitle2","fontStyle","reportTime","sectionTitle","studentDetailsRow","studentDetailsField","borderBottomWidth","borderBottomColor","borderBottomStyle","studentDetailsLabel","studentDetailsValue","table","borderStyle","borderWidth","tableRow","minHeight","tableCellLabel","borderRightWidth","borderRightColor","wordBreak","minWidth","overflow","tableCellValue","breakLongWords","str","maxLen","arguments","length","match","RegExp","toSentenceCase","removePrefix","cleanLabel","cleanSection","startsWith","mapQuestion","section","questions","parseInt","StudentDetailsSection","k","v","push","View","Text","row","rowIdx","_ref3","RenderSection","_ref4","title","_ref5","_ref6","wrap","RenderMultiple","_ref7","showNumbering","_ref8","val","_ref9","studentData","Document","Page","Image","src","toLocaleString","year","month","day","hour","minute","hour12","student_details","about_me","assets_liabilities","expense_details","interview","university_details","parents_details","attachments","payments","results","tasks","voluntary_service","SectionTable","sectionKey","sectionLabel","selectedStudentid","onEdit","onAdd","searchTerm","setSearchTerm","columns","setColumns","visibleColumns","setVisibleColumns","columnWidths","setColumnWidths","anchorEl","setAnchorEl","showSearch","setShowSearch","sortConfig","setSortConfig","direction","setPage","rowsPerPage","setRowsPerPage","columnSearchTerm","setColumnSearchTerm","totalRecords","setTotalRecords","loading","setLoading","searchRef","useRef","resizingRef","Boolean","theme","useTheme","isSmallScreen","breakpoints","down","sentenceCase","useCallback","c","calculateColumnWidth","col","calculatedWidth","Math","max","cols","loadData","handleClickOutside","event","current","contains","document","addEventListener","removeEventListener","handleMouseMove","startX","startWidth","newWidth","clientX","stopResizing","userSelect","startResizing","preventDefault","filteredData","sort","a","b","aVal","bVal","localeCompare","paginatedData","filteredColumns","lowerTerm","raw","formatted","border","ref","transition","opacity","InputBase","placeholder","px","startAdornment","SearchIcon","mr","endAdornment","IconButton","ClearIcon","Tooltip","currentTarget","ViewColumnIcon","exportToExcel","exportData","s","fromEntries","ws","XLSX","json_to_sheet","wb","book_new","book_append_sheet","DownloadIcon","Menu","PaperProps","maxHeight","boxShadow","autoFocus","onKeyDown","stopPropagation","mb","MenuItem","dense","FormControlLabel","control","Checkbox","checked","indexOf","updated","splice","toggleColumn","my","ListItemIcon","RefreshIcon","ListItemText","primary","primaryTypographyProps","tableLayout","cursor","position","handleSort","paddingRight","ArrowDropUpIcon","ArrowDropDownIcon","onMouseDown","right","top","background","EditIcon","textOverflow","whiteSpace","toLocaleDateString","colSpan","Select","n","MuiMenuItem","min","ArrowBackIosIcon","ArrowForwardIosIcon","StudentDetails","searchQuery","setSearchQuery","studentDetails","setStudentDetails","selectedStudent","setSelectedStudent","setSelectedStudentid","tabValue","setTabValue","drawerOpen","setDrawerOpen","aboutMeDrawerOpen","setAboutMeDrawerOpen","editingAboutMeId","setEditingAboutMeId","parentsDrawerOpen","setParentsDrawerOpen","editingParentId","setEditingParentId","universityDetailsDrawerOpen","setUniversityDetailsDrawerOpen","editingUniversityId","setEditingUniversityId","attachmentsDrawerOpen","setAttachmentsDrawerOpen","editingAttachmentId","setEditingAttachmentId","expenseDetailsDrawerOpen","setExpensesSummaryDrawerOpen","editingExpenseDetailsId","setEditingExpenseDetailsId","assetsLiabilitiesDrawerOpen","setAssetsLiabilitiesDrawerOpen","editingAssetLiabilityId","setEditingAssetLiabilityId","academicResultsDrawerOpen","setAcademicResultsDrawerOpen","editingAcademicResultId","setEditingAcademicResultId","voluntaryServiceDrawerOpen","setVoluntaryServiceDrawerOpen","editingVoluntaryServiceId","setEditingVoluntaryServiceId","paymentDrawerOpen","setPaymentDrawerOpen","editingPaymentId","setEditingPaymentId","interviewDrawerOpen","setInterviewDrawerOpen","editingInterviewId","setEditingInterviewId","tasksDrawerOpen","setTasksDrawerOpen","editingTaskId","setEditingTaskId","setStudentData","aboutMe","setAboutMe","parentsDetails","setParentsDetails","universityDetails","setUniversityDetails","setAttachments","expensesSummary","setExpensesSummary","assetsLiabilities","setAssetsLiabilities","academicResults","setAcademicResults","voluntaryServices","setVoluntaryServices","setPayments","interviews","setInterviews","setTasks","pageStyle","formatDate","dateString","fetchStudentDetails","_data$","Array","isArray","_formattedData$","formattedData","student","updatedStudent","fetchSectionData","updatedItem","endsWith","mounted","sectionKeys","responses","Promise","all","initializeData","fetchAboutMe","fetchParentsDetails","fetchUniversityDetails","fetchAttachmentsDetails","fetchExpenseDetails","fetchAssetsLiabilities","fetchAcademicResults","fetchVoluntaryServices","fetchPaymentsDetails","fetchInterviewsDetails","fetchTasks","handleDeleteStudent","remainingStudents","nextStudent","tabSections","capitalizeWords","dataForSection","TabContent","renderRegion","isAboutMe","isParents","isUniversityDetails","isAttachments","isExpenses","isAssetsLiabilities","isAcademicResults","isVoluntaryServices","isPayments","isInterview","isTasks","sec","handleAdd","isStudentWithNoData","isUserWithData","textTransform","marginRight","sm","md","Paper","marginLeft","Card","CardContent","margin","setTimeout","blob","pdf","StudentPDFDocument","toBlob","URL","createObjectURL","createElement","href","firstName","lastName","download","click","revokeObjectURL","ml","React","pb","m","overflowX","Tabs","Tab","renderTabContent","DrawerForm","formattedStudent","existingIndex","findIndex","updatedDetails","AboutusDrawer","ParentsDrawer","UniversityDetailsDrawer","AttachmentsDrawer","ExpenseDetailsDrawer","AssetsLiabilitiesDrawer","AcademicResultsDrawer","VoluntaryServiceDrawer","PaymentDrawer","InterviewDrawer","TaskDetailsDrawer"],"sourceRoot":""}