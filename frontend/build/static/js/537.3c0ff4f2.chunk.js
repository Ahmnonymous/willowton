(self.webpackChunkfrontends=self.webpackChunkfrontends||[]).push([[537],{45517:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>et});var s=n(65043),a=n(7353),r=n(94496),o=n(62559),l=n(17392),i=n(77739),d=n(70378),c=n(32143),u=n(74605),p=n(23217),m=n(39336),h=n(2050),x=n(48734),_=n(72221),y=n(11906),f=n(68903),A=n(61596),b=n(67784),C=n(12110),j=n(26494),v=n(81637),g=n(83625),F=n(24056),w=n(83560),k=n(70141),S=n(79484),E=n(52879),I=n(47968),B=n(47805),P=n(15954),D=n(68843),M=n(37131),L=n(99389),W=n(30079),T=n(26240),$=n(85442),R=n(11238),N=n(60704),O=n(94109),z=n(83462),Q=n(4219),U=n(35316),Y=n(29347),H=n(33438),q=n(37141),V=n(51387),G=n(3632);const J=["Asian","Black","Caucasian","Multiracial"],K=["Eastern Cape","Free State","Gauteng","KwaZulu-Natal","Limpopo","Mpumalanga","Northern Cape","North West","Western Cape"],X=["Divorced","Married","Single","Widowed"],Z=["Yes","No"],ee=["Disabled Grant","Full Time Employed","Part-Time Employed","Pensioner","Self Employed","Student","Unemployed"],te=["NQF 5 - Matric/Higher Certificate","NQF 6 - Diploma","NQF 7 - Degree","NQF 8 - Honors/Postgraduate","NQF 9 - Masters","NQF 10 - PhD/Doctorate"],ne=["1st Semester (January-June)","2nd Semester (July-Decemeber)"],se=["Staff Bursary","Student Loan","Zakah"],ae=["African beliefs","Christianity","Hinduism","Islam","Judaism"],re=["Currently in matric","Currently in university"],oe=["Angola","Congo","Equatorial Quinea","Kenya","Mozambique","Nigeria","Uganda","India","Botswana","Central African Republic","Ghana","Malawi","Pakistan","South African","Bangladesh","Somalian","Lesotho","Ivory Coast","Burundi"],le=["Mother","Father"];var ie=n(27415),de=n(13916),ce=n(58390),ue=n(2820),pe=n(97696),me=n(39993),he=n(70579);const xe="https://willowtonbursary.co.za/api",_e=e=>{let{open:t,onClose:n,studentId:o,onSave:l,onDelete:i}=e;const{isDarkMode:d}=(0,s.useContext)(ie.D),[c,u]=(0,s.useState)(null),[p,h]=(0,s.useState)(""),[x,_]=(0,s.useState)(""),[A,C]=(0,s.useState)(""),[j,g]=(0,s.useState)(""),[F,w]=(0,s.useState)(""),[S,E]=(0,s.useState)(!1),[I,B]=(0,s.useState)(!1),[P,D]=(0,s.useState)(""),[M,L]=(0,s.useState)(!1),W=(0,$.A)("(min-width:600px)")?500:330,T=JSON.parse(localStorage.getItem("user")),R="admin"===(null===T||void 0===T?void 0:T.user_type),ne=["Staff","Dependent of Staff","Family","Referral","Director/Board Member or stakeholder"],[le,_e]=(0,s.useState)({student_name:"",student_surname:"",student_nationality:"",student_id_passport_number:"",student_type:"",student_religion:"",student_finance_type:"",student_whatsapp_number:"",student_alternative_number:"",student_email_address:"",student_highest_education:"",student_home_address:"",student_suburb:"",student_area_code:"",student_province:"",student_date_of_birth:"",student_race:"",student_marital_status:"",student_employment_status:"",student_job_title:"",student_company_of_employment:"",student_current_salary:"",student_number_of_siblings:"",student_siblings_bursary:"",student_willow_relationship:"",relation_type:"",relation_hr_contact:"",relation_branch:"",relation_name:"",relation_surname:"",relation_employee_code:"",relation_reference:"",student_emergency_contact_name:"",student_emergency_contact_number:"",student_emergency_contact_relationship:"",student_emergency_contact_address:"",student_status:"Pending",student_status_comment:"",employment_status_attachment:null,employment_status_attachment_name:""}),ye=["Received","Pending","Approved","Declined"],fe=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),Ae=e=>/^\d{10}$/.test(e);(0,s.useEffect)((()=>{if(t)if(o){(async()=>{L(!0);try{const e=await fetch(`${xe}/student-details/${o}`);if(!e.ok)throw new Error(`Failed to fetch student data: ${e.statusText}`);const t=await e.json(),n=t.student_date_of_birth?(0,pe.A)(t.student_date_of_birth,"dd/MM/yyyy",new Date):null;u(n),_e((e=>({...e,...t,student_date_of_birth:n,student_status:t.student_status||"Pending",student_status_comment:t.student_status_comment||"",relation_type:t.relation_type||"",relation_hr_contact:t.relation_hr_contact||"",relation_branch:t.relation_branch||"",relation_name:t.relation_name||"",relation_surname:t.relation_surname||"",relation_employee_code:t.relation_employee_code||"",relation_reference:t.relation_reference||"",employment_status_attachment:null,employment_status_attachment_name:t.employment_status_attachment_name||""}))),w(t.student_emergency_contact_name?"Add new":""),h(t.student_email_address&&!fe(t.student_email_address)?"Please enter a valid email address":""),_(t.student_whatsapp_number&&!Ae(t.student_whatsapp_number)?"WhatsApp number must be exactly 10 digits":""),C(t.student_alternative_number&&!Ae(t.student_alternative_number)?"Alternative number must be exactly 10 digits":""),g(t.student_emergency_contact_number&&!Ae(t.student_emergency_contact_number)?"Emergency contact number must be exactly 10 digits":"")}catch(e){console.error("Error fetching student data:",e),D("Failed to load student data. Please try again.")}finally{L(!1)}})()}else u(null),_e({student_name:"",student_surname:"",student_nationality:"",student_id_passport_number:"",student_type:"",student_religion:"",student_finance_type:"",student_whatsapp_number:"",student_alternative_number:"",student_email_address:"",student_highest_education:"",student_home_address:"",student_suburb:"",student_area_code:"",student_province:"",student_date_of_birth:"",student_race:"",student_marital_status:"",student_employment_status:"",student_job_title:"",student_company_of_employment:"",student_current_salary:"",student_number_of_siblings:"",student_siblings_bursary:"",student_willow_relationship:"",relation_type:"",relation_hr_contact:"",relation_branch:"",relation_name:"",relation_surname:"",relation_employee_code:"",relation_reference:"",student_emergency_contact_name:"",student_emergency_contact_number:"",student_emergency_contact_relationship:"",student_emergency_contact_address:"",student_status:"Pending",student_status_comment:"",employment_status_attachment:null,employment_status_attachment_name:""}),w(""),h(""),_(""),C(""),g(""),D("")}),[t,o]);const be=e=>{u(e);const t=e?(0,me.A)(e,"MM/dd/yyyy"):"";_e((e=>({...e,student_date_of_birth:t})))},Ce=e=>{const{name:t,value:n}=e.target;let s=n;["student_whatsapp_number","student_alternative_number","student_emergency_contact_number"].includes(t)&&(s=n.replace(/\D/g,"").slice(0,10)),_e((e=>({...e,[t]:s}))),"student_email_address"===t&&h(n&&!fe(n)?"Please enter a valid email address":""),"student_whatsapp_number"===t&&_(s&&!Ae(s)?"WhatsApp number must be exactly 10 digits":""),"student_alternative_number"===t&&C(s&&!Ae(s)?"Alternative number must be exactly 10 digits":""),"student_emergency_contact_number"===t&&g(s&&!Ae(s)?"Emergency contact number must be exactly 10 digits":""),"student_willow_relationship"===t&&"No"===n&&_e((e=>({...e,relation_type:"",relation_hr_contact:"",relation_branch:"",relation_name:"",relation_surname:"",relation_employee_code:"",relation_reference:""}))),"relation_type"===t&&"Yes"===le.student_willow_relationship&&_e((e=>({...e,relation_hr_contact:"",relation_branch:"",relation_name:"",relation_surname:"",relation_employee_code:"",relation_reference:""})))},je=e=>{const t=e.target.files[0];if(t){const e=t.name;_e((n=>({...n,employment_status_attachment_name:e,employment_status_attachment:t})))}},ve=()=>{o&&window.open(`${xe}/student-details/view-attachment/${o}`,"_blank")},ge=()=>{B(!0)},Fe=()=>{B(!1)},we=(e,t)=>{w(t),"Same as above"===t?(_e((e=>({...e,student_emergency_contact_name:le.student_name,student_emergency_contact_number:le.student_whatsapp_number,student_emergency_contact_relationship:"Self",student_emergency_contact_address:le.student_home_address}))),g(le.student_whatsapp_number&&!Ae(le.student_whatsapp_number)?"Emergency contact number must be exactly 10 digits":"")):(_e((e=>({...e,student_emergency_contact_name:"",student_emergency_contact_number:"",student_emergency_contact_relationship:"",student_emergency_contact_address:""}))),g(""))},ke=async()=>{if(le.student_email_address&&!fe(le.student_email_address))return void h("Please enter a valid email address");if(le.student_whatsapp_number&&!Ae(le.student_whatsapp_number))return void _("WhatsApp number must be exactly 10 digits");if(le.student_alternative_number&&!Ae(le.student_alternative_number))return void C("Alternative number must be exactly 10 digits");if(le.student_emergency_contact_number&&!Ae(le.student_emergency_contact_number))return void g("Emergency contact number must be exactly 10 digits");const e=null===T||void 0===T?void 0:T.user_id,t=o?`${xe}/student-details/update/${o}`:`${xe}/student-details/insert`,s=o?"PUT":"POST",a=new FormData;Object.keys(le).forEach((e=>{"employment_status_attachment"!==e&&null!==le[e]&&void 0!==le[e]&&a.append(e,le[e])})),le.employment_status_attachment&&a.append("employment_status_attachment",le.employment_status_attachment),o||a.append("user_id",e);try{const e=await fetch(t,{method:s,body:a});if(e.ok){const t=await e.json(),s={...t,employment_status_attachment:null,employment_status_attachment_name:t.employment_status_attachment_name||""};l(s),n()}else console.error("Failed to save data:",e.statusText),D("Failed to save data. Please try again.")}catch(r){console.error("Error saving student data:",r),D("An error occurred. Please try again."),n()}},Se=()=>{E(!1)},Ee="Islam"===le.student_religion?se:se.filter((e=>"Zakah"!==e));return(0,he.jsx)(O.Ay,{anchor:"right",open:t,onClose:n,children:(0,he.jsxs)(a.A,{sx:{width:W,height:"100%",display:"flex",flexDirection:"column",backgroundColor:d?"#2D3748":"#fff"},children:[(0,he.jsxs)(a.A,{sx:{padding:2,borderBottom:"1px solid #ccc",backgroundColor:d?"#1E293B":"#e1f5fe"},children:[(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:d?"#F7FAFC":"#1E293B"},children:"Student Details"}),P&&(0,he.jsx)(r.A,{variant:"body2",color:"error.main",sx:{mt:1},children:P})]}),(0,he.jsx)(a.A,{sx:{flex:1,overflowY:"auto",padding:2},children:M?(0,he.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,he.jsx)(v.A,{})}):(0,he.jsx)(f.Ay,{container:!0,spacing:2,children:Object.keys(le).map(((e,t)=>((e,t)=>{const n={backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"},"&& .MuiFormLabel-root":{color:d?"#F7FAFC":"#1E293B"}},s={style:{color:d?"#F7FAFC":"#1E293B"}};if(["relation_type","relation_hr_contact","relation_branch","relation_name","relation_surname","relation_employee_code","relation_reference"].includes(e)){if("Yes"!==le.student_willow_relationship)return null;if("relation_type"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:le[e]||"",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:ne,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Relationship Type",sx:n,InputLabelProps:s})})},t);if(!le.relation_type)return null;if("Staff"===le.relation_type||"Dependent of Staff"===le.relation_type){if(["relation_hr_contact","relation_branch","relation_name","relation_surname","relation_employee_code"].includes(e)){const a={relation_hr_contact:"HR Contact",relation_branch:"Branch",relation_name:"Name",relation_surname:"Surname",relation_employee_code:"Employee Code"};return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:a[e],name:e,fullWidth:!0,value:le[e]||"",onChange:Ce,sx:n,InputLabelProps:s})},t)}return null}if("Family"===le.relation_type)return"relation_name"===e?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Who are you related to",name:e,fullWidth:!0,value:le[e]||"",onChange:Ce,sx:n,InputLabelProps:s})},t):"relation_reference"===e?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"How are you related",name:e,fullWidth:!0,value:le[e]||"",onChange:Ce,sx:n,InputLabelProps:s})},t):null;if("Director/Board Member or stakeholder"===le.relation_type)return"relation_name"===e?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Please provide the person's name",name:e,fullWidth:!0,value:le[e]||"",onChange:Ce,sx:n,InputLabelProps:s})},t):null;if("Referral"===le.relation_type)return"relation_reference"===e?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Reference Relation",name:e,fullWidth:!0,value:le[e]||"",onChange:Ce,sx:n,InputLabelProps:s})},t):"relation_name"===e?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Please provide the person's name",name:e,fullWidth:!0,value:le[e]||"",onChange:Ce,sx:n,InputLabelProps:s})},t):null}if(["student_job_title","student_company_of_employment","student_current_salary"].includes(e)&&!["Full Time Employed","Part-Time Employed","Self Employed"].includes(le.student_employment_status))return null;if("student_date_of_birth"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(ce.$,{dateAdapter:ue.h,children:(0,he.jsx)(de.l,{wrapperClassName:"datepicker",className:"datepicker",label:"Student Date of Birth",name:"student_date_of_birth",value:c,onChange:be,format:"MM/dd/yyyy",sx:n,InputLabelProps:s})})},t);if("student_number_of_siblings"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Number of Siblings",name:"student_number_of_siblings",type:"number",fullWidth:!0,value:le.student_number_of_siblings||"",onChange:Ce,sx:n,InputLabelProps:s})},t);if("student_siblings_bursary"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:le[e]||"",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:Z,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Have any of your siblings received or are receiving assistance from this bursary fund?",sx:n,InputLabelProps:s})})},t);if("student_id_passport_number"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Student ID/Passport Number",name:"student_id_passport_number",type:"text",fullWidth:!0,value:le.student_id_passport_number||"",onChange:Ce,sx:n,InputLabelProps:s})},t);if("student_email_address"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Student Email Address",name:"student_email_address",type:"email",fullWidth:!0,value:le.student_email_address||"",onChange:Ce,error:!!p,helperText:p,sx:n,InputLabelProps:s})},t);if("student_whatsapp_number"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Student WhatsApp Number",name:"student_whatsapp_number",type:"tel",fullWidth:!0,value:le.student_whatsapp_number||"",onChange:Ce,error:!!x,helperText:x,inputProps:{maxLength:10,pattern:"[0-9]*"},sx:n,InputLabelProps:s})},t);if("student_alternative_number"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Student Alternative Number",name:"student_alternative_number",type:"tel",fullWidth:!0,value:le.student_alternative_number||"",onChange:Ce,error:!!A,helperText:A,inputProps:{maxLength:10,pattern:"[0-9]*"},sx:n,InputLabelProps:s})},t);if("student_emergency_contact_name"===e)return(0,he.jsxs)(f.Ay,{item:!0,xs:12,children:[(0,he.jsx)(N.A,{value:F,onChange:we,options:["Same as above","Add new"],renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Emergency Contact",sx:n,InputLabelProps:s})}),"Add new"===F&&(0,he.jsx)(b.A,{label:"Student Emergency Contact Name",name:"student_emergency_contact_name",fullWidth:!0,value:le.student_emergency_contact_name||"",onChange:Ce,sx:{...n,marginTop:2},InputLabelProps:s})]},t);if("student_emergency_contact_number"===e&&"Add new"===F)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Student Emergency Contact Number",name:"student_emergency_contact_number",type:"tel",fullWidth:!0,value:le.student_emergency_contact_number||"",onChange:Ce,error:!!j,helperText:j,inputProps:{maxLength:10,pattern:"[0-9]*"},sx:n,InputLabelProps:s})},t);if("student_emergency_contact_relationship"===e&&"Add new"===F)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Student Emergency Contact Relationship",name:"student_emergency_contact_relationship",fullWidth:!0,value:le.student_emergency_contact_relationship||"",onChange:Ce,sx:n,InputLabelProps:s})},t);if("student_emergency_contact_address"===e&&"Add new"===F)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Student Emergency Contact Address",name:"student_emergency_contact_address",fullWidth:!0,value:le.student_emergency_contact_address||"",onChange:Ce,sx:n,InputLabelProps:s})},t);if("student_status"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:le[e]||"Pending",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:ye,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Student Status",sx:n,InputLabelProps:s}),disabled:!R})},t);if("student_status_comment"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Status Comment",name:"student_status_comment",fullWidth:!0,multiline:!0,rows:4,value:le.student_status_comment||"",onChange:Ce,sx:n,InputLabelProps:s,disabled:!R})},t);if("student_willow_relationship"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:le[e]||"",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:Z,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Does the student have any relationship to the Willowton Group?",sx:n,InputLabelProps:s})})},t);if("student_nationality"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:le[e]||"",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:oe,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Student Nationality",sx:n,InputLabelProps:s})})},t);if("student_province"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:le[e]||"",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:K,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Student Province",sx:n,InputLabelProps:s})})},t);if("student_type"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:le[e]||"",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:re,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Student Type",sx:n,InputLabelProps:s})})},t);if("student_religion"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:le[e]||"",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:ae,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Student Religion",sx:n,InputLabelProps:s})})},t);if("student_finance_type"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:le[e]||"",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:Ee,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Student Finance Type",sx:n,InputLabelProps:s})})},t);if("student_race"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:le[e]||"",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:J,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Student Race",sx:n,InputLabelProps:s})})},t);if("student_marital_status"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:le[e]||"",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:X,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Student Marital Status",sx:n,InputLabelProps:s})})},t);if("student_employment_status"===e)return(0,he.jsxs)(f.Ay,{item:!0,xs:12,children:[(0,he.jsx)(N.A,{value:le[e]||"",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:ee,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Student Employment Status",sx:n,InputLabelProps:s})}),(0,he.jsx)(b.A,{label:"Employment Status Attachment Name",name:"employment_status_attachment_name",fullWidth:!0,disabled:!0,value:le.employment_status_attachment_name||"",sx:{...n,marginTop:2,"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:d?"#F7FAFC":"#1E293B"}},InputLabelProps:s}),(0,he.jsxs)(y.A,{variant:"outlined",component:"label",sx:{...n,width:"100%",marginTop:1,borderColor:d?"#F7FAFC":"#1E293B"},children:["Upload Employment Status Attachment",(0,he.jsx)("input",{type:"file",hidden:!0,onChange:je})]}),le.employment_status_attachment_name&&o&&(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(y.A,{variant:"text",color:"primary",onClick:ve,startIcon:(0,he.jsx)(G.A,{}),sx:{width:"100%",marginTop:1,color:d?"#F7FAFC":"#1E293B"},children:"View/Download Attachment"}),(0,he.jsx)(y.A,{variant:"outlined",color:"error",onClick:ge,startIcon:(0,he.jsx)(V.A,{}),sx:{width:"100%",marginTop:1,borderColor:d?"#F7FAFC":"#1E293B",color:"red"},children:"Delete Attachment"})]})]},t);if("student_highest_education"===e)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:le[e]||"",onChange:(t,n)=>Ce({target:{name:e,value:n}}),options:te,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Student Highest Education",sx:n,InputLabelProps:s})})},t);if("student_date_stamp"===e||"id"===e||"user_id"===e||"student_industry"===e||"employment_status_attachment"===e||"employment_status_attachment_name"===e)return null;let a=e.replace(/_/g," ").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:a,name:e,fullWidth:!0,value:le[e]||"",onChange:Ce,sx:n,InputLabelProps:s})},t)})(e,t)))})}),(0,he.jsx)(m.A,{}),(0,he.jsxs)(a.A,{sx:{padding:2,borderTop:"1px solid #ccc",display:"flex",justifyContent:"space-between"},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,he.jsx)(y.A,{onClick:n,variant:"outlined",size:"small",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:d?"#F7FAFC":"#1E293B"},startIcon:(0,he.jsx)(H.A,{}),disabled:M,children:"Close"}),o&&(0,he.jsx)(y.A,{onClick:()=>{E(!0)},variant:"outlined",size:"small",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:"red"},startIcon:(0,he.jsx)(V.A,{}),disabled:M,children:"Delete"})]}),(0,he.jsx)(a.A,{sx:{display:"flex",gap:1},children:o?(0,he.jsx)(y.A,{onClick:ke,variant:"contained",size:"small",color:"primary",startIcon:(0,he.jsx)(q.A,{}),disabled:M,children:M?(0,he.jsx)(v.A,{size:20}):"Save"}):(0,he.jsx)(y.A,{onClick:ke,variant:"contained",size:"small",color:"primary",startIcon:(0,he.jsx)(k.A,{}),disabled:M,children:M?(0,he.jsx)(v.A,{size:20}):"Create"})})]}),(0,he.jsxs)(z.A,{open:S,onClose:Se,children:[(0,he.jsx)(Q.A,{children:"Confirm Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete this record?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:Se,color:"primary",disabled:M,children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(o){L(!0);try{const e=await fetch(`${xe}/student-details/delete/${o}`,{method:"DELETE"});if(!e.ok)throw new Error(`Failed to delete student: ${e.statusText}`);i(o),n(),E(!1)}catch(e){console.error("Error deleting student:",e),D("Failed to delete student. Please try again.")}finally{L(!1)}}},color:"error",disabled:M,children:M?(0,he.jsx)(v.A,{size:20}):"Delete"})]})]}),(0,he.jsxs)(z.A,{open:I,onClose:Fe,children:[(0,he.jsx)(Q.A,{children:"Confirm Attachment Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete the employment status attachment?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:Fe,color:"primary",disabled:M,children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(o){L(!0);try{(await fetch(`${xe}/student-details/delete-attachment/${o}`,{method:"PUT"})).ok?(_e((e=>({...e,employment_status_attachment:null,employment_status_attachment_name:""}))),B(!1)):D("Failed to delete attachment. Please try again.")}catch(e){console.error("Error deleting attachment:",e),D("Error deleting attachment. Please try again.")}finally{L(!1)}}},color:"error",disabled:M,children:M?(0,he.jsx)(v.A,{size:20}):"Delete"})]})]})]})})},ye="https://willowtonbursary.co.za/api",fe=e=>{let{open:t,onClose:n,studentId:o,aboutMeId:l,onSave:i}=e;const{isDarkMode:d}=(0,s.useContext)(ie.D),[c,u]=(0,s.useState)(!1),[p,h]=(0,s.useState)({}),x=(0,$.A)("(min-width:600px)")?500:330;(0,s.useEffect)((()=>{if(t)if(l)fetch(`${ye}/about-me/id/${l}`).then((e=>e.json())).then((e=>{h(e)}));else{const e={student_details_portal_id:o};for(let t=1;t<=21;t++)e[`about_me_q${t.toString().padStart(2,"0")}`]="";h(e)}else h({})}),[t,o,l]);const _=e=>{const{name:t,value:n}=e.target;h((e=>({...e,[t]:n})))},A=()=>{u(!1)};return(0,he.jsxs)(O.Ay,{anchor:"right",open:t,onClose:n,children:[(0,he.jsxs)(a.A,{sx:{width:x,height:"100%",display:"flex",flexDirection:"column",backgroundColor:d?"#2D3748":"#fff"},children:[(0,he.jsx)(a.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:d?"#1E293B":"#e1f5fe"},children:(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:d?"#F7FAFC":"#1E293B"},children:"About Me"})}),(0,he.jsx)(a.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,he.jsx)(f.Ay,{container:!0,spacing:2,children:["What inspired you to pursue your chosen field of study?*","How do you plan to use your education and skills to make a significant impact in this field?*","What special projects or initiatives have you undertaken in your academic life?*","Can you tell me about any academic awards or scholarships you have received?*","Provide examples or specific skills you have developed that demonstrates your commitment.*","What extracurricular activities have you participated in, and how have they contributed to your personal and academic growth?*","Once you have completed your studies, how will others benefit from it?*","Can you describe any financial challenges you have faced that have affected your ability to pursue your education, and how these challenges have impacted your current financial situation?*","Have you previously been awarded a bursary?*","What do you think has been your most notable contribution to society thus far?*","Why do you think serving the community is important?*","Will you be doing any volunteer work during your studies?*","Are you willing to assist someone in need?*","Describe yourself in three words.*","What is your greatest strength?*","Describe your biggest mistake and what steps you have taken to rectify it.*","What personal achievement makes you proud?*","Are you self-motivated? Explain*","1st choice of study.*","2nd choice of study*","3rd choice of study.*"].map(((e,t)=>{const n=`about_me_q${(t+1).toString().padStart(2,"0")}`;return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:e,name:n,fullWidth:!0,multiline:!0,value:p[n]||"",onChange:_,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"},"& .MuiOutlinedInput-root":{borderRadius:"8px"},"& .MuiFormLabel-root":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})},n)}))})}),(0,he.jsx)(m.A,{}),(0,he.jsxs)(a.A,{sx:{p:2,borderTop:"1px solid #ccc",display:"flex",justifyContent:"space-between"},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,he.jsx)(y.A,{onClick:n,startIcon:(0,he.jsx)(H.A,{}),size:"small",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:d?"#F7FAFC":"#1E293B"},children:"Close"}),p.id&&(0,he.jsx)(y.A,{onClick:()=>{u(!0)},startIcon:(0,he.jsx)(V.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,he.jsx)(y.A,{onClick:async()=>{const e=!!p.id,t=e?`${ye}/about-me/update/${p.id}`:`${ye}/about-me/insert`,s=e?"PUT":"POST",a={...p};e||delete a.id;try{const e=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(e.ok){const t=await e.json();i(t),n()}else console.error("Failed to save About Me data")}catch(r){console.error("Error saving About Me data:",r)}},startIcon:p.id?(0,he.jsx)(q.A,{}):(0,he.jsx)(k.A,{}),variant:"contained",size:"small",children:p.id?"Save":"Create"})]})]}),(0,he.jsxs)(z.A,{open:c,onClose:A,children:[(0,he.jsx)(Q.A,{children:"Confirm Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete this entry?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:A,color:"primary",children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(p.id)try{(await fetch(`${ye}/about-me/delete/${p.id}`,{method:"DELETE"})).ok?(i(null),n(),u(!1)):console.error("Failed to delete About Me entry")}catch(e){console.error("Error deleting About Me entry:",e)}},color:"error",children:"Delete"})]})]})]})},Ae="https://willowtonbursary.co.za/api",be=e=>{let{open:t,onClose:n,studentId:o,parentId:l,onSave:i}=e;const{isDarkMode:d}=(0,s.useContext)(ie.D),[c,u]=(0,s.useState)({}),[p,h]=(0,s.useState)(!1),[x,_]=(0,s.useState)(""),[A,C]=(0,s.useState)(""),j=(0,$.A)("(min-width:600px)")?500:330,v=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),g=e=>/^\d{10}$/.test(e);(0,s.useEffect)((()=>{t?l?fetch(`${Ae}/parents-details/id/${l}`).then((e=>e.json())).then((e=>{u(e),e.parent_email_address?_(v(e.parent_email_address)?"":"Please enter a valid email address"):_(""),e.parent_cell_number?C(g(e.parent_cell_number)?"":"Cell number must be exactly 10 digits"):C("")})):(u({student_details_portal_id:o,parent_relationship:"",parent_name:"",parent_surname:"",parent_cell_number:"",parent_email_address:"",parent_employment_status:"",parent_industry:"",parent_highest_education:"",parent_salary:"",parent_grant:"",parent_other_income:""}),_(""),C("")):(u({}),_(""),C(""))}),[t,l,o]);const F=e=>{const{name:t,value:n}=e.target;if(u((e=>({...e,[t]:n}))),"parent_email_address"===t&&_(n&&!v(n)?"Please enter a valid email address":""),"parent_cell_number"===t){const e=n.replace(/\D/g,"").slice(0,10);u((n=>({...n,[t]:e}))),C(e&&!g(e)?"Cell number must be exactly 10 digits":"")}};return(0,he.jsx)(O.Ay,{anchor:"right",open:t,onClose:n,children:(0,he.jsxs)(a.A,{sx:{width:j,height:"100%",display:"flex",flexDirection:"column",backgroundColor:d?"#2D3748":"#fff"},children:[(0,he.jsx)(a.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:d?"#1E293B":"#e1f5fe"},children:(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:d?"#F7FAFC":"#1E293B"},children:"Parent Details"})}),(0,he.jsx)(a.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,he.jsx)(f.Ay,{container:!0,spacing:2,children:Object.entries(c).map((e=>{let[t,n]=e;if("id"===t||"student_details_portal_id"===t||"parent_date_stamp"===t)return null;let s=t.replace(/_/g," ");return s=s.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),"parent_relationship"===t?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:n||"",onChange:(e,n)=>F({target:{name:t,value:n}}),options:le,renderInput:e=>(0,he.jsx)(b.A,{...e,label:s,sx:{backgroundColor:d?"#1A202C":"#ffffff",borderRadius:"8px",color:d?"#F7FAFC":"#1E293B","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#ffffff":"#000000"}}})})},t):"parent_employment_status"===t?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:n||"",onChange:(e,n)=>F({target:{name:t,value:n}}),options:ee,renderInput:e=>(0,he.jsx)(b.A,{...e,label:s,sx:{backgroundColor:d?"#1A202C":"#ffffff",borderRadius:"8px",color:d?"#F7FAFC":"#1E293B","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#ffffff":"#000000"}}})})},t):"parent_highest_education"===t?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:n||"",onChange:(e,n)=>F({target:{name:t,value:n}}),options:te,renderInput:e=>(0,he.jsx)(b.A,{...e,label:s,sx:{backgroundColor:d?"#1A202C":"#ffffff",borderRadius:"8px",color:d?"#F7FAFC":"#1E293B","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#ffffff":"#000000"}}})})},t):"parent_email_address"===t?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{name:t,label:s,type:"email",fullWidth:!0,value:n||"",onChange:F,error:!!x,helperText:x,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#ffffff":"#000000"}}})},t):"parent_cell_number"===t?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{name:t,label:s,type:"tel",fullWidth:!0,value:n||"",onChange:F,error:!!A,helperText:A,inputProps:{maxLength:10,pattern:"[0-9]*"},sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#ffffff":"#000000"}}})},t):(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{name:t,label:s,fullWidth:!0,value:n||"",onChange:F,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#ffffff":"#000000"}}})},t)}))})}),(0,he.jsx)(m.A,{}),(0,he.jsxs)(a.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,he.jsx)(y.A,{onClick:n,startIcon:(0,he.jsx)(H.A,{}),size:"small",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:d?"#F7FAFC":"#1E293B"},children:"Close"}),c.id&&(0,he.jsx)(y.A,{onClick:()=>h(!0),startIcon:(0,he.jsx)(V.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,he.jsx)(y.A,{onClick:async()=>{if(c.parent_email_address&&!v(c.parent_email_address))return void _("Please enter a valid email address");if(c.parent_cell_number&&!g(c.parent_cell_number))return void C("Cell number must be exactly 10 digits");const e=!!c.id,t=e?`${Ae}/parents-details/update/${c.id}`:`${Ae}/parents-details/insert`,s=e?"PUT":"POST",a={...c};e||delete a.id;const r=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){const e=await r.json();i(e),n()}else console.error("Failed to save parent data")},startIcon:c.id?(0,he.jsx)(q.A,{}):(0,he.jsx)(k.A,{}),variant:"contained",size:"small",children:c.id?"Save":"Create"})]}),(0,he.jsxs)(z.A,{open:p,onClose:()=>h(!1),children:[(0,he.jsx)(Q.A,{children:"Confirm Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete this record?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:()=>h(!1),color:"primary",children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(!c.id)return;h(!1);(await fetch(`${Ae}/parents-details/delete/${c.id}`,{method:"DELETE"})).ok&&(i(null),n())},color:"error",children:"Delete"})]})]})]})})},Ce="https://willowtonbursary.co.za/api",je=e=>{let{open:t,onClose:n,studentId:o,universityDetailsId:l,onSave:i}=e;const{isDarkMode:d}=(0,s.useContext)(ie.D),c=(0,$.A)("(min-width:600px)")?500:330,[u,p]=(0,s.useState)(!1),[h,x]=(0,s.useState)({});(0,s.useEffect)((()=>{if(t)if(l)fetch(`${Ce}/university-details/id/${l}`).then((e=>e.json())).then((e=>{const t={...e};x(t)}));else{x({student_details_portal_id:o,Institution_name:"",name_of_Course:"",Intake_Year:"",Semester:"",NQF_Level:"",Current_Year:"",Student_Number:"",previously_funded:"",previously_funded_amount:"",tuition:"",tuition_amount:"",accommodation:"",accommodation_fee:"",textbooks:"",textbooks_fee:"",travel:"",travel_fee:"",total_university_expense:"",previous_bursary_org_1:"",previous_bursary_org_1_name:"",previous_bursary_org_1_amount:"",previous_bursary_org_1_contact:"",previous_bursary_org_2:"",previous_bursary_org_2_name:"",previous_bursary_org_2_amount:"",previous_bursary_org_2_contact:"",previous_bursary_org_3:"",previous_bursary_org_3_name:"",previous_bursary_org_3_amount:"",previous_bursary_org_3_contact:"",Application_Process_Status:""})}else x({})}),[t,o,l]),(0,s.useEffect)((()=>{const e=["tuition_amount","accommodation_fee","textbooks_fee","travel_fee"].reduce(((e,t)=>e+(parseFloat(h[t])||0)),0);h.total_university_expense!==e&&x((t=>({...t,total_university_expense:e})))}),[h.tuition_amount,h.accommodation_fee,h.textbooks_fee,h.travel_fee]);const _=e=>{const{name:t,value:n}=e.target;x((e=>({...e,[t]:n})))},A=(e,t)=>{x((n=>{const s={...n,[e]:t},a=v.find((t=>t.select===e));a&&"No"===t&&(s[a.amount]="");const r=g.find((t=>t.select===e));return r&&"Yes"!==t&&(s[r.name]="",s[r.amount]="",s[r.contact]=""),s}))},C=()=>{p(!1)},j=["Yes","No"],v=[{select:"previously_funded",amount:"previously_funded_amount"},{select:"tuition",amount:"tuition_amount"},{select:"accommodation",amount:"accommodation_fee"},{select:"textbooks",amount:"textbooks_fee"},{select:"travel",amount:"travel_fee"}],g=[{select:"previous_bursary_org_1",name:"previous_bursary_org_1_name",amount:"previous_bursary_org_1_amount",contact:"previous_bursary_org_1_contact"},{select:"previous_bursary_org_2",name:"previous_bursary_org_2_name",amount:"previous_bursary_org_2_amount",contact:"previous_bursary_org_2_contact"},{select:"previous_bursary_org_3",name:"previous_bursary_org_3_name",amount:"previous_bursary_org_3_amount",contact:"previous_bursary_org_3_contact"}],F={backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"},"& .MuiFormLabel-root":{color:d?"#F7FAFC":"#1E293B"}},w={style:{color:d?"#F7FAFC":"#1E293B"}};return(0,he.jsx)(O.Ay,{anchor:"right",open:t,onClose:n,children:(0,he.jsxs)(a.A,{sx:{width:c,height:"100%",display:"flex",flexDirection:"column",backgroundColor:d?"#2D3748":"#fff"},children:[(0,he.jsx)(a.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:d?"#1E293B":"#e1f5fe"},children:(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:d?"#F7FAFC":"#1E293B"},children:"University Details"})}),(0,he.jsx)(a.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,he.jsx)(f.Ay,{container:!0,spacing:2,children:Object.keys(h).map(((e,t)=>((e,t)=>{if("id"===e||"student_details_portal_id"===e||"university_details_date_stamp"===e)return null;let n=e.replace(/_/g," ");n=n.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");const s=v.some((t=>t.select===e)),a=v.some((t=>t.amount===e)),r=g.some((t=>t.select===e)),o=g.some((t=>t.name===e||t.amount===e||t.contact===e));if(s){let s=n;return"tuition"===e?s="Are you in need of financial assistance to cover your tuition fees?":"accommodation"===e?s="Are you in need of financial assistance to cover your accommodation fees?":"textbooks"===e?s="Are you in need of financial assistance to cover your textbooks fees?":"travel"===e?s="Are you in need of financial assistance to cover your travel fees?":"previously_funded"===e&&(s="Were you previously Funded by the Willowton SANZAF Bursary Fund?"),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:h[e]||"",onChange:(t,n)=>A(e,n),options:j,renderInput:e=>(0,he.jsx)(b.A,{...e,label:s,sx:F,InputLabelProps:w})})},t)}if(r)return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:h[e]||"",onChange:(t,n)=>A(e,n),options:j,renderInput:e=>(0,he.jsx)(b.A,{...e,label:"Were you funded by an organization previously?",sx:F,InputLabelProps:w})})},t);if(o){const t=g.find((t=>t.name===e||t.amount===e||t.contact===e));if("Yes"!==h[t.select])return null}if(a){const t=v.find((t=>t.amount===e)).select;if("Yes"!==h[t])return null}return"Semester"===e||"semester"===e?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:h[e]||"",onChange:(t,n)=>A(e,n),options:ne,renderInput:e=>(0,he.jsx)(b.A,{...e,label:n,sx:F,InputLabelProps:w})})},t):"NQF_Level"===e||"nqf_level"===e?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:h[e]||"",onChange:(t,n)=>A(e,n),options:te,renderInput:e=>(0,he.jsx)(b.A,{...e,label:n,sx:F,InputLabelProps:w})})},t):"total_university_expense"===e?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{name:e,label:n,fullWidth:!0,value:h[e]||"",sx:F,InputLabelProps:w,InputProps:{readOnly:!0}})},t):(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{name:e,label:n,fullWidth:!0,value:h[e]||"",onChange:_,sx:F,InputLabelProps:w})},t)})(e,t)))})}),(0,he.jsx)(m.A,{}),(0,he.jsxs)(a.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,he.jsx)(y.A,{onClick:n,startIcon:(0,he.jsx)(H.A,{}),size:"small",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:d?"#F7FAFC":"#1E293B"},children:"Close"}),h.id&&(0,he.jsx)(y.A,{onClick:()=>{p(!0)},startIcon:(0,he.jsx)(V.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,he.jsx)(y.A,{onClick:async()=>{const e=!!h.id,t=e?`${Ce}/university-details/update/${h.id}`:`${Ce}/university-details/insert`,s=e?"PUT":"POST",a={...h};e||delete a.id;const r=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){const e=await r.json();i(e),n()}else console.error("Failed to save University Details")},startIcon:h.id?(0,he.jsx)(q.A,{}):(0,he.jsx)(k.A,{}),variant:"contained",size:"small",children:h.id?"Save":"Create"})]}),(0,he.jsxs)(z.A,{open:u,onClose:C,children:[(0,he.jsx)(Q.A,{children:"Confirm Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete this record?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:C,color:"primary",children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(h.id)try{(await fetch(`${Ce}/university-details/delete/${h.id}`,{method:"DELETE"})).ok?(i(null),n(),p(!1)):console.error("Failed to delete University Details")}catch(e){console.error("Error deleting University Details",e)}},color:"error",children:"Delete"})]})]})]})})},ve="https://willowtonbursary.co.za/api",ge=e=>{let{open:t,onClose:n,studentId:o,attachmentId:l,onSave:i}=e;const{isDarkMode:d}=(0,s.useContext)(ie.D),[c,u]=(0,s.useState)({}),[p,h]=(0,s.useState)(!1),x=(0,$.A)("(min-width:600px)")?500:330;(0,s.useEffect)((()=>{t?l?fetch(`${ve}/attachments/id/${l}`).then((e=>e.json())).then((e=>{u({Attachments_Name:e.attachments_name||"",Attachments_Description:e.attachments_description||"",Attachment:null,id:e.id,Student_Details_Portal_id:e.student_details_portal_id||o})})):u({Attachments_Name:"",Attachments_Description:"",Attachment:null,Student_Details_Portal_id:o}):u({})}),[t,l,o]);const _=e=>{const{name:t,value:n}=e.target;u((e=>({...e,[t]:n})))},A=()=>{h(!1)};return(0,he.jsxs)(O.Ay,{anchor:"right",open:t,onClose:n,children:[(0,he.jsxs)(a.A,{sx:{width:x,height:"100%",display:"flex",flexDirection:"column",backgroundColor:d?"#2D3748":"#fff"},children:[(0,he.jsx)(a.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:d?"#1E293B":"#e1f5fe"},children:(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:d?"#F7FAFC":"#1E293B"},children:"Attachment Details"})}),(0,he.jsx)(a.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,he.jsxs)(f.Ay,{container:!0,spacing:2,children:[(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Description",name:"Attachments_Description",fullWidth:!0,value:c.Attachments_Description||"",onChange:_,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"},"& .MuiFormLabel-root":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Attachment Name",name:"Attachments_Name",fullWidth:!0,disabled:!0,value:c.Attachments_Name||"",onChange:_,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"},"& .MuiFormLabel-root":{color:d?"#F7FAFC":"#1E293B"},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:d?"white":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsxs)(y.A,{variant:"outlined",component:"label",sx:{width:"100%",borderColor:d?"#F7FAFC":"#1E293B"},children:["Upload File",(0,he.jsx)("input",{type:"file",hidden:!0,onChange:e=>{const t=e.target.files[0];if(t){const e=t.name;u((n=>({...n,Attachments_Name:e,Attachment:t})))}}})]})}),c.id&&(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(y.A,{variant:"text",color:"primary",onClick:()=>{c.id&&window.open(`${ve}/attachments/view/${c.id}`,"_blank")},startIcon:(0,he.jsx)(G.A,{}),sx:{width:"100%",color:d?"#F7FAFC":"#1E293B"},children:"View/Download File"})})]})}),(0,he.jsx)(m.A,{}),(0,he.jsxs)(a.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,he.jsx)(y.A,{onClick:n,startIcon:(0,he.jsx)(H.A,{}),size:"small",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:d?"#F7FAFC":"#1E293B"},children:"Close"}),c.id&&(0,he.jsx)(y.A,{onClick:()=>{h(!0)},startIcon:(0,he.jsx)(V.A,{}),color:"error",size:"small",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,he.jsx)(y.A,{onClick:async()=>{const e=!!c.id,t=e?`${ve}/attachments/update/${c.id}`:`${ve}/attachments/insert`,s=e?"PUT":"POST",a=new FormData;a.append("Attachments_Name",c.Attachments_Name),a.append("Attachments_Description",c.Attachments_Description),a.append("Student_Details_Portal_id",c.Student_Details_Portal_id),c.Attachment&&a.append("Attachment",c.Attachment);const r=await fetch(t,{method:s,body:a});if(r.ok){const e=await r.json();i(e),n()}else console.error("Failed to save attachment")},startIcon:c.id?(0,he.jsx)(q.A,{}):(0,he.jsx)(k.A,{}),variant:"contained",size:"small",children:c.id?"Save":"Create"})]})]}),(0,he.jsxs)(z.A,{open:p,onClose:A,children:[(0,he.jsx)(Q.A,{children:"Confirm Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete this record?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:A,color:"primary",children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(c.id)try{await fetch(`${ve}/attachments/delete/${c.id}`,{method:"DELETE"}),i(null),n(),h(!1)}catch(e){console.error("Failed to delete attachment",e)}},color:"error",children:"Delete"})]})]})]})},Fe="https://willowtonbursary.co.za/api",we=e=>{let{open:t,onClose:n,studentId:o,expenseDetailsId:l,onSave:i}=e;const{isDarkMode:d}=(0,s.useContext)(ie.D),c=(0,$.A)("(min-width:600px)")?500:330,[u,p]=(0,s.useState)({Father_Monthly_Salary:"",Mother_Monthly_Salary:"",Spouse_Monthly_Salary:"",Applicant_Monthly_Salary:"",Rent_Income:"",Grants:"",Other_Income:"",Rent_Bond_Expense:"",Rates_Expense:"",Utilities_Expense:"",Groceries_Expense:"",Transport_Petrol_Expense:"",Telephone_Expense:"",Medical_Aid_Expense:"",Insurance_Expense:"",Other_Expense:"",total_income:0,total_expenses:0}),[h,x]=(0,s.useState)(!1);(0,s.useEffect)((()=>{t&&l?fetch(`${Fe}/expense-details/id/${l}`).then((e=>e.json())).then((e=>{e&&p({Father_Monthly_Salary:e.father_monthly_salary||"",Mother_Monthly_Salary:e.mother_monthly_salary||"",Spouse_Monthly_Salary:e.spouse_monthly_salary||"",Applicant_Monthly_Salary:e.applicant_monthly_salary||"",Rent_Income:e.rent_income||"",Grants:e.grants||"",Other_Income:e.other_income||"",Rent_Bond_Expense:e.rent_bond_expense||"",Rates_Expense:e.rates_expense||"",Utilities_Expense:e.utilities_expense||"",Groceries_Expense:e.groceries_expense||"",Transport_Petrol_Expense:e.transport_petrol_expense||"",Telephone_Expense:e.telephone_expense||"",Medical_Aid_Expense:e.medical_aid_expense||"",Insurance_Expense:e.insurance_expense||"",Other_Expense:e.other_expense||"",total_income:Number(e.total_income)||0,total_expenses:Number(e.total_expenses)||0})})).catch((e=>console.error("Error fetching expense details:",e))):p({Father_Monthly_Salary:"",Mother_Monthly_Salary:"",Spouse_Monthly_Salary:"",Applicant_Monthly_Salary:"",Rent_Income:"",Grants:"",Other_Income:"",Rent_Bond_Expense:"",Rates_Expense:"",Utilities_Expense:"",Groceries_Expense:"",Transport_Petrol_Expense:"",Telephone_Expense:"",Medical_Aid_Expense:"",Insurance_Expense:"",Other_Expense:"",total_income:0,total_expenses:0})}),[t,l]);const _=e=>{const{name:t,value:n}=e.target;p((e=>{const s={...e,[t]:n},a=["Father_Monthly_Salary","Mother_Monthly_Salary","Spouse_Monthly_Salary","Applicant_Monthly_Salary","Rent_Income","Grants","Other_Income"].reduce(((e,t)=>e+(parseFloat(s[t])||0)),0),r=["Rent_Bond_Expense","Rates_Expense","Utilities_Expense","Groceries_Expense","Transport_Petrol_Expense","Telephone_Expense","Medical_Aid_Expense","Insurance_Expense","Other_Expense"].reduce(((e,t)=>e+(parseFloat(s[t])||0)),0);return s.total_income=a,s.total_expenses=r,s}))},A=()=>{x(!1)};return(0,he.jsxs)(O.Ay,{anchor:"right",open:t,onClose:n,children:[(0,he.jsxs)(a.A,{sx:{width:c,height:"100%",display:"flex",flexDirection:"column",backgroundColor:d?"#2D3748":"#fff"},children:[(0,he.jsx)(a.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:d?"#1E293B":"#e1f5fe"},children:(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:d?"#F7FAFC":"#1E293B"},children:"Financial Details"})}),(0,he.jsx)(a.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,he.jsxs)(f.Ay,{container:!0,spacing:2,children:[["Applicant_Monthly_Salary","Father_Monthly_Salary","Mother_Monthly_Salary","Spouse_Monthly_Salary","Rent_Income","Grants","Other_Income"].map(((e,t)=>{const n=e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()));return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:n,name:e,type:"number",value:u[e],onChange:_,fullWidth:!0,variant:"outlined",InputProps:{inputMode:"decimal"},sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})},t)})),["Rent_Bond_Expense","Rates_Expense","Utilities_Expense","Groceries_Expense","Transport_Petrol_Expense","Telephone_Expense","Medical_Aid_Expense","Insurance_Expense","Other_Expense"].map(((e,t)=>{const n=e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()));return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:n,name:e,type:"number",value:u[e],onChange:_,fullWidth:!0,variant:"outlined",InputProps:{inputMode:"decimal"},sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})},t)})),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Total Income",value:u.total_income.toFixed(2),fullWidth:!0,variant:"outlined",sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputProps:{readOnly:!0},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Total Expenses",value:u.total_expenses.toFixed(2),fullWidth:!0,variant:"outlined",sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputProps:{readOnly:!0},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})})]})}),(0,he.jsx)(m.A,{}),(0,he.jsxs)(a.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,he.jsx)(y.A,{onClick:n,startIcon:(0,he.jsx)(H.A,{}),size:"small",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:d?"#F7FAFC":"#1E293B"},children:"Close"}),l&&(0,he.jsx)(y.A,{onClick:()=>{x(!0)},startIcon:(0,he.jsx)(V.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,he.jsx)(y.A,{onClick:()=>{const e=Object.keys(u).filter((e=>e.includes("Salary")||e.includes("Income"))).reduce(((e,t)=>e+(parseFloat(u[t])||0)),0),t=Object.keys(u).filter((e=>e.includes("Expense"))).reduce(((e,t)=>e+(parseFloat(u[t])||0)),0),s={...u,total_income:e.toString(),total_expenses:t.toString()},a=Object.keys(s).reduce(((e,t)=>{const n=s[t];return e[t]=""!==n?n.toString():n,e}),{});fetch(l?`${Fe}/expense-details/update/${l}`:`${Fe}/expense-details/insert`,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,student_details_portal_id:o})}).then((e=>e.json())).then((e=>{i(e),n()})).catch((e=>{console.error("Error saving expense details:",e)}))},startIcon:l?(0,he.jsx)(q.A,{}):(0,he.jsx)(k.A,{}),variant:"contained",size:"small",children:l?"Save":"Create"})]})]}),(0,he.jsxs)(z.A,{open:h,onClose:A,children:[(0,he.jsx)(Q.A,{children:"Confirm Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete this record?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:A,color:"primary",children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(l)try{await fetch(`${Fe}/expense-details/delete/${l}`,{method:"DELETE"}),i(null),n(),x(!1)}catch(e){console.error("Error deleting expense details:",e)}},color:"error",children:"Delete"})]})]})]})},ke="https://willowtonbursary.co.za/api",Se=e=>{let{open:t,onClose:n,studentId:o,assetLiabilityId:l,onSave:i}=e;const{isDarkMode:d}=(0,s.useContext)(ie.D),c=(0,$.A)("(min-width:600px)")?500:330,[u,p]=(0,s.useState)({Gold_Silver:"",Cash_in_Bank:"",Investments:"",Liabilities:""}),[h,x]=(0,s.useState)(!1);(0,s.useEffect)((()=>{t&&l?fetch(`${ke}/assets-liabilities/id/${l}`).then((e=>e.json())).then((e=>{e&&p({Gold_Silver:e.gold_silver||"",Cash_in_Bank:e.cash_in_bank||"",Investments:e.investments||"",Liabilities:e.liabilities||""})})).catch(console.error):p({Gold_Silver:"",Cash_in_Bank:"",Investments:"",Liabilities:""})}),[t,l]);const _=e=>{const{name:t,value:n}=e.target;p((e=>({...e,[t]:n})))},A=()=>{x(!1)};return(0,he.jsxs)(O.Ay,{anchor:"right",open:t,onClose:n,children:[(0,he.jsxs)(a.A,{sx:{width:c,height:"100%",display:"flex",flexDirection:"column",backgroundColor:d?"#2D3748":"#fff"},children:[(0,he.jsx)(a.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:d?"#1E293B":"#e1f5fe"},children:(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:d?"#F7FAFC":"#1E293B"},children:"Assets & Liabilities"})}),(0,he.jsx)(a.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,he.jsx)(f.Ay,{container:!0,spacing:2,children:Object.keys(u).map(((e,t)=>{const n=e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()));return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:n,name:e,value:u[e],onChange:_,fullWidth:!0,type:"number",variant:"outlined",InputProps:{inputMode:"decimal"},sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})},t)}))})}),(0,he.jsx)(m.A,{}),(0,he.jsxs)(a.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,he.jsx)(y.A,{onClick:n,startIcon:(0,he.jsx)(H.A,{}),size:"small",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:d?"#F7FAFC":"#1E293B"},children:"Close"}),l&&(0,he.jsx)(y.A,{onClick:()=>{x(!0)},startIcon:(0,he.jsx)(V.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,he.jsx)(y.A,{onClick:()=>{fetch(l?`${ke}/assets-liabilities/update/${l}`:`${ke}/assets-liabilities/insert`,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,student_details_portal_id:o})}).then((e=>e.json())).then((e=>{i(e),n()})).catch(console.error)},startIcon:l?(0,he.jsx)(q.A,{}):(0,he.jsx)(k.A,{}),variant:"contained",size:"small",children:l?"Save":"Create"})]})]}),(0,he.jsxs)(z.A,{open:h,onClose:A,children:[(0,he.jsx)(Q.A,{children:"Confirm Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete this record?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:A,color:"primary",children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(l)try{await fetch(`${ke}/assets-liabilities/delete/${l}`,{method:"DELETE"}),i(null),n(),x(!1)}catch(e){console.error("Error deleting asset/liability:",e)}},color:"error",children:"Delete"})]})]})]})},Ee="https://willowtonbursary.co.za/api",Ie=e=>{let{open:t,onClose:n,studentId:o,resultId:l,onSave:i}=e;const{isDarkMode:d}=(0,s.useContext)(ie.D),[c,u]=(0,s.useState)({}),[p,h]=(0,s.useState)(!1),x=(0,$.A)("(min-width:600px)")?500:330;(0,s.useEffect)((()=>{t?l?fetch(`${Ee}/academic-results/id/${l}`).then((e=>e.json())).then((e=>{u({Results_Module:e.results_module||"",Results_Percentage:e.results_percentage||"",Results_Attachment:null,Results_Attachment_Name:e.results_attachment_name||"",id:e.id,Student_Details_Portal_id:e.student_details_portal_id||o})})):u({Results_Module:"",Results_Percentage:"",Results_Attachment:null,Results_Attachment_Name:"",Student_Details_Portal_id:o}):u({})}),[t,l,o]);const _=e=>{const{name:t,value:n}=e.target;u((e=>({...e,[t]:n})))},A=()=>{h(!1)};return(0,he.jsxs)(O.Ay,{anchor:"right",open:t,onClose:n,children:[(0,he.jsxs)(a.A,{sx:{width:x,height:"100%",display:"flex",flexDirection:"column",backgroundColor:d?"#2D3748":"#fff"},children:[(0,he.jsx)(a.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:d?"#1E293B":"#e1f5fe"},children:(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:d?"#F7FAFC":"#1E293B"},children:"Academic Result Details"})}),(0,he.jsx)(a.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,he.jsxs)(f.Ay,{container:!0,spacing:2,children:[(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Module Name",name:"Results_Module",fullWidth:!0,value:c.Results_Module||"",onChange:_,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Percentage",name:"Results_Percentage",fullWidth:!0,value:c.Results_Percentage||"",onChange:_,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Attachment Name",name:"Results_Attachment_Name",fullWidth:!0,value:c.Results_Attachment_Name||"",onChange:_,disabled:!0,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:d?"white":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsxs)(y.A,{variant:"outlined",component:"label",sx:{width:"100%"},children:["Upload File",(0,he.jsx)("input",{type:"file",hidden:!0,onChange:e=>{const t=e.target.files[0];t&&u((e=>({...e,Results_Attachment:t,Results_Attachment_Name:t.name})))}})]})}),c.id&&c.Results_Attachment_Name&&(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(y.A,{variant:"text",color:"primary",onClick:()=>{c.id&&window.open(`${Ee}/academic-results/view/${c.id}`,"_blank")},startIcon:(0,he.jsx)(G.A,{}),sx:{width:"100%"},children:"View/Download File"})})]})}),(0,he.jsx)(m.A,{}),(0,he.jsxs)(a.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,he.jsx)(y.A,{onClick:n,startIcon:(0,he.jsx)(H.A,{}),size:"small",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:d?"#F7FAFC":"#1E293B"},children:"Close"}),c.id&&(0,he.jsx)(y.A,{onClick:()=>{h(!0)},startIcon:(0,he.jsx)(V.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,he.jsx)(y.A,{onClick:async()=>{const e=!!c.id,t=e?`${Ee}/academic-results/update/${c.id}`:`${Ee}/academic-results/insert`,s=e?"PUT":"POST",a=new FormData;a.append("Results_Module",c.Results_Module),a.append("Results_Percentage",c.Results_Percentage),a.append("Student_Details_Portal_id",c.Student_Details_Portal_id),c.Results_Attachment&&a.append("Results_Attachment",c.Results_Attachment);const r=await fetch(t,{method:s,body:a});if(r.ok){const e=await r.json();i(e),n()}else console.error("Failed to save academic result")},startIcon:c.id?(0,he.jsx)(q.A,{}):(0,he.jsx)(k.A,{}),variant:"contained",size:"small",children:c.id?"Save":"Create"})]})]}),(0,he.jsxs)(z.A,{open:p,onClose:A,children:[(0,he.jsx)(Q.A,{children:"Confirm Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete this record?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:A,color:"primary",children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(c.id)try{await fetch(`${Ee}/academic-results/delete/${c.id}`,{method:"DELETE"}),i(null),n(),h(!1)}catch(e){console.error("Failed to delete academic result",e)}},color:"error",children:"Delete"})]})]})]})},Be="https://willowtonbursary.co.za/api",Pe=e=>{let{open:t,onClose:n,studentId:o,recordId:l,onSave:i}=e;const{isDarkMode:d}=(0,s.useContext)(ie.D),[c,u]=(0,s.useState)({}),[p,h]=(0,s.useState)(!1),x=(0,$.A)("(min-width:600px)")?500:330;(0,s.useEffect)((()=>{t&&(l?fetch(`${Be}/voluntary-service/id/${l}`).then((e=>e.json())).then((e=>{u({Organisation:e.organisation||"",Contact_Person:e.contact_person||"",Contact_Person_Number:e.contact_person_number||"",Hours_Contributed:e.hours_contributed||"",Proof_of_Service:null,Service_Attachment_Name:e.service_attachment_name||"",id:e.id,Student_Details_Portal_id:e.student_details_portal_id||o})})):u({Organisation:"",Contact_Person:"",Contact_Person_Number:"",Hours_Contributed:"",Proof_of_Service:null,Service_Attachment_Name:"",Student_Details_Portal_id:o}))}),[t,l,o]);const _=e=>{const{name:t,value:n}=e.target;u((e=>({...e,[t]:n})))},A=()=>{h(!1)};return(0,he.jsxs)(O.Ay,{anchor:"right",open:t,onClose:n,children:[(0,he.jsxs)(a.A,{sx:{width:x,height:"100%",display:"flex",flexDirection:"column",backgroundColor:d?"#2D3748":"#fff"},children:[(0,he.jsx)(a.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:d?"#1E293B":"#e1f5fe"},children:(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:d?"#F7FAFC":"#1E293B"},children:"Voluntary Service"})}),(0,he.jsx)(a.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,he.jsxs)(f.Ay,{container:!0,spacing:2,children:[(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Organisation",name:"Organisation",fullWidth:!0,value:c.Organisation||"",onChange:_,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Contact Person",name:"Contact_Person",fullWidth:!0,value:c.Contact_Person||"",onChange:_,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Contact Number",name:"Contact_Person_Number",fullWidth:!0,value:c.Contact_Person_Number||"",onChange:_,inputProps:{type:"tel",maxLength:10,pattern:"[0-9]{10}"},sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Hours Contributed",name:"Hours_Contributed",fullWidth:!0,value:c.Hours_Contributed||"",onChange:_,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Attachment Name",name:"Service_Attachment_Name",fullWidth:!0,value:c.Service_Attachment_Name||"",onChange:_,disabled:!0,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:d?"white":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsxs)(y.A,{variant:"outlined",component:"label",sx:{width:"100%"},children:["Upload Proof",(0,he.jsx)("input",{type:"file",hidden:!0,onChange:e=>{const t=e.target.files[0];t&&u((e=>({...e,Proof_of_Service:t,Service_Attachment_Name:t.name})))}})]})}),c.id&&c.Service_Attachment_Name&&(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(y.A,{variant:"text",color:"primary",onClick:()=>{c.id&&window.open(`${Be}/voluntary-service/view/${c.id}`,"_blank")},startIcon:(0,he.jsx)(G.A,{}),sx:{width:"100%"},children:"View/Download File"})})]})}),(0,he.jsx)(m.A,{}),(0,he.jsxs)(a.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,he.jsx)(y.A,{onClick:n,startIcon:(0,he.jsx)(H.A,{}),size:"small",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:d?"#F7FAFC":"#1E293B"},children:"Close"}),c.id&&(0,he.jsx)(y.A,{onClick:()=>{h(!0)},startIcon:(0,he.jsx)(V.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,he.jsx)(y.A,{onClick:async()=>{const e=!!c.id,t=e?`${Be}/voluntary-service/update/${c.id}`:`${Be}/voluntary-service/insert`,s=e?"PUT":"POST",a=new FormData;a.append("Organisation",c.Organisation),a.append("Contact_Person",c.Contact_Person),a.append("Contact_Person_Number",c.Contact_Person_Number),a.append("Hours_Contributed",c.Hours_Contributed),a.append("Student_Details_Portal_id",c.Student_Details_Portal_id),c.Proof_of_Service&&a.append("Proof_of_Service",c.Proof_of_Service);const r=await fetch(t,{method:s,body:a});if(r.ok){const e=await r.json();i(e),n()}else console.error("Failed to save voluntary service")},startIcon:c.id?(0,he.jsx)(q.A,{}):(0,he.jsx)(k.A,{}),variant:"contained",size:"small",children:c.id?"Save":"Create"})]})]}),(0,he.jsxs)(z.A,{open:p,onClose:A,children:[(0,he.jsx)(Q.A,{children:"Confirm Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete this record?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:A,color:"primary",children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(c.id)try{await fetch(`${Be}/voluntary-service/delete/${c.id}`,{method:"DELETE"}),i(null),n(),h(!1)}catch(e){console.error("Failed to delete voluntary service",e)}},color:"error",children:"Delete"})]})]})]})},De="https://willowtonbursary.co.za/api",Me=e=>{let{open:t,onClose:n,studentId:o,recordId:l,onSave:i}=e;const{isDarkMode:d}=(0,s.useContext)(ie.D),[c,u]=(0,s.useState)({}),[p,h]=(0,s.useState)(!1),[x,_]=(0,s.useState)(null),A=(0,$.A)("(min-width:600px)")?500:330,C=JSON.parse(localStorage.getItem("user")),j=`${null===C||void 0===C?void 0:C.first_name} ${null===C||void 0===C?void 0:C.last_name}`;(0,s.useEffect)((()=>{t&&(l?fetch(`${De}/payments/id/${l}`).then((e=>e.json())).then((e=>{const t=e.payments_date?(0,pe.A)(e.payments_date,"MM/dd/yyyy",new Date):null;_(t),u({Payments_Expense_Type:e.payments_expense_type||"",Payments_Vendor:e.payments_vendor||"",Payments_Expense_Amount:e.payments_expense_amount||"",Payments_Date:e.payments_date||"",Payments_ET_Number:e.payments_et_number||"",Payments_Attachment_Name:e.payments_attachment_name||"",Proof_of_Payment:null,Payment_Created_By:e.payment_created_by||j,id:e.id,Student_Details_Portal_id:e.student_details_portal_id||o})})):(u({Payments_Expense_Type:"",Payments_Vendor:"",Payments_Expense_Amount:"",Payments_Date:"",Payments_ET_Number:"",Payments_Attachment_Name:"",Proof_of_Payment:null,Payment_Created_By:j,Student_Details_Portal_id:o}),_(null)))}),[t,l,o,j]);const v=e=>{const{name:t,value:n}=e.target;u((e=>({...e,[t]:n})))},g=()=>{h(!1)};return(0,he.jsx)(O.Ay,{anchor:"right",open:t,onClose:n,children:(0,he.jsxs)(a.A,{sx:{width:A,height:"100%",display:"flex",flexDirection:"column",backgroundColor:d?"#2D3748":"#fff"},children:[(0,he.jsx)(a.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:d?"#1E293B":"#e1f5fe"},children:(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:d?"#F7FAFC":"#1E293B"},children:"Payment Details"})}),(0,he.jsx)(a.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,he.jsxs)(f.Ay,{container:!0,spacing:2,children:[(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Expense Type",name:"Payments_Expense_Type",fullWidth:!0,value:c.Payments_Expense_Type||"",onChange:v,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Vendor",name:"Payments_Vendor",fullWidth:!0,value:c.Payments_Vendor||"",onChange:v,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Amount",name:"Payments_Expense_Amount",fullWidth:!0,value:c.Payments_Expense_Amount||"",onChange:v,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(ce.$,{dateAdapter:ue.h,children:(0,he.jsx)(de.l,{wrapperClassName:"datepicker",className:"datepicker",label:"Payments Date",value:x,onChange:e=>{_(e);const t=e?(0,me.A)(e,"MM/dd/yyyy"):"";u((e=>({...e,Payments_Date:t})))},format:"MM/dd/yyyy"})})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"ET Number",name:"Payments_ET_Number",fullWidth:!0,value:c.Payments_ET_Number||"",onChange:v,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Attachment Name",name:"Payments_Attachment_Name",fullWidth:!0,value:c.Payments_Attachment_Name||"",disabled:!0,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:d?"white":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsxs)(y.A,{variant:"outlined",component:"label",sx:{width:"100%"},children:["Upload Proof",(0,he.jsx)("input",{type:"file",hidden:!0,onChange:e=>{const t=e.target.files[0];t&&u((e=>({...e,Proof_of_Payment:t,Payments_Attachment_Name:t.name})))}})]})}),c.id&&c.Payments_Attachment_Name&&(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(y.A,{variant:"text",color:"primary",onClick:()=>{c.id&&window.open(`${De}/payments/view/${c.id}`,"_blank")},startIcon:(0,he.jsx)(G.A,{}),sx:{width:"100%"},children:"View/Download File"})})]})}),(0,he.jsx)(m.A,{}),(0,he.jsxs)(a.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,he.jsx)(y.A,{onClick:n,startIcon:(0,he.jsx)(H.A,{}),size:"small",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:d?"#F7FAFC":"#1E293B"},children:"Close"}),c.id&&(0,he.jsx)(y.A,{onClick:()=>{h(!0)},startIcon:(0,he.jsx)(V.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,he.jsx)(y.A,{onClick:async()=>{const e=!!c.id,t=e?`${De}/payments/update/${c.id}`:`${De}/payments/insert`,s=e?"PUT":"POST",a=new FormData;a.append("Payments_Expense_Type",c.Payments_Expense_Type),a.append("Payments_Vendor",c.Payments_Vendor),a.append("Payments_Expense_Amount",c.Payments_Expense_Amount),a.append("Payments_Date",c.Payments_Date),a.append("Payments_ET_Number",c.Payments_ET_Number),a.append("Payments_Attachment_Name",c.Payments_Attachment_Name),a.append("Payment_Created_By",c.Payment_Created_By),a.append("Student_Details_Portal_id",c.Student_Details_Portal_id),c.Proof_of_Payment&&a.append("Proof_of_Payment",c.Proof_of_Payment);const r=await fetch(t,{method:s,body:a});if(r.ok){const e=await r.json();i(e),n()}else console.error("Failed to save payment")},startIcon:c.id?(0,he.jsx)(q.A,{}):(0,he.jsx)(k.A,{}),variant:"contained",size:"small",children:c.id?"Save":"Create"})]}),(0,he.jsxs)(z.A,{open:p,onClose:g,children:[(0,he.jsx)(Q.A,{children:"Confirm Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete this record?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:g,color:"primary",children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(c.id)try{await fetch(`${De}/payments/delete/${c.id}`,{method:"DELETE"}),i(null),n(),h(!1)}catch(e){console.error("Failed to delete payment",e)}},color:"error",children:"Delete"})]})]})]})})},Le="https://willowtonbursary.co.za/api",We=e=>{let{open:t,onClose:n,studentId:o,recordId:l,onSave:i}=e;const{isDarkMode:d}=(0,s.useContext)(ie.D),[c,u]=(0,s.useState)({}),[p,h]=(0,s.useState)(!1),x=(0,$.A)("(min-width:600px)")?500:330,_=JSON.parse(localStorage.getItem("user")),A=`${null===_||void 0===_?void 0:_.first_name} ${null===_||void 0===_?void 0:_.last_name}`;(0,s.useEffect)((()=>{t&&(l?fetch(`${Le}/interviews/id/${l}`).then((e=>e.json())).then((e=>{u({Interviewer_Name:e.interviewer_name||"",Year_of_Interview:e.year_of_interview||"",Interview_Q01:e.interview_q01||"",Interview_Q02:e.interview_q02||"",Interview_Q03:e.interview_q03||"",Interview_Q04:e.interview_q04||"",Interview_Q05:e.interview_q05||"",Interview_Q06:e.interview_q06||"",Interview_Q07:e.interview_q07||"",Interview_Q08:e.interview_q08||"",Interview_Q09:e.interview_q09||"",Interview_Q10:e.interview_q10||"",Interview_Q11:e.interview_q11||"",Interview_Q12:e.interview_q12||"",Interview_Q13:e.interview_q13||"",Interview_Q14:e.interview_q14||"",Interview_Q15:e.interview_q15||"",Interview_Q16:e.interview_q16||"",Interview_Q17:e.interview_q17||"",Interview_Q18:e.interview_q18||"",Interview_Q19:e.interview_q19||"",Interview_Q20:e.interview_q20||"",Interview_Q21:e.interview_q21||"",Interview_Q22:e.interview_q22||"",Interview_Q23:e.interview_q23||"",Interview_Q24:e.interview_q24||"",Interview_Created_By:e.interview_created_by||A,Date_Stamp:e.date_stamp||"",id:e.id,Student_Details_Portal_id:e.student_details_portal_id||o})})):u({Interviewer_Name:"",Year_of_Interview:"",Interview_Q01:"",Interview_Q02:"",Interview_Q03:"",Interview_Q04:"",Interview_Q05:"",Interview_Q06:"",Interview_Q07:"",Interview_Q08:"",Interview_Q09:"",Interview_Q10:"",Interview_Q11:"",Interview_Q12:"",Interview_Q13:"",Interview_Q14:"",Interview_Q15:"",Interview_Q16:"",Interview_Q17:"",Interview_Q18:"",Interview_Q19:"",Interview_Q20:"",Interview_Q21:"",Interview_Q22:"",Interview_Q23:"",Interview_Q24:"",Interview_Created_By:A,Date_Stamp:"",Student_Details_Portal_id:o}))}),[t,l,o,A]);const C=e=>{const{name:t,value:n}=e.target;u((e=>({...e,[t]:n})))},j=()=>{h(!1)};return(0,he.jsxs)(O.Ay,{anchor:"right",open:t,onClose:n,children:[(0,he.jsxs)(a.A,{sx:{width:x,height:"100%",display:"flex",flexDirection:"column",backgroundColor:d?"#2D3748":"#fff"},children:[(0,he.jsx)(a.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:d?"#1E293B":"#e1f5fe"},children:(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:d?"#F7FAFC":"#1E293B"},children:"Interview Details"})}),(0,he.jsx)(a.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,he.jsxs)(f.Ay,{container:!0,spacing:2,children:[(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Interviewer Name",name:"Interviewer_Name",fullWidth:!0,value:c.Interviewer_Name||"",onChange:C,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:"Year of Interview",name:"Year_of_Interview",fullWidth:!0,value:c.Year_of_Interview||"",onChange:C,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})}),["Briefly describe the applicant's family & social financial conditions?","Employment Status Score","Year of Study","Degree/Diploma Name","Number of Years to Qualify","Reason for Choosing the Course","Field of Study Score","APS Score (Matric) or University Average","Number of Failed Modules","Academic Results Score","Have you worked on any special projects or initiatives?","What extracurricular activities have you participated in?","How do you plan to contribute to your community post-graduation?","How would you inspire others to make an impact?","Community Work Involvement Score","How will you use your education and skills to make an impact?","Can you share academic awards or scholarships received?","Describe a role model and why they inspire you?","Why do you believe you deserve this bursary?","If not awarded this bursary, what are your plans?","Motivation Score","Total Score","Comments Section","Overall Impression"].map(((e,t)=>{const n=(t+1).toString().padStart(2,"0");return(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{label:e,name:`Interview_Q${n}`,fullWidth:!0,value:c[`Interview_Q${n}`]||"",onChange:C,sx:{backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"}},InputLabelProps:{style:{color:d?"#F7FAFC":"#1E293B"}}})},t)}))]})}),(0,he.jsx)(m.A,{}),(0,he.jsxs)(a.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,he.jsx)(y.A,{onClick:n,startIcon:(0,he.jsx)(H.A,{}),size:"small",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:d?"#F7FAFC":"#1E293B"},children:"Close"}),c.id&&(0,he.jsx)(y.A,{onClick:()=>{h(!0)},startIcon:(0,he.jsx)(V.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),(0,he.jsx)(y.A,{onClick:async()=>{const e=!!c.id,t=e?`${Le}/interviews/update/${c.id}`:`${Le}/interviews/insert`,s=e?"PUT":"POST",a=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(a.ok){const e=await a.json();i(e),n()}else console.error("Failed to save interview")},startIcon:c.id?(0,he.jsx)(q.A,{}):(0,he.jsx)(k.A,{}),variant:"contained",size:"small",children:c.id?"Save":"Create"})]})]}),(0,he.jsxs)(z.A,{open:p,onClose:j,children:[(0,he.jsx)(Q.A,{children:"Confirm Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete this record?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:j,color:"primary",children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(c.id)try{await fetch(`${Le}/interviews/delete/${c.id}`,{method:"DELETE"}),i(null),n(),h(!1)}catch(e){console.error("Failed to delete interview",e)}},color:"error",children:"Delete"})]})]})]})},Te="https://willowtonbursary.co.za/api",$e=e=>{let{open:t,onClose:n,studentId:o,taskId:l,onSave:i}=e;const{isDarkMode:d}=(0,s.useContext)(ie.D),c=(0,$.A)("(min-width:600px)")?500:330,u=(0,s.useMemo)((()=>JSON.parse(localStorage.getItem("user"))),[]),p="admin"===(null===u||void 0===u?void 0:u.user_type),h="student"===(null===u||void 0===u?void 0:u.user_type),[x,_]=(0,s.useState)(!1),[A,C]=(0,s.useState)({});(0,s.useEffect)((()=>{if(t)if(l)fetch(`${Te}/tasks/id/${l}`).then((e=>e.json())).then((e=>{C(e)}));else{const e={student_details_portal_id:o,created_by:p&&(null===u||void 0===u?void 0:u.first_name)||"",task_description:"",task_status:"",task_comment:""};C(e)}else C({})}),[t,o,l,p,u]);const j=e=>{const{name:t,value:n}=e.target;C((e=>({...e,[t]:n})))},v=()=>{_(!1)},g={backgroundColor:d?"#1A202C":"#ffffff",color:d?"#F7FAFC":"#1E293B",borderRadius:"8px","& .MuiInputBase-input":{color:d?"#F7FAFC":"#1E293B"},"& .MuiFormLabel-root":{color:d?"#F7FAFC":"#1E293B"}},F={style:{color:d?"#F7FAFC":"#1E293B"}},w=["Pending","Completed"],S=(e,t)=>{if("id"===e||"student_details_portal_id"===e||"task_date_stamp"===e||"created_by"===e)return null;let n=e.replace(/_/g," ");return n=n.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),"task_status"===e&&p?(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(N.A,{value:A[e]||"",onChange:(t,n)=>{return s=e,a=n,void C((e=>({...e,[s]:a})));var s,a},options:w,renderInput:t=>(0,he.jsx)(b.A,{...t,label:n,name:e,sx:g,InputLabelProps:F})})},t):(0,he.jsx)(f.Ay,{item:!0,xs:12,children:(0,he.jsx)(b.A,{name:e,label:n,fullWidth:!0,value:A[e]||"",onChange:j,sx:g,InputLabelProps:F,disabled:h||"task_status"===e&&!p,InputProps:{readOnly:"task_status"===e&&!p}})},t)};return(0,he.jsx)(O.Ay,{anchor:"right",open:t,onClose:n,children:(0,he.jsxs)(a.A,{sx:{width:c,height:"100%",display:"flex",flexDirection:"column",backgroundColor:d?"#2D3748":"#fff"},children:[(0,he.jsx)(a.A,{sx:{p:2,borderBottom:"1px solid #ccc",backgroundColor:d?"#1E293B":"#e1f5fe"},children:(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:d?"#F7FAFC":"#1E293B"},children:"Task Details"})}),(0,he.jsx)(a.A,{sx:{flex:1,overflowY:"auto",p:2},children:(0,he.jsx)(f.Ay,{container:!0,spacing:2,children:["task_description","task_status","task_comment"].map(((e,t)=>S(e,t)))})}),(0,he.jsx)(m.A,{}),(0,he.jsxs)(a.A,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,he.jsx)(y.A,{onClick:n,startIcon:(0,he.jsx)(H.A,{}),size:"small",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:d?"#F7FAFC":"#1E293B"},children:"Close"}),A.id&&p&&(0,he.jsx)(y.A,{onClick:()=>{_(!0)},startIcon:(0,he.jsx)(V.A,{}),size:"small",color:"error",variant:"outlined",sx:{borderColor:d?"#F7FAFC":"#1E293B",color:"red"},children:"Delete"})]}),p&&(0,he.jsx)(y.A,{onClick:async()=>{if(!p)return;const e=!!A.id,t=e?`${Te}/tasks/update/${A.id}`:`${Te}/tasks/insert`,s=e?"PUT":"POST",a={...A};e||delete a.id;try{const e=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(e.ok){const t=await e.json();i(t),n()}else console.error("Failed to save Task Details")}catch(r){console.error("Error saving Task Details",r)}},startIcon:A.id?(0,he.jsx)(q.A,{}):(0,he.jsx)(k.A,{}),variant:"contained",size:"small",children:A.id?"Save":"Create"})]}),(0,he.jsxs)(z.A,{open:x,onClose:v,children:[(0,he.jsx)(Q.A,{children:"Confirm Deletion"}),(0,he.jsx)(U.A,{children:"Are you sure you want to delete this task?"}),(0,he.jsxs)(Y.A,{children:[(0,he.jsx)(y.A,{onClick:v,color:"primary",children:"Cancel"}),(0,he.jsx)(y.A,{onClick:async()=>{if(A.id&&p)try{(await fetch(`${Te}/tasks/delete/${A.id}`,{method:"DELETE"})).ok?(i(null),n(),_(!1)):console.error("Failed to delete Task Details")}catch(e){console.error("Error deleting Task Details",e)}},color:"error",children:"Delete"})]})]})]})})};var Re=n(7549),Ne=n(70258);const Oe=["What inspired you to pursue your chosen field of study?","How do you plan to use your education and skills to make a significant impact in this field?","What special projects or initiatives have you undertaken in your academic life?","Can you tell me about any academic awards or scholarships you have received?","Provide examples or specific skills you have developed that demonstrates your commitment.","What extracurricular activities have you participated in, and how have they contributed to your personal and academic growth?","Once you have completed your studies, how will others benefit from it?","Can you describe any financial challenges you have faced that have affected your ability to pursue your education, and how these challenges have impacted your current financial situation?","Have you previously been awarded a bursary?","What do you think has been your most notable contribution to society thus far?","Why do you think serving the community is important?","Will you be doing any volunteer work during your studies?","Are you willing to assist someone in need?","Describe yourself in three words.","What is your greatest strength?","Describe your biggest mistake and what steps you have taken to rectify it.","What personal achievement makes you proud?","Are you self-motivated? Explain","1st choice of study.","2nd choice of study","3rd choice of study."],ze=["Briefly describe the applicant's family & social financial conditions?","Employment Status Score","Year of Study","Degree/Diploma Name","Number of Years to Qualify","Reason for Choosing the Course","Field of Study Score","APS Score (Matric) or University Average","Number of Failed Modules","Academic Results Score","Have you worked on any special projects or initiatives?","What extracurricular activities have you participated in?","How do you plan to contribute to your community post-graduation?","How would you inspire others to make an impact?","Community Work Involvement Score","How will you use your education and skills to make an impact?","Can you share academic awards or scholarships received?","Describe a role model and why they inspire you?","Why do you believe you deserve this bursary?","If not awarded this bursary, what are your plans?","Motivation Score","Total Score","Comments Section","Overall Impression"],Qe=Re.vv.create({page:{padding:30,fontSize:8,fontFamily:"Helvetica",lineHeight:1.5},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:"1 solid #ccc",marginBottom:10,paddingBottom:4},logo:{width:60,height:60,objectFit:"contain"},headerText:{textAlign:"center",flex:1},headerTitle1:{fontSize:12,fontWeight:"bold",marginBottom:1},headerTitle2:{fontSize:10,fontStyle:"italic"},reportTime:{fontSize:8,textAlign:"right"},sectionTitle:{fontSize:10,fontWeight:"bold",backgroundColor:"#2D3748",color:"white",padding:4,marginTop:10,marginBottom:4,width:"100%",borderRadius:4},studentDetailsRow:{flexDirection:"row",justifyContent:"space-between",width:"100%",gap:4,marginBottom:4},studentDetailsField:{width:"49%",flexDirection:"column",padding:4,borderBottomWidth:1,borderBottomColor:"#ccc",borderBottomStyle:"solid"},studentDetailsLabel:{fontWeight:"bold",marginBottom:2},studentDetailsValue:{fontStyle:"italic"},table:{display:"table",width:"100%",borderStyle:"solid",borderWidth:1,borderColor:"#ccc",marginBottom:4},tableRow:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#ccc",minHeight:20},tableCellLabel:{width:"40%",padding:4,fontWeight:"bold",backgroundColor:"#f5f5f5",borderRightWidth:1,borderRightColor:"#ccc",wordBreak:"keep-all",minWidth:0,overflow:"hidden"},tableCellValue:{width:400,padding:4,fontStyle:"italic",lineHeight:.7}}),Ue=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return"string"!==typeof e?e:e.split(" ").map((e=>e.length<=t?e:e.match(new RegExp(`.{1,${t}}`,"g")).join("\xad"))).join(" ")},Ye=e=>e.replace(/_/g," ").split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "),He=(e,t)=>{const n=Ye(e),s=Ye(t).replace(/s$/,"");return n.startsWith(s+" ")?n.slice(s.length+1):n},qe=(e,t)=>{const n={"About Me":Oe,Interview:ze}[e];if(!n)return He(t,e);const s=t.match(/^(about_me_q|interview_q)(\d+)/i);if(s){return n[parseInt(s[2],10)-1]||He(t,e)}return He(t,e)},Ve=e=>{let{data:t}=e;const n=Object.entries(t||{}).filter((e=>{let[t,n]=e;return null!==n&&""!==n})),s=[];for(let a=0;a<n.length;a+=2)s.push(n.slice(a,a+2));return(0,he.jsxs)(Re.Ss,{children:[(0,he.jsx)(Re.EY,{style:Qe.sectionTitle,children:"Student Details"}),s.map(((e,t)=>(0,he.jsxs)(Re.Ss,{style:Qe.studentDetailsRow,children:[e.map((e=>{let[t,n]=e;return(0,he.jsxs)(Re.Ss,{style:Qe.studentDetailsField,children:[(0,he.jsx)(Re.EY,{style:Qe.studentDetailsLabel,children:He(t,"Student Details")}),(0,he.jsx)(Re.EY,{style:Qe.studentDetailsValue,children:n||"\u2014"})]},t)})),e.length<2&&(0,he.jsx)(Re.Ss,{style:Qe.studentDetailsField})]},t)))]})},Ge=e=>{let{title:t,data:n}=e;if(!n||0===Object.keys(n).length)return null;const s=Object.entries(n).filter((e=>{let[t,n]=e;return null!==n&&""!==n}));return(0,he.jsxs)(Re.Ss,{children:[(0,he.jsx)(Re.EY,{style:Qe.sectionTitle,children:Ye(t)}),(0,he.jsx)(Re.Ss,{style:Qe.table,children:s.map(((e,n)=>{let[s,a]=e;return(0,he.jsxs)(Re.Ss,{style:Qe.tableRow,wrap:!1,children:[(0,he.jsx)(Re.EY,{style:Qe.tableCellLabel,children:qe(t,s)}),(0,he.jsx)(Re.EY,{style:Qe.tableCellValue,children:Ue(a||"\u2014")})]},n)}))})]})},Je=e=>{let{title:t,data:n}=e;if(!n||0===n.length)return null;const s=n.length>1;return(0,he.jsx)(Re.Ss,{children:n.map(((e,n)=>(0,he.jsxs)(Re.Ss,{children:[(0,he.jsxs)(Re.EY,{style:Qe.sectionTitle,children:[Ye(t),s?` - ${n+1}`:""]}),(0,he.jsx)(Re.Ss,{style:Qe.table,children:Object.entries(e).map(((e,n)=>{let[s,a]=e;return(0,he.jsxs)(Re.Ss,{style:Qe.tableRow,children:[(0,he.jsx)(Re.EY,{style:Qe.tableCellLabel,children:He(s,t)}),(0,he.jsx)(Re.EY,{style:Qe.tableCellValue,children:Ue(a||"\u2014")})]},n)}))})]},n)))})},Ke=e=>{let{studentData:t}=e;return(0,he.jsx)(Re.yo,{children:(0,he.jsxs)(Re.YW,{size:"A4",style:Qe.page,children:[(0,he.jsxs)(Re.Ss,{style:Qe.header,children:[(0,he.jsx)(Re._V,{src:Ne,style:Qe.logo}),(0,he.jsxs)(Re.Ss,{style:Qe.headerText,children:[(0,he.jsx)(Re.EY,{style:Qe.headerTitle1,children:"WillowTon & SANZAF Bursary"}),(0,he.jsx)(Re.EY,{style:Qe.headerTitle2,children:"Student Detailed Report"})]}),(0,he.jsx)(Re.EY,{style:Qe.reportTime,children:(new Date).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})})]}),(0,he.jsx)(Ve,{data:t.student_details}),(0,he.jsx)(Ge,{title:"About Me",data:t.about_me}),(0,he.jsx)(Ge,{title:"Assets & Liabilities",data:t.assets_liabilities}),(0,he.jsx)(Ge,{title:"Expense Details",data:t.expense_details}),(0,he.jsx)(Ge,{title:"Interview",data:t.interview}),(0,he.jsx)(Ge,{title:"University Details",data:t.university_details}),(0,he.jsx)(Je,{title:"Parents Details",data:t.parents_details}),(0,he.jsx)(Je,{title:"Attachments",data:t.attachments}),(0,he.jsx)(Je,{title:"Payments",data:t.payments}),(0,he.jsx)(Je,{title:"Results",data:t.results}),(0,he.jsx)(Je,{title:"Tasks",data:t.tasks}),(0,he.jsx)(Je,{title:"Voluntary Service",data:t.voluntary_service})]})})};n(84713);const Xe="https://willowtonbursary.co.za/api",Ze=e=>{let{data:t,sectionKey:n,sectionLabel:y,isDarkMode:f,selectedStudentid:A,onEdit:b,onAdd:C}=e;const[j,v]=(0,s.useState)(""),[g,F]=(0,s.useState)([]),[N,O]=(0,s.useState)([]),[z,Q]=(0,s.useState)({}),[U,Y]=(0,s.useState)(null),[H,q]=(0,s.useState)(!1),[V,G]=(0,s.useState)({key:null,direction:null}),[J,K]=(0,s.useState)(0),[X,Z]=(0,s.useState)(10),[ee,te]=(0,s.useState)(""),[ne,se]=(0,s.useState)(0),ae=(0,s.useRef)(null),re=(0,s.useRef)(null),oe=Boolean(U),le=(0,T.A)(),ie=(0,$.A)(le.breakpoints.down("sm")),de=(0,s.useCallback)((e=>"student_id_passport_number"===e?"Student ID/Passport Number":"student_willow_relationship"===e?"Willowton Group Relationship":e.replace(/^student /i,"").replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))),[]),ce=(0,s.useCallback)((e=>{const t=10*de(e).length+40;return Math.max(50,t)}),[de]);(0,s.useEffect)((()=>{if(t&&t.length>0){const e=Object.keys(t[0]).filter((e=>"id"!==e&&"student_details_portal_id"!==e));F(e),O(e),Q(e.reduce(((e,t)=>({...e,[t]:ce(t)})),{})),se(t.length)}else F([]),O([]),Q({}),se(0)}),[t,ce]),(0,s.useEffect)((()=>{const e=e=>{ae.current&&!ae.current.contains(e.target)&&q(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const ue=(0,s.useCallback)((e=>{if(re.current){const{col:t,startX:n,startWidth:s}=re.current,a=Math.max(50,s+(e.clientX-n));Q((e=>({...e,[t]:a})))}}),[]),pe=(0,s.useCallback)((()=>{re.current=null,document.removeEventListener("mousemove",ue),document.removeEventListener("mouseup",pe),document.body.style.userSelect=""}),[ue]),me=(0,s.useCallback)(((e,t)=>{e.preventDefault(),re.current={col:t,startX:e.clientX,startWidth:z[t]||ce(t)},document.addEventListener("mousemove",ue),document.addEventListener("mouseup",pe),document.body.style.userSelect="none"}),[z,ce,ue,pe]),xe=t.filter((e=>N.some((t=>{const n=e[t];return null!=n&&n.toString().toLowerCase().includes(j.toLowerCase())})))).sort(((e,t)=>{if(!V.key||!V.direction)return 0;const n=e[V.key],s=t[V.key];return null==n||null==s?0:"asc"===V.direction?n.toString().localeCompare(s.toString()):s.toString().localeCompare(n.toString())})),_e=xe.slice(J*X,(J+1)*X);(0,s.useEffect)((()=>{se(xe.length)}),[xe]);const ye=g.filter((e=>{const t=ee.toLowerCase(),n=e.toLowerCase(),s=de(e).toLowerCase();return n.includes(t)||s.includes(t)}));return(0,he.jsxs)(a.A,{sx:{backgroundColor:f?"#2D3748":"#F7FAFC",p:2},className:f?"dark-mode":"",children:[(0,he.jsxs)(a.A,{sx:{padding:"12px",backgroundColor:f?"#1e293b":"#e1f5fe",borderRadius:"8px",marginBottom:"12px",border:"1px solid #ccc",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,he.jsx)(r.A,{variant:"h6",sx:{color:f?"white":"black",fontWeight:"bold"},children:y}),(0,he.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,he.jsx)(a.A,{ref:ae,sx:{width:H?ie?120:220:0,height:36,overflow:"hidden",transition:"width 0.3s ease-in-out, opacity 0.3s ease-in-out",display:"flex",alignItems:"center",opacity:H?1:0},children:(0,he.jsx)(o.Ay,{placeholder:"Search",value:j,onChange:e=>{v(e.target.value),K(0)},sx:{backgroundColor:f?"#1e293b":"#fff",color:f?"white":"black",px:1.5,height:"100%",fontSize:"0.85rem",borderRadius:1,border:"1px solid "+(f?"#4A5568":"#CBD5E0"),width:"100%",minWidth:0},startAdornment:(0,he.jsx)(S.A,{sx:{mr:1},fontSize:"small"}),endAdornment:j&&(0,he.jsx)(l.A,{size:"small",onClick:()=>{v(""),K(0)},sx:{color:f?"white":"black"},children:(0,he.jsx)(W.A,{fontSize:"small"})})})}),(0,he.jsx)(i.A,{title:H?"Close Search":"Search",children:(0,he.jsx)(l.A,{size:"small",onClick:()=>q((e=>!e)),sx:{color:f?"white":"black"},children:H?(0,he.jsx)(W.A,{fontSize:"small"}):(0,he.jsx)(S.A,{fontSize:"small"})})}),!(ie&&H)&&(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(r.A,{sx:{color:f?"white":"black",fontSize:"1rem"},children:"|"}),(0,he.jsx)(i.A,{title:"Column Visibility",children:(0,he.jsx)(l.A,{size:"small",onClick:e=>Y(e.currentTarget),sx:{color:f?"white":"black"},children:(0,he.jsx)(E.A,{fontSize:"small"})})}),(0,he.jsx)(r.A,{sx:{color:f?"white":"black",fontSize:"1rem"},children:"|"}),(0,he.jsx)(i.A,{title:"Export to Excel",children:(0,he.jsx)(l.A,{size:"small",onClick:()=>{const e=t.map((e=>Object.fromEntries(N.map((t=>[de(t),e[t]]))))),s=R.Wp.json_to_sheet(e),a=R.Wp.book_new();R.Wp.book_append_sheet(a,s,n),R._h(a,`${n}_report.xlsx`)},sx:{color:f?"white":"black"},children:(0,he.jsx)(I.A,{fontSize:"small"})})}),C&&(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(r.A,{sx:{color:f?"white":"black",fontSize:"1rem"},children:"|"}),(0,he.jsx)(i.A,{title:"Add New",children:(0,he.jsx)(l.A,{size:"small",onClick:C,sx:{color:f?"white":"black"},children:(0,he.jsx)(k.A,{fontSize:"small"})})})]})]})]})]}),(0,he.jsxs)(d.A,{anchorEl:U,open:oe,onClose:()=>Y(null),PaperProps:{sx:{minWidth:200,maxHeight:300,p:1,backgroundColor:f?"#1e293b":"#fff",color:f?"#F7FAFC":"#1e293b",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.15)",borderRadius:2}},children:[(0,he.jsx)(o.Ay,{autoFocus:!0,placeholder:"Search Columns",value:ee,onChange:e=>te(e.target.value),onKeyDown:e=>e.stopPropagation(),sx:{mb:1,px:1,fontSize:"0.7rem",backgroundColor:f?"#334155":"#f1f5f9",borderRadius:1,width:"100%",height:"28px",color:f?"#F7FAFC":"#1e293b"}}),ye.map((e=>(0,he.jsx)(c.A,{dense:!0,children:(0,he.jsx)(u.A,{control:(0,he.jsx)(p.A,{size:"small",checked:N.includes(e),onChange:()=>(e=>{if(N.includes(e))O((t=>t.filter((t=>t!==e))));else{const t=g.indexOf(e),n=[...N];n.splice(t,0,e),O(n)}})(e)}),label:(0,he.jsx)("span",{style:{fontSize:"0.7rem"},children:de(e)})})},e))),(0,he.jsx)(m.A,{sx:{my:1}}),(0,he.jsxs)(c.A,{dense:!0,onClick:()=>{O(g),Q(g.reduce(((e,t)=>({...e,[t]:ce(t)})),{})),Y(null)},children:[(0,he.jsx)(h.A,{children:(0,he.jsx)(B.A,{fontSize:"small"})}),(0,he.jsx)(x.A,{primary:"Reset Columns",primaryTypographyProps:{fontSize:"0.7rem"}})]})]}),(0,he.jsx)("div",{className:"generic-table-container",children:(0,he.jsxs)("table",{className:"generic-table",style:{backgroundColor:f?"#1e293b":"#fff",tableLayout:"fixed"},children:[(0,he.jsx)("thead",{children:(0,he.jsxs)("tr",{children:[b&&(0,he.jsx)("th",{style:{width:50,color:f?"white":"#1e293b"}}),N.map((e=>(0,he.jsxs)("th",{style:{color:f?"white":"#1e293b",cursor:"pointer",position:"relative",width:z[e]||ce(e),minWidth:50},onClick:t=>{"resize-handle"!==t.target.className&&(e=>{G((t=>t.key===e?{key:e,direction:"asc"===t.direction?"desc":"desc"===t.direction?null:"asc"}:{key:e,direction:"asc"})),K(0)})(e)},children:[(0,he.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingRight:"10px"},children:[(0,he.jsx)("span",{children:de(e)}),(0,he.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[V.key===e&&"asc"===V.direction&&(0,he.jsx)(D.A,{fontSize:"small"}),V.key===e&&"desc"===V.direction&&(0,he.jsx)(P.A,{fontSize:"small"}),V.key===e&&null===V.direction]})]}),(0,he.jsx)("span",{className:"resize-handle",onMouseDown:t=>me(t,e),style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",cursor:"col-resize",background:f?"#4A5568":"#CBD5E0",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none"},children:(0,he.jsx)("span",{style:{fontSize:"12px",color:f?"#F7FAFC":"#1e293b"},children:"|"})})]},e)))]})}),(0,he.jsx)("tbody",{children:_e.length>0?_e.map(((e,t)=>(0,he.jsxs)("tr",{children:[b&&(0,he.jsx)("td",{style:{width:50},children:(0,he.jsx)(w.A,{sx:{cursor:"pointer",fontSize:"large",color:f?"white":"black"},onClick:()=>b(e.id)})}),N.map((t=>{return(0,he.jsx)("td",{style:{color:f?"white":"#1e293b",width:z[t]||ce(t),minWidth:50,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.includes("date")?(n=e[t],n?new Date(n).toLocaleDateString():"N/A"):"object"===typeof e[t]&&null!==e[t]?t.toLowerCase().includes("attachment")||t.toLowerCase().includes("proof_of_service")||t.toLowerCase().includes("proof_of_payment")?"\ud83d\udcce File attached":JSON.stringify(e[t]):e[t]||"N/A"},t);var n}))]},t))):(0,he.jsx)("tr",{children:(0,he.jsx)("td",{colSpan:N.length+(b?1:0),className:"no-matching-records",children:"No matching records found"})})})]})}),(0,he.jsx)(a.A,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:(0,he.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:2,border:"1px solid",borderColor:f?"#4A5568":"#CBD5E0",borderRadius:"8px",padding:"6px 12px",backgroundColor:f?"#2D3748":"#F7FAFC",color:f?"#F7FAFC":"#1e293b"},children:[(0,he.jsx)(r.A,{variant:"caption",sx:{whiteSpace:"nowrap"},children:"Rows per page:"}),(0,he.jsx)(_.A,{value:X,onChange:e=>{Z(parseInt(e.target.value)),K(0)},size:"small",sx:{color:f?"#F7FAFC":"#1e293b",".MuiSelect-icon":{color:f?"#F7FAFC":"#1e293b"},backgroundColor:f?"#4A5568":"#E2E8F0",borderRadius:"4px",fontSize:"0.85rem",minWidth:"60px"},children:[10,15,25,50,100].map((e=>(0,he.jsx)(c.A,{value:e,children:e},e)))}),(0,he.jsxs)(r.A,{variant:"caption",sx:{whiteSpace:"nowrap"},children:[J*X+1,"-",Math.min((J+1)*X,ne)," of ",ne]}),(0,he.jsx)(l.A,{onClick:()=>K((e=>Math.max(0,e-1))),disabled:0===J,size:"small",sx:{color:f?"#F7FAFC":"#1e293b"},children:(0,he.jsx)(M.A,{fontSize:"small"})}),(0,he.jsx)(l.A,{onClick:()=>K((e=>(e+1)*X<ne?e+1:e)),disabled:(J+1)*X>=ne,size:"small",sx:{color:f?"#F7FAFC":"#1e293b"},children:(0,he.jsx)(L.A,{fontSize:"small"})})]})})]})},et=()=>{const[e,t]=(0,s.useState)(""),[n,o]=(0,s.useState)([]),[l,i]=(0,s.useState)(null),[d,c]=(0,s.useState)(null),[u,p]=(0,s.useState)(0),[m,h]=(0,s.useState)(!1),[x,_]=(0,s.useState)(!1),[S,E]=(0,s.useState)(null),[B,P]=(0,s.useState)(!1),[D,M]=(0,s.useState)(null),[L,W]=(0,s.useState)(!1),[T,$]=(0,s.useState)(null),[R,N]=(0,s.useState)(!1),[O,z]=(0,s.useState)(null),[Q,U]=(0,s.useState)(!1),[Y,H]=(0,s.useState)(null),[q,V]=(0,s.useState)(!1),[G,J]=(0,s.useState)(null),[K,X]=(0,s.useState)(!1),[Z,ee]=(0,s.useState)(null),[te,ne]=(0,s.useState)(!1),[se,ae]=(0,s.useState)(null),[re,oe]=(0,s.useState)(!1),[le,de]=(0,s.useState)(null),[ce,ue]=(0,s.useState)(!1),[pe,me]=(0,s.useState)(null),[xe,ye]=(0,s.useState)(!1),[Ae,Ce]=(0,s.useState)(null),[ve,Fe]=(0,s.useState)(null),[ke,Ee]=(0,s.useState)(null),[Be,De]=(0,s.useState)(null),[Le,Te]=(0,s.useState)(null),[Ne,Oe]=(0,s.useState)(null),[ze,Qe]=(0,s.useState)(null),[Ue,Ye]=(0,s.useState)(null),[He,qe]=(0,s.useState)(null),[Ve,Ge]=(0,s.useState)(null),[Je,et]=(0,s.useState)(null),[tt,nt]=(0,s.useState)(null),[st,at]=(0,s.useState)(null),[rt,ot]=(0,s.useState)(!1),{isDarkMode:lt}=(0,s.useContext)(ie.D),it=JSON.parse(localStorage.getItem("user"))||{},dt="admin"===(null===it||void 0===it?void 0:it.user_type),ct="student"===(null===it||void 0===it?void 0:it.user_type),ut={backgroundColor:lt?"#1e293b":"#e1f5fe",color:lt?"#ffffff":"#000000"},pt=e=>new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").replace(/\//g,"/"),mt=(0,s.useCallback)((async()=>{try{var e;ot(!0);const n=it.user_id;let s;if(console.log("UserType: "+it.user_type),dt)s=await fetch(`${Xe}/student-details`);else{if(!ct||!n)return o([]),i(null),c(null),[];s=await fetch(`${Xe}/student-detail/${n}`)}if(!s.ok)return console.error(`API error: ${s.status} ${s.statusText}`),o([]),i(null),c(null),[];const a=await s.json();if(a&&(Array.isArray(a)&&a.length>0&&null!==(e=a[0])&&void 0!==e&&e.id||!Array.isArray(a)&&null!==a&&void 0!==a&&a.id)){if(dt){var t;const e=a.map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().includes("date_stamp")&&(t[e]=pt(t[e]))})),t}));return o(e),i(e[0]||null),c((null===(t=e[0])||void 0===t?void 0:t.id)||null),e}{const e=Array.isArray(a)?a[0]:a;return Object.keys(e).forEach((t=>{t.toLowerCase().includes("date_stamp")&&(e[t]=pt(e[t]))})),o([e]),i(e),c(e.id),e}}return o([]),i(null),c(null),[]}catch(n){return console.error("Error fetching student details:",n),o([]),i(null),c(null),[]}finally{ot(!1)}}),[dt,ct,it.user_id,it.user_type]),ht=(0,s.useCallback)((async e=>{if(e)try{ot(!0);const t=await fetch(`${Xe}/student-data/${e}`),n=await t.json();Fe(n)}catch(t){console.error("Error fetching student data:",t),Fe(null)}finally{ot(!1)}else Fe(null)}),[]),xt=(0,s.useCallback)((async(e,t)=>{try{ot(!0);const n=await fetch(`${Xe}/${e}/${t}`),s=await n.json(),a=Array.isArray(s)?s.map((e=>{const t={...e};return Object.keys(t).forEach((e=>{e.toLowerCase().endsWith("date_stamp")&&(t[e]=pt(t[e]))})),t})):[];return a}catch(n){return console.error(`Error fetching ${e}:`,n),[]}finally{ot(!1)}}),[]);(0,s.useEffect)((()=>{let e=!0;return(async()=>{if(ot(!0),ct){const t=await mt();if(e&&t&&t.id){o([t]),i(t),c(t.id),await ht(t.id);const n=["about-me","parents-details","university-details","attachments","expenses-summary","assets-liabilities","academic-results","voluntary-services","tasks"].filter((e=>dt||"payments"!==e&&"interviews"!==e)),s=await Promise.all(n.map((e=>xt(e,t.id))));e&&(Ee(s[n.indexOf("about-me")]),De(s[n.indexOf("parents-details")]),Te(s[n.indexOf("university-details")]),Oe(s[n.indexOf("attachments")]),Qe(s[n.indexOf("expenses-summary")]),Ye(s[n.indexOf("assets-liabilities")]),qe(s[n.indexOf("academic-results")]),Ge(s[n.indexOf("voluntary-services")]),at(s[n.indexOf("tasks")]))}else e&&(o([]),i(null),c(null),Fe(null))}else if(dt){const t=await mt();if(e&&Array.isArray(t)&&t.length>0){o(t),i(t[0]),c(t[0].id),await ht(t[0].id);const n=["about-me","parents-details","university-details","attachments","expenses-summary","assets-liabilities","academic-results","voluntary-services","payments","interviews","tasks"].filter((e=>dt||"payments"!==e&&"interviews"!==e)),s=await Promise.all(n.map((e=>xt(e,t[0].id))));e&&(Ee(s[n.indexOf("about-me")]),De(s[n.indexOf("parents-details")]),Te(s[n.indexOf("university-details")]),Oe(s[n.indexOf("attachments")]),Qe(s[n.indexOf("expenses-summary")]),Ye(s[n.indexOf("assets-liabilities")]),qe(s[n.indexOf("academic-results")]),Ge(s[n.indexOf("voluntary-services")]),dt&&(et(s[n.indexOf("payments")]),nt(s[n.indexOf("interviews")])),at(s[n.indexOf("tasks")]))}else e&&(o([]),i(null),c(null),Fe(null))}ot(!1)})(),()=>{e=!1}}),[mt,dt,ct,xt,ht]);const _t=(0,s.useCallback)((async e=>{try{ot(!0);const t=await xt("about-me",e);Ee(t),await ht(e)}finally{ot(!1)}}),[xt,ht]),yt=(0,s.useCallback)((async e=>{try{ot(!0);const t=await xt("parents-details",e);De(t),await ht(e)}finally{ot(!1)}}),[xt,ht]),ft=(0,s.useCallback)((async e=>{try{ot(!0);const t=await xt("university-details",e);Te(t),await ht(e)}finally{ot(!1)}}),[xt,ht]),At=(0,s.useCallback)((async e=>{try{ot(!0);const t=await xt("attachments",e);Oe(t),await ht(e)}finally{ot(!1)}}),[xt,ht]),bt=(0,s.useCallback)((async e=>{try{ot(!0);const t=await xt("expenses-summary",e);Qe(t),await ht(e)}finally{ot(!1)}}),[xt,ht]),Ct=(0,s.useCallback)((async e=>{try{ot(!0);const t=await xt("assets-liabilities",e);Ye(t),await ht(e)}finally{ot(!1)}}),[xt,ht]),jt=(0,s.useCallback)((async e=>{try{ot(!0);const t=await xt("academic-results",e);qe(t),await ht(e)}finally{ot(!1)}}),[xt,ht]),vt=(0,s.useCallback)((async e=>{try{ot(!0);const t=await xt("voluntary-services",e);Ge(t),await ht(e)}finally{ot(!1)}}),[xt,ht]),gt=(0,s.useCallback)((async e=>{try{ot(!0);const t=await xt("payments",e);et(t),await ht(e)}finally{ot(!1)}}),[xt,ht]),Ft=(0,s.useCallback)((async e=>{try{ot(!0);const t=await xt("interviews",e);nt(t),await ht(e)}finally{ot(!1)}}),[xt,ht]),wt=(0,s.useCallback)((async e=>{try{ot(!0);const t=await xt("tasks",e);at(t),await ht(e)}finally{ot(!1)}}),[xt,ht]),kt=async e=>{if(ct)i(null),c(null),Fe(null);else if(dt){const t=n.filter((t=>t.id!==e));if(t.length>0){const e=t[0];i(e),c(e.id),await ht(e.id)}else i(null),c(null),Fe(null);await mt()}},St=[{label:"Show all",key:"show_all"},{label:"About Me",key:"about-me"},{label:"Parents Details",key:"parents-details"},{label:"University Details",key:"university-details"},{label:"Attachments",key:"attachments"},{label:"Financial Details",key:"expenses-summary"},{label:"Assets & Liabilities",key:"assets-liabilities"},{label:"Academic Results",key:"academic-results"},{label:"Voluntary Services",key:"voluntary-services"},{label:"Tasks",key:"tasks"}];dt&&St.splice(9,0,{label:"Payments",key:"payments"},{label:"Interviews",key:"interviews"});const Et=e=>{if("student id passport number"===e.toLowerCase())return"ID/Passport Number";if("student willow relationship"===e.toLowerCase())return"Willowton Group Relationship";return e.replace(/^student /i,"").replace(/_/g,"").replace(/\b\w/g,(e=>e.toUpperCase()))},It=e=>({"about-me":ke,"parents-details":Be,"university-details":Le,attachments:Ne,"expenses-summary":ze,"assets-liabilities":Ue,"academic-results":He,"voluntary-services":Ve,payments:Je,interviews:tt,tasks:st}[e]||[]),Bt=e=>{let{sectionKey:t,data:n}=e;return((e,t)=>{if(!t)return null;const n="about-me"===e,s="parents-details"===e,a="university-details"===e,r="attachments"===e,o="expenses-summary"===e,i="assets-liabilities"===e,c="academic-results"===e,u="voluntary-services"===e,p="payments"===e,m="interviews"===e,h="tasks"===e;if((p||m)&&!dt)return null;const x=St.find((t=>t.key===e)),y=x?x.label:e;return(0,he.jsx)(Ze,{data:t,sectionKey:e,sectionLabel:y,isDarkMode:lt,selectedStudentid:d,onEdit:l?e=>{n&&(E(e),_(!0)),s&&(M(e),P(!0)),a&&($(e),W(!0)),r&&(z(e),N(!0)),o&&(H(e),U(!0)),i&&(J(e),V(!0)),c&&(ee(e),X(!0)),u&&(ae(e),ne(!0)),p&&(de(e),oe(!0)),m&&(me(e),ue(!0)),h&&(Ce(e),ye(!0))}:null,onAdd:l?()=>{n&&(E(null),_(!0)),s&&(M(null),P(!0)),a&&($(null),W(!0)),r&&(z(null),N(!0)),o&&(H(null),U(!0)),i&&(J(null),V(!0)),c&&(ee(null),X(!0)),u&&(ae(null),ne(!0)),p&&(de(null),oe(!0)),m&&(me(null),ue(!0)),h&&(Ce(null),ye(!0))}:null})})(t,n)},Pt=ct&&!rt&&!l,Dt=(dt||ct)&&l;return(0,he.jsxs)("div",{children:[(0,he.jsxs)(a.A,{sx:{padding:"12px",backgroundColor:lt?"#1e293b":"#e1f5fe",borderRadius:"8px",marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid #ccc"},children:[(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:lt?"white":"black"},children:"Student Details"}),Pt&&(0,he.jsxs)(y.A,{variant:"contained",onClick:()=>{c(null),h(!0)},sx:{display:"flex",alignItems:"center",backgroundColor:lt?"white":"black",color:lt?"black":"white",padding:"2px 6px",textTransform:"none"},children:[(0,he.jsx)(k.A,{sx:{marginRight:1,fontSize:"small"}}),"Start Application"]})]}),(0,he.jsxs)(f.Ay,{container:!0,spacing:3,children:[dt&&(0,he.jsx)(f.Ay,{item:!0,xs:12,sm:3,md:2,children:(0,he.jsxs)(A.A,{sx:{border:"1px solid #ccc",backgroundColor:lt?"#1e293b":"white",color:ut.color},children:[(0,he.jsx)(a.A,{sx:{backgroundColor:lt?"#1e293b":"#e1f5fe",padding:"6px",borderBottom:lt?"1px solid white":"1px solid #ccc"},children:(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:lt?"white":"#1e293b",marginLeft:1},children:"Search"})}),(0,he.jsxs)(a.A,{sx:{padding:2},children:[(0,he.jsx)(b.A,{label:"Search",variant:"outlined",fullWidth:!0,value:e,onChange:e=>t(e.target.value),sx:{mb:1,borderRadius:1,"& .MuiOutlinedInput-root":{backgroundColor:lt?"#1e293b":"white","& fieldset":{borderColor:lt?"white":"#1e293b"},"&:hover fieldset":{borderColor:lt?"white":"#1e293b"},"&.Mui-focused fieldset":{borderColor:lt?"white":"#1e293b"}},"& .MuiInputBase-input":{color:lt?"white":"#1e293b"},"& .MuiInputBase-input::placeholder":{color:lt?"#B0B0B0":"#666"}},placeholder:"Search",InputLabelProps:{style:{color:lt?"#ffffff":"#000000"}}}),(0,he.jsx)("div",{style:{maxHeight:"300px",overflowY:"auto"},children:n.filter((t=>t.student_name.toLowerCase().includes(e.toLowerCase())||t.student_surname.toLowerCase().includes(e.toLowerCase()))).map(((e,t)=>(0,he.jsx)(C.A,{sx:{mb:.5,boxShadow:0,height:55,cursor:"pointer",backgroundColor:(null===l||void 0===l?void 0:l.id)===e.id?lt?"white":"#1e293b":"transparent",color:(null===l||void 0===l?void 0:l.id)===e.id?lt?"#1e293b":"white":"inherit","&:hover":{backgroundColor:lt?"white":"#1e293b",color:lt?"#1e293b":"white"}},onClick:async()=>{i(e),c(e.id),ot(!0),await ht(e.id);const t=["about-me","parents-details","university-details","attachments","expenses-summary","assets-liabilities","academic-results","voluntary-services","payments","interviews","tasks"].filter((e=>dt||"payments"!==e&&"interviews"!==e)),n=await Promise.all(t.map((t=>xt(t,e.id))));Ee(n[t.indexOf("about-me")]),De(n[t.indexOf("parents-details")]),Te(n[t.indexOf("university-details")]),Oe(n[t.indexOf("attachments")]),Qe(n[t.indexOf("expenses-summary")]),Ye(n[t.indexOf("assets-liabilities")]),qe(n[t.indexOf("academic-results")]),Ge(n[t.indexOf("voluntary-services")]),dt&&(et(n[t.indexOf("payments")]),nt(n[t.indexOf("interviews")])),at(n[t.indexOf("tasks")])},children:(0,he.jsxs)(j.A,{sx:{padding:"10px"},children:[(0,he.jsx)(r.A,{variant:"body1",sx:{fontWeight:"bold"},children:e.student_name}),(0,he.jsx)(r.A,{variant:"body2",children:e.student_surname})]})},t)))})]})]})}),(dt||l)&&(0,he.jsx)(f.Ay,{item:!0,xs:12,sm:9,md:ct?12:10,children:(0,he.jsxs)(A.A,{sx:{border:"1px solid #ccc",backgroundColor:lt?"#1e293b":"white",color:ut.color},children:[(0,he.jsxs)(a.A,{sx:{backgroundColor:lt?"#1e293b":"#e1f5fe",borderBottom:lt?"1px solid white":"1px solid #ccc",padding:"6px",display:"flex",justifyContent:"space-between"},children:[(0,he.jsx)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:lt?"white":"#1e293b",marginLeft:1},children:"Student Details Portal"}),Dt&&(0,he.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:0,margin:0,padding:0},children:[(0,he.jsxs)(y.A,{variant:"contained",onClick:()=>{h(!1),setTimeout((()=>h(!0)),50),c(null===l||void 0===l?void 0:l.id)},sx:{display:"flex",alignItems:"center",backgroundColor:lt?"white":"black",color:lt?"black":"white",padding:"2px 6px",margin:0,textTransform:"none"},children:[(0,he.jsx)(w.A,{sx:{marginRight:1,fontSize:"small"}}),"Edit"]}),dt&&(0,he.jsxs)(y.A,{variant:"contained",onClick:async()=>{if(l&&ve)try{const e=await(0,Re.x8)((0,he.jsx)(Ke,{studentData:ve})).toBlob(),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t;const s=l.student_name||"Unknown",a=l.student_surname||"User";n.download=`${s} ${a} - Student Details PDF.pdf`,n.click(),URL.revokeObjectURL(t)}catch(e){console.error("Failed to generate PDF:",e)}else console.error("No selected student or student data available for PDF generation")},sx:{display:"flex",alignItems:"center",backgroundColor:lt?"white":"black",color:lt?"black":"white",padding:"2px 6px",margin:0,textTransform:"none",marginLeft:1},children:[(0,he.jsx)(I.A,{sx:{marginRight:1,fontSize:"small"}}),"Download PDF"]})]})]}),rt?(0,he.jsxs)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:4},children:[(0,he.jsx)(v.A,{sx:{color:lt?"white":"black"}}),(0,he.jsx)(r.A,{variant:"body1",sx:{ml:2,color:lt?"white":"black"},children:"Loading..."})]}):l?(0,he.jsx)(a.A,{sx:{padding:1.5},children:(0,he.jsx)(f.Ay,{container:!0,spacing:1,children:Object.entries(l).map(((e,t)=>{let[n,a]=e;return"id"!==n&&"user_id"!==n&&"employment_status_attachment"!==n&&(0,he.jsxs)(s.Fragment,{children:[(0,he.jsx)(f.Ay,{item:!0,xs:6,sx:{borderBottom:"1px solid #ccc",pb:"6px"},children:(0,he.jsx)(r.A,{variant:"body1",children:(0,he.jsx)("strong",{children:Et(n.replace(/_/g," "))})})}),(0,he.jsx)(f.Ay,{item:!0,xs:6,sx:{borderBottom:"1px solid #ccc",pb:"6px"},children:(0,he.jsx)(r.A,{variant:"body1",children:a})})]},t)}))})}):(0,he.jsx)(r.A,{variant:"body1",sx:{m:2,fontWeight:"bold",color:lt?"white":"black"},children:"No Record Selected"}),!rt&&l&&(0,he.jsx)(a.A,{sx:{p:1,overflowX:"auto"},children:(0,he.jsx)(g.A,{value:u,onChange:(e,t)=>p(t),"aria-label":"tabs",sx:{"& .MuiTab-root":{fontWeight:"600",textTransform:"capitalize",mr:-2,color:lt?"white":"black"}},children:St.map(((e,t)=>(0,he.jsx)(F.A,{label:e.label},t)))})}),!rt&&l&&(0,he.jsx)(a.A,{sx:{p:2},children:(e=>{const t=St[e];return"show_all"===t.key?St.filter((e=>"show_all"!==e.key)).map(((e,t)=>(dt||"payments"!==e.key&&"interviews"!==e.key)&&(0,he.jsx)(Bt,{sectionKey:e.key,data:It(e.key)},t))):(0,he.jsx)(Bt,{sectionKey:t.key,data:It(t.key)})})(u)})]})})]}),(0,he.jsx)(_e,{open:m,onClose:()=>h(!1),studentId:d,onSave:async e=>{if(e&&"object"===typeof e&&e.id){const t={...e,...Object.keys(e).reduce(((t,n)=>(n.toLowerCase().includes("date")&&e[n]?t[n]=pt(e[n]):t[n]=e[n],t)),{})};o((n=>{const s=n.findIndex((t=>t.id===e.id));if(s>=0){const e=[...n];return e[s]=t,e}return[...n,t]})),i(t),c(t.id),await ht(t.id)}else console.error("Invalid savedStudent data:",e);h(!1),await mt()},onDelete:kt}),(0,he.jsx)(fe,{open:x,onClose:()=>{_(!1),E(null)},studentId:d,aboutMeId:S,onSave:()=>{d&&_t(d),_(!1),E(null)}}),(0,he.jsx)(be,{open:B,onClose:()=>{P(!1),M(null)},studentId:d,parentId:D,onSave:()=>{d&&yt(d),P(!1),M(null)}}),(0,he.jsx)(je,{open:L,onClose:()=>{W(!1),$(null)},studentId:d,universityDetailsId:T,onSave:()=>{d&&ft(d),W(!1),$(null)}}),(0,he.jsx)(ge,{open:R,onClose:()=>{N(!1),z(null)},studentId:d,attachmentId:O,onSave:()=>{d&&At(d),N(!1),z(null)}}),(0,he.jsx)(we,{open:Q,onClose:()=>{U(!1),H(null)},studentId:d,expenseDetailsId:Y,onSave:()=>{d&&bt(d),U(!1),H(null)}}),(0,he.jsx)(Se,{open:q,onClose:()=>{V(!1),J(null)},studentId:d,assetLiabilityId:G,onSave:()=>{d&&Ct(d),V(!1),J(null)}}),(0,he.jsx)(Ie,{open:K,onClose:()=>{X(!1),ee(null)},studentId:d,resultId:Z,onSave:()=>{d&&jt(d),X(!1),ee(null)}}),(0,he.jsx)(Pe,{open:te,onClose:()=>{ne(!1),ae(null)},studentId:d,recordId:se,onSave:()=>{d&&vt(d),ne(!1),ae(null)}}),(0,he.jsx)(Me,{open:re,onClose:()=>oe(!1),studentId:d,recordId:le,onSave:()=>{d&&gt(d),oe(!1),de(null)}}),(0,he.jsx)(We,{open:ce,onClose:()=>ue(!1),studentId:d,recordId:pe,onSave:()=>{d&&Ft(d),ue(!1),me(null)}}),(0,he.jsx)($e,{open:xe,onClose:()=>{ye(!1),Ce(null)},studentId:d,taskId:Ae,onSave:()=>{d&&wt(d),ye(!1),Ce(null)}})]})}},50477:()=>{},84713:()=>{}}]);
//# sourceMappingURL=537.3c0ff4f2.chunk.js.map