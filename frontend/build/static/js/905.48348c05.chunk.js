"use strict";(self.webpackChunkfrontends=self.webpackChunkfrontends||[]).push([[905],{59540:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(59662),l=s(70579);const o=(0,n.A)((0,l.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward")},68654:()=>{},85905:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var n=s(89379),l=s(65043),o=s(7353),r=s(94496),i=s(62559),a=s(17392),c=s(77739),d=s(70378),u=s(32143),x=s(74605),h=s(23217),p=s(39336),m=s(2050),f=s(48734),A=s(81637),b=s(72221),j=s(79484),g=s(52879),C=s(47968),y=s(47805),w=s(88645),S=s(59540),k=s(37131),v=s(99389),F=s(30079),z=s(26240),E=s(85442),L=s(79722),D=s(11238),R=s(27415),_=(s(68654),s(70579));const N=function(){const{isDarkMode:e}=(0,l.useContext)(R.D),[t,s]=(0,l.useState)([]),[N,W]=(0,l.useState)(""),[I,M]=(0,l.useState)([]),[B,P]=(0,l.useState)([]),[V,O]=(0,l.useState)({}),[X,H]=(0,l.useState)(null),[T,U]=(0,l.useState)(!1),[K,q]=(0,l.useState)({key:null,direction:null}),[G,J]=(0,l.useState)(0),[Q,Y]=(0,l.useState)(10),[Z,$]=(0,l.useState)(""),[ee,te]=(0,l.useState)(0),[se,ne]=(0,l.useState)(!1),le=(0,l.useRef)(null),oe=(0,l.useRef)(null),re=Boolean(X),ie=(0,z.A)(),ae=(0,E.A)(ie.breakpoints.down("sm")),ce=(0,l.useCallback)((e=>"student_id_passport_number"===e?"Student ID/Passport Number":e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))),[]),de=(0,l.useCallback)((e=>{const t=10*ce(e).length+40;return Math.max(50,t)}),[ce]),ue=(0,l.useCallback)((async()=>{ne(!0);try{var e,t;const l=await L.A.get("".concat("https://willowtonbursary.co.za/api","/view/student-voluntary-service")),o=Array.isArray(l.data)?l.data:null!==(e=null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.records)&&void 0!==e?e:[];if(o.length>0){const e=Object.keys(o[0]).filter((e=>"id"!==e));M(e),P(e),O(e.reduce(((e,t)=>(0,n.A)((0,n.A)({},e),{},{[t]:de(t)})),{}))}s(o)}catch(l){console.log("No Records Found"),s([])}finally{ne(!1)}}),[de]);(0,l.useEffect)((()=>{ue()}),[ue]),(0,l.useEffect)((()=>{const e=e=>{le.current&&!le.current.contains(e.target)&&U(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const xe=(0,l.useCallback)((e=>{if(oe.current){const{col:t,startX:s,startWidth:l}=oe.current,o=Math.max(50,l+(e.clientX-s));O((e=>(0,n.A)((0,n.A)({},e),{},{[t]:o})))}}),[]),he=(0,l.useCallback)((()=>{oe.current=null,document.removeEventListener("mousemove",xe),document.removeEventListener("mouseup",he),document.body.style.userSelect=""}),[xe]),pe=(0,l.useCallback)(((e,t)=>{e.preventDefault(),oe.current={col:t,startX:e.clientX,startWidth:V[t]||de(t)},document.addEventListener("mousemove",xe),document.addEventListener("mouseup",he),document.body.style.userSelect="none"}),[V,de,xe,he]),me=t.filter((e=>B.some((t=>{const s=e[t];return null!=s&&s.toString().toLowerCase().includes(N.toLowerCase())})))).sort(((e,t)=>{if(!K.key||!K.direction)return 0;const s=e[K.key],n=t[K.key];return null==s||null==n?0:"asc"===K.direction?s.toString().localeCompare(n.toString()):n.toString().localeCompare(s.toString())})),fe=me.slice(G*Q,(G+1)*Q);(0,l.useEffect)((()=>{te(me.length)}),[me]);const Ae=I.filter((e=>{const t=Z.toLowerCase(),s=e.toLowerCase(),n=ce(e).toLowerCase();return s.includes(t)||n.includes(t)}));return(0,_.jsxs)(o.A,{sx:{backgroundColor:e?"#2D3748":"#F7FAFC",minHeight:"100vh",p:2},className:e?"dark-mode":"",children:[(0,_.jsxs)(o.A,{sx:{padding:"12px",backgroundColor:e?"#1e293b":"#e1f5fe",borderRadius:"8px",marginBottom:"12px",border:"1px solid #ccc",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,_.jsx)(r.A,{variant:"h6",sx:{color:e?"white":"black",fontWeight:"bold"},children:"Voluntary Service"}),(0,_.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,_.jsx)(o.A,{ref:le,sx:{width:T?ae?120:220:0,height:36,overflow:"hidden",transition:"width 0.3s ease-in-out, opacity 0.3s ease-in-out",display:"flex",alignItems:"center",opacity:T?1:0},children:(0,_.jsx)(i.Ay,{placeholder:"Search",value:N,onChange:e=>{W(e.target.value),J(0)},sx:{backgroundColor:e?"#1e293b":"#fff",color:e?"white":"black",px:1.5,height:"100%",fontSize:"0.85rem",borderRadius:1,border:"1px solid ".concat(e?"#4A5568":"#CBD5E0"),width:"100%",minWidth:0},startAdornment:(0,_.jsx)(j.A,{sx:{mr:1},fontSize:"small"}),endAdornment:N&&(0,_.jsx)(a.A,{size:"small",onClick:()=>{W(""),J(0)},sx:{color:e?"white":"black"},children:(0,_.jsx)(F.A,{fontSize:"small"})})})}),(0,_.jsx)(c.A,{title:T?"Close Search":"Search",children:(0,_.jsx)(a.A,{size:"small",onClick:()=>U((e=>!e)),sx:{color:e?"white":"black"},children:T?(0,_.jsx)(F.A,{fontSize:"small"}):(0,_.jsx)(j.A,{fontSize:"small"})})}),!(ae&&T)&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r.A,{sx:{color:e?"white":"black",fontSize:"1rem"},children:"|"}),(0,_.jsx)(c.A,{title:"Column Visibility",children:(0,_.jsx)(a.A,{size:"small",onClick:e=>H(e.currentTarget),sx:{color:e?"white":"black"},children:(0,_.jsx)(g.A,{fontSize:"small"})})}),(0,_.jsx)(r.A,{sx:{color:e?"white":"black",fontSize:"1rem"},children:"|"}),(0,_.jsx)(c.A,{title:"Export to Excel",children:(0,_.jsx)(a.A,{size:"small",onClick:()=>{const e=t.map((e=>Object.fromEntries(B.map((t=>[ce(t),e[t]]))))),s=D.Wp.json_to_sheet(e),n=D.Wp.book_new();D.Wp.book_append_sheet(n,s,"Report"),D._h(n,"student_voluntary_service_report.xlsx")},sx:{color:e?"white":"black"},children:(0,_.jsx)(C.A,{fontSize:"small"})})})]})]})]}),(0,_.jsxs)(d.A,{anchorEl:X,open:re,onClose:()=>H(null),PaperProps:{sx:{minWidth:200,maxHeight:300,p:1,backgroundColor:e?"#1e293b":"#fff",color:e?"#F7FAFC":"#1e293b",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.15)",borderRadius:2}},children:[(0,_.jsx)(i.Ay,{autoFocus:!0,placeholder:"Search Columns",value:Z,onChange:e=>$(e.target.value),onKeyDown:e=>e.stopPropagation(),sx:{mb:1,px:1,fontSize:"0.7rem",backgroundColor:e?"#334155":"#f1f5f9",borderRadius:1,width:"100%",height:"28px",color:e?"#F7FAFC":"#1e293b"}}),Ae.map((e=>(0,_.jsx)(u.A,{dense:!0,children:(0,_.jsx)(x.A,{control:(0,_.jsx)(h.A,{size:"small",checked:B.includes(e),onChange:()=>(e=>{if(B.includes(e))P((t=>t.filter((t=>t!==e))));else{const t=I.indexOf(e),s=[...B];s.splice(t,0,e),P(s)}})(e)}),label:(0,_.jsx)("span",{style:{fontSize:"0.7rem"},children:ce(e)})})},e))),(0,_.jsx)(p.A,{sx:{my:1}}),(0,_.jsxs)(u.A,{dense:!0,onClick:()=>{P(I),O(I.reduce(((e,t)=>(0,n.A)((0,n.A)({},e),{},{[t]:de(t)})),{})),H(null)},children:[(0,_.jsx)(m.A,{children:(0,_.jsx)(y.A,{fontSize:"small"})}),(0,_.jsx)(f.A,{primary:"Reset Columns",primaryTypographyProps:{fontSize:"0.7rem"}})]})]}),(0,_.jsx)("div",{className:"generic-table-container",children:se?(0,_.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:(0,_.jsx)(A.A,{sx:{color:e?"#F7FAFC":"#1e293b"}})}):(0,_.jsxs)("table",{className:"generic-table",style:{backgroundColor:e?"#1e293b":"#fff",tableLayout:"fixed"},children:[(0,_.jsx)("thead",{children:(0,_.jsx)("tr",{children:B.map((t=>(0,_.jsxs)("th",{style:{color:e?"white":"#1e293b",cursor:"pointer",position:"relative",width:V[t]||de(t),minWidth:50},onClick:e=>{"resize-handle"!==e.target.className&&(e=>{q((t=>t.key===e?{key:e,direction:"asc"===t.direction?"desc":"desc"===t.direction?null:"asc"}:{key:e,direction:"asc"})),J(0)})(t)},children:[(0,_.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingRight:"10px"},children:[(0,_.jsx)("span",{children:ce(t)}),(0,_.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[K.key===t&&"asc"===K.direction&&(0,_.jsx)(S.A,{fontSize:"small"}),K.key===t&&"desc"===K.direction&&(0,_.jsx)(w.A,{fontSize:"small"}),K.key===t&&null===K.direction]})]}),(0,_.jsx)("span",{className:"resize-handle",onMouseDown:e=>pe(e,t),style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",cursor:"col-resize",background:e?"#4A5568":"#CBD5E0",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none"},children:(0,_.jsx)("span",{style:{fontSize:"12px",color:e?"#F7FAFC":"#1e293b"},children:"|"})})]},t)))})}),(0,_.jsx)("tbody",{children:fe.length>0?fe.map((t=>(0,_.jsx)("tr",{children:B.map((s=>{return(0,_.jsx)("td",{style:{color:e?"white":"#1e293b",width:V[s]||de(s),minWidth:50,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.includes("date")?(n=t[s],n?new Date(n).toLocaleDateString():"N/A"):t[s]},s);var n}))},t.id))):(0,_.jsx)("tr",{children:(0,_.jsx)("td",{colSpan:B.length,className:"no-matching-records",children:0===t.length?"No records found":"No matching records found"})})})]})}),!se&&(0,_.jsx)(o.A,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:(0,_.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:2,border:"1px solid",borderColor:e?"#4A5568":"#CBD5E0",borderRadius:"8px",padding:"6px 12px",backgroundColor:e?"#2D3748":"#F7FAFC",color:e?"#F7FAFC":"#1e293b"},children:[(0,_.jsx)(r.A,{variant:"caption",sx:{whiteSpace:"nowrap"},children:"Rows per page:"}),(0,_.jsx)(b.A,{value:Q,onChange:e=>{Y(parseInt(e.target.value)),J(0)},size:"small",sx:{color:e?"#F7FAFC":"#1e293b",".MuiSelect-icon":{color:e?"#F7FAFC":"#1e293b"},backgroundColor:e?"#4A5568":"#E2E8F0",borderRadius:"4px",fontSize:"0.85rem",minWidth:"60px"},children:[10,15,25,50,100].map((e=>(0,_.jsx)(u.A,{value:e,children:e},e)))}),(0,_.jsxs)(r.A,{variant:"caption",sx:{whiteSpace:"nowrap"},children:[G*Q+1,"-",Math.min((G+1)*Q,ee)," of ",ee]}),(0,_.jsx)(a.A,{onClick:()=>J((e=>Math.max(0,e-1))),disabled:0===G,size:"small",sx:{color:e?"#F7FAFC":"#1e293b"},children:(0,_.jsx)(k.A,{fontSize:"small"})}),(0,_.jsx)(a.A,{onClick:()=>J((e=>(e+1)*Q<ee?e+1:e)),disabled:(G+1)*Q>=ee,size:"small",sx:{color:e?"#F7FAFC":"#1e293b"},children:(0,_.jsx)(v.A,{fontSize:"small"})})]})})]})}},88645:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(59662),l=s(70579);const o=(0,n.A)((0,l.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward")}}]);
//# sourceMappingURL=905.48348c05.chunk.js.map